/*! For license information please see enface.auth.node.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.EnfaceAuth=e():t.EnfaceAuth=e()}(this,(function(){return(()=>{var t={3407:t=>{t.exports={newInvalidAsn1Error:function(t){var e=new Error;return e.name="InvalidAsn1Error",e.message=t||"",e}}},279:(t,e,r)=>{var n=r(3407),i=r(4478),s=r(4578),o=r(3609);for(var a in t.exports={Reader:s,Writer:o},i)i.hasOwnProperty(a)&&(t.exports[a]=i[a]);for(var h in n)n.hasOwnProperty(h)&&(t.exports[h]=n[h])},4578:(t,e,r)=>{var n=r(2357),i=r(2399).Buffer,s=r(4478),o=r(3407).newInvalidAsn1Error;function a(t){if(!t||!i.isBuffer(t))throw new TypeError("data must be a node Buffer");this._buf=t,this._size=t.length,this._len=0,this._offset=0}Object.defineProperty(a.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(a.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(a.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),a.prototype.readByte=function(t){if(this._size-this._offset<1)return null;var e=255&this._buf[this._offset];return t||(this._offset+=1),e},a.prototype.peek=function(){return this.readByte(!0)},a.prototype.readLength=function(t){if(void 0===t&&(t=this._offset),t>=this._size)return null;var e=255&this._buf[t++];if(null===e)return null;if(128==(128&e)){if(0===(e&=127))throw o("Indefinite length not supported");if(e>4)throw o("encoding too long");if(this._size-t<e)return null;this._len=0;for(var r=0;r<e;r++)this._len=(this._len<<8)+(255&this._buf[t++])}else this._len=e;return t},a.prototype.readSequence=function(t){var e=this.peek();if(null===e)return null;if(void 0!==t&&t!==e)throw o("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);return null===r?null:(this._offset=r,e)},a.prototype.readInt=function(){return this._readTag(s.Integer)},a.prototype.readBoolean=function(){return 0!==this._readTag(s.Boolean)},a.prototype.readEnumeration=function(){return this._readTag(s.Enumeration)},a.prototype.readString=function(t,e){t||(t=s.OctetString);var r=this.peek();if(null===r)return null;if(r!==t)throw o("Expected 0x"+t.toString(16)+": got 0x"+r.toString(16));var n=this.readLength(this._offset+1);if(null===n)return null;if(this.length>this._size-n)return null;if(this._offset=n,0===this.length)return e?i.alloc(0):"";var a=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,e?a:a.toString("utf8")},a.prototype.readOID=function(t){t||(t=s.OID);var e=this.readString(t,!0);if(null===e)return null;for(var r=[],n=0,i=0;i<e.length;i++){var o=255&e[i];n<<=7,n+=127&o,0==(128&o)&&(r.push(n),n=0)}return n=r.shift(),r.unshift(n%40),r.unshift(n/40>>0),r.join(".")},a.prototype._readTag=function(t){n.ok(void 0!==t);var e=this.peek();if(null===e)return null;if(e!==t)throw o("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);if(null===r)return null;if(this.length>4)throw o("Integer too long: "+this.length);if(this.length>this._size-r)return null;this._offset=r;for(var i=this._buf[this._offset],s=0,a=0;a<this.length;a++)s<<=8,s|=255&this._buf[this._offset++];return 128==(128&i)&&4!==a&&(s-=1<<8*a),s>>0},t.exports=a},4478:t=>{t.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},3609:(t,e,r)=>{var n=r(2357),i=r(2399).Buffer,s=r(4478),o=r(3407).newInvalidAsn1Error,a={size:1024,growthFactor:8};function h(t){var e,r;e=a,r=t||{},n.ok(e),n.equal(typeof e,"object"),n.ok(r),n.equal(typeof r,"object"),Object.getOwnPropertyNames(e).forEach((function(t){if(!r[t]){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n)}})),t=r,this._buf=i.alloc(t.size||1024),this._size=this._buf.length,this._offset=0,this._options=t,this._seq=[]}Object.defineProperty(h.prototype,"buffer",{get:function(){if(this._seq.length)throw o(this._seq.length+" unended sequence(s)");return this._buf.slice(0,this._offset)}}),h.prototype.writeByte=function(t){if("number"!=typeof t)throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=t},h.prototype.writeInt=function(t,e){if("number"!=typeof t)throw new TypeError("argument must be a Number");"number"!=typeof e&&(e=s.Integer);for(var r=4;(0==(4286578688&t)||-8388608==(4286578688&t))&&r>1;)r--,t<<=8;if(r>4)throw o("BER ints cannot be > 0xffffffff");for(this._ensure(2+r),this._buf[this._offset++]=e,this._buf[this._offset++]=r;r-- >0;)this._buf[this._offset++]=(4278190080&t)>>>24,t<<=8},h.prototype.writeNull=function(){this.writeByte(s.Null),this.writeByte(0)},h.prototype.writeEnumeration=function(t,e){if("number"!=typeof t)throw new TypeError("argument must be a Number");return"number"!=typeof e&&(e=s.Enumeration),this.writeInt(t,e)},h.prototype.writeBoolean=function(t,e){if("boolean"!=typeof t)throw new TypeError("argument must be a Boolean");"number"!=typeof e&&(e=s.Boolean),this._ensure(3),this._buf[this._offset++]=e,this._buf[this._offset++]=1,this._buf[this._offset++]=t?255:0},h.prototype.writeString=function(t,e){if("string"!=typeof t)throw new TypeError("argument must be a string (was: "+typeof t+")");"number"!=typeof e&&(e=s.OctetString);var r=i.byteLength(t);this.writeByte(e),this.writeLength(r),r&&(this._ensure(r),this._buf.write(t,this._offset),this._offset+=r)},h.prototype.writeBuffer=function(t,e){if("number"!=typeof e)throw new TypeError("tag must be a number");if(!i.isBuffer(t))throw new TypeError("argument must be a buffer");this.writeByte(e),this.writeLength(t.length),this._ensure(t.length),t.copy(this._buf,this._offset,0,t.length),this._offset+=t.length},h.prototype.writeStringArray=function(t){if(!t instanceof Array)throw new TypeError("argument must be an Array[String]");var e=this;t.forEach((function(t){e.writeString(t)}))},h.prototype.writeOID=function(t,e){if("string"!=typeof t)throw new TypeError("argument must be a string");if("number"!=typeof e&&(e=s.OID),!/^([0-9]+\.){3,}[0-9]+$/.test(t))throw new Error("argument is not a valid OID string");var r=t.split("."),n=[];n.push(40*parseInt(r[0],10)+parseInt(r[1],10)),r.slice(2).forEach((function(t){!function(t,e){e<128?t.push(e):e<16384?(t.push(e>>>7|128),t.push(127&e)):e<2097152?(t.push(e>>>14|128),t.push(255&(e>>>7|128)),t.push(127&e)):e<268435456?(t.push(e>>>21|128),t.push(255&(e>>>14|128)),t.push(255&(e>>>7|128)),t.push(127&e)):(t.push(255&(e>>>28|128)),t.push(255&(e>>>21|128)),t.push(255&(e>>>14|128)),t.push(255&(e>>>7|128)),t.push(127&e))}(n,parseInt(t,10))}));var i=this;this._ensure(2+n.length),this.writeByte(e),this.writeLength(n.length),n.forEach((function(t){i.writeByte(t)}))},h.prototype.writeLength=function(t){if("number"!=typeof t)throw new TypeError("argument must be a Number");if(this._ensure(4),t<=127)this._buf[this._offset++]=t;else if(t<=255)this._buf[this._offset++]=129,this._buf[this._offset++]=t;else if(t<=65535)this._buf[this._offset++]=130,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t;else{if(!(t<=16777215))throw o("Length too long (> 4 bytes)");this._buf[this._offset++]=131,this._buf[this._offset++]=t>>16,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t}},h.prototype.startSequence=function(t){"number"!=typeof t&&(t=s.Sequence|s.Constructor),this.writeByte(t),this._seq.push(this._offset),this._ensure(3),this._offset+=3},h.prototype.endSequence=function(){var t=this._seq.pop(),e=t+3,r=this._offset-e;if(r<=127)this._shift(e,r,-2),this._buf[t]=r;else if(r<=255)this._shift(e,r,-1),this._buf[t]=129,this._buf[t+1]=r;else if(r<=65535)this._buf[t]=130,this._buf[t+1]=r>>8,this._buf[t+2]=r;else{if(!(r<=16777215))throw o("Sequence too long");this._shift(e,r,1),this._buf[t]=131,this._buf[t+1]=r>>16,this._buf[t+2]=r>>8,this._buf[t+3]=r}},h.prototype._shift=function(t,e,r){n.ok(void 0!==t),n.ok(void 0!==e),n.ok(r),this._buf.copy(this._buf,t+r,t,t+e),this._offset+=r},h.prototype._ensure=function(t){if(n.ok(t),this._size-this._offset<t){var e=this._size*this._options.growthFactor;e-this._offset<t&&(e+=t);var r=i.alloc(e);this._buf.copy(r,0,0,this._offset),this._buf=r,this._size=e}},t.exports=h},476:(t,e,r)=>{var n=r(279);t.exports={Ber:n,BerReader:n.Reader,BerWriter:n.Writer}},2882:t=>{"use strict";for(var e="qpzry9x8gf2tvdw0s3jn54khce6mua7l",r={},n=0;n<e.length;n++){var i=e.charAt(n);if(void 0!==r[i])throw new TypeError(i+" is ambiguous");r[i]=n}function s(t){var e=t>>25;return(33554431&t)<<5^996825010&-(e>>0&1)^642813549&-(e>>1&1)^513874426&-(e>>2&1)^1027748829&-(e>>3&1)^705979059&-(e>>4&1)}function o(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=s(e)^n>>5}for(e=s(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=s(e)^31&i}return e}function a(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var n=t.toLowerCase(),i=t.toUpperCase();if(t!==n&&t!==i)return"Mixed-case string "+t;var a=(t=n).lastIndexOf("1");if(-1===a)return"No separator character for "+t;if(0===a)return"Missing prefix for "+t;var h=t.slice(0,a),u=t.slice(a+1);if(u.length<6)return"Data too short";var c=o(h);if("string"==typeof c)return c;for(var l=[],f=0;f<u.length;++f){var d=u.charAt(f),p=r[d];if(void 0===p)return"Unknown character "+d;c=s(c)^p,f+6>=u.length||l.push(p)}return 1!==c?"Invalid checksum for "+t:{prefix:h,words:l}}function h(t,e,r,n){for(var i=0,s=0,o=(1<<r)-1,a=[],h=0;h<t.length;++h)for(i=i<<e|t[h],s+=e;s>=r;)s-=r,a.push(i>>s&o);if(n)s>0&&a.push(i<<r-s&o);else{if(s>=e)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return a}t.exports={decodeUnsafe:function(){var t=a.apply(null,arguments);if("object"==typeof t)return t},decode:function(t){var e=a.apply(null,arguments);if("object"==typeof e)return e;throw new Error(e)},encode:function(t,r,n){if(n=n||90,t.length+7+r.length>n)throw new TypeError("Exceeds length limit");var i=o(t=t.toLowerCase());if("string"==typeof i)throw new Error(i);for(var a=t+"1",h=0;h<r.length;++h){var u=r[h];if(u>>5!=0)throw new Error("Non 5-bit word");i=s(i)^u,a+=e.charAt(u)}for(h=0;h<6;++h)i=s(i);for(i^=1,h=0;h<6;++h){a+=e.charAt(i>>5*(5-h)&31)}return a},toWordsUnsafe:function(t){var e=h(t,8,5,!0);if(Array.isArray(e))return e},toWords:function(t){var e=h(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)},fromWordsUnsafe:function(t){var e=h(t,5,8,!1);if(Array.isArray(e))return e},fromWords:function(t){var e=h(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}}},3550:function(t,e,r){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function s(t,e,r){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var o;"object"==typeof t?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(4293).Buffer}catch(t){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function h(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,n){for(var i=0,s=Math.min(t.length,r),o=e;o<s;o++){var a=t.charCodeAt(o)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}s.isBN=function(t){return t instanceof s||null!==t&&"object"==typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},s.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},s.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===r)for(i=t.length-1,s=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===r)for(i=0,s=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this.strip()},s.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s=0,o=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=h(t,e,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=h(t,e,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;this.strip()},s.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var s=t.length-r,o=s%n,a=Math.min(s,s-o)+r,h=0,c=r;c<a;c+=n)h=u(t,c,c+n,e),this.imuln(i),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==o){var l=1;for(h=u(t,c,t.length,e),c=0;c<o;c++)l*=e;this.imuln(l),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],s=0|e.words[0],o=i*s,a=67108863&o,h=o/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var c=h>>>26,l=67108863&h,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;c+=(o=(i=0|t.words[p])*(s=0|e.words[d])+l)/67108864|0,l=67108863&o}r.words[u]=0|l,h=0|c}return 0!==h?r.words[u]=0|h:r.length--,r.strip()}s.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],h=(16777215&(a<<i|s)).toString(16);r=0!==(s=a>>>24-i&16777215)||o!==this.length-1?c[6-h.length]+h+r:h+r,(i+=2)>=26&&(i-=26,o--)}for(0!==s&&(r=s.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=l[t],d=f[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:c[u-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,e){return n(void 0!==o),this.toArrayLike(o,t,e)},s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0"),this.strip();var o,a,h="le"===e,u=new t(s),c=this.clone();if(h){for(a=0;!c.isZero();a++)o=c.andln(255),c.iushrn(8),u[a]=o;for(;a<s;a++)u[a]=0}else{for(a=0;a<s-i;a++)u[a]=0;for(a=0;!c.isZero();a++)o=c.andln(255),c.iushrn(8),u[s-a-1]=o}return u},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},s.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},s.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},s.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},s.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,s=0;s<n.length;s++)e=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&e,i=e>>>26;for(;0!==i&&s<r.length;s++)e=(0|r.words[s])+i,this.words[s]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var s=0,o=0;o<n.length;o++)s=(e=(0|r.words[o])-(0|n.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<r.length;o++)s=(e=(0|r.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var n,i,s,o=t.words,a=e.words,h=r.words,u=0,c=0|o[0],l=8191&c,f=c>>>13,d=0|o[1],p=8191&d,m=d>>>13,g=0|o[2],y=8191&g,v=g>>>13,b=0|o[3],w=8191&b,_=b>>>13,E=0|o[4],S=8191&E,k=E>>>13,x=0|o[5],N=8191&x,A=x>>>13,P=0|o[6],M=8191&P,T=P>>>13,I=0|o[7],O=8191&I,B=I>>>13,R=0|o[8],C=8191&R,L=R>>>13,D=0|o[9],U=8191&D,F=D>>>13,q=0|a[0],j=8191&q,z=q>>>13,G=0|a[1],$=8191&G,V=G>>>13,H=0|a[2],W=8191&H,K=H>>>13,J=0|a[3],Z=8191&J,X=J>>>13,Y=0|a[4],Q=8191&Y,tt=Y>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],st=8191&it,ot=it>>>13,at=0|a[7],ht=8191&at,ut=at>>>13,ct=0|a[8],lt=8191&ct,ft=ct>>>13,dt=0|a[9],pt=8191&dt,mt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(u+(n=Math.imul(l,j))|0)+((8191&(i=(i=Math.imul(l,z))+Math.imul(f,j)|0))<<13)|0;u=((s=Math.imul(f,z))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(p,j),i=(i=Math.imul(p,z))+Math.imul(m,j)|0,s=Math.imul(m,z);var yt=(u+(n=n+Math.imul(l,$)|0)|0)+((8191&(i=(i=i+Math.imul(l,V)|0)+Math.imul(f,$)|0))<<13)|0;u=((s=s+Math.imul(f,V)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,j),i=(i=Math.imul(y,z))+Math.imul(v,j)|0,s=Math.imul(v,z),n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(m,$)|0,s=s+Math.imul(m,V)|0;var vt=(u+(n=n+Math.imul(l,W)|0)|0)+((8191&(i=(i=i+Math.imul(l,K)|0)+Math.imul(f,W)|0))<<13)|0;u=((s=s+Math.imul(f,K)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(w,j),i=(i=Math.imul(w,z))+Math.imul(_,j)|0,s=Math.imul(_,z),n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,V)|0)+Math.imul(v,$)|0,s=s+Math.imul(v,V)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,W)|0,s=s+Math.imul(m,K)|0;var bt=(u+(n=n+Math.imul(l,Z)|0)|0)+((8191&(i=(i=i+Math.imul(l,X)|0)+Math.imul(f,Z)|0))<<13)|0;u=((s=s+Math.imul(f,X)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(S,j),i=(i=Math.imul(S,z))+Math.imul(k,j)|0,s=Math.imul(k,z),n=n+Math.imul(w,$)|0,i=(i=i+Math.imul(w,V)|0)+Math.imul(_,$)|0,s=s+Math.imul(_,V)|0,n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,K)|0)+Math.imul(v,W)|0,s=s+Math.imul(v,K)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,Z)|0,s=s+Math.imul(m,X)|0;var wt=(u+(n=n+Math.imul(l,Q)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(f,Q)|0))<<13)|0;u=((s=s+Math.imul(f,tt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(N,j),i=(i=Math.imul(N,z))+Math.imul(A,j)|0,s=Math.imul(A,z),n=n+Math.imul(S,$)|0,i=(i=i+Math.imul(S,V)|0)+Math.imul(k,$)|0,s=s+Math.imul(k,V)|0,n=n+Math.imul(w,W)|0,i=(i=i+Math.imul(w,K)|0)+Math.imul(_,W)|0,s=s+Math.imul(_,K)|0,n=n+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,X)|0)+Math.imul(v,Z)|0,s=s+Math.imul(v,X)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,s=s+Math.imul(m,tt)|0;var _t=(u+(n=n+Math.imul(l,rt)|0)|0)+((8191&(i=(i=i+Math.imul(l,nt)|0)+Math.imul(f,rt)|0))<<13)|0;u=((s=s+Math.imul(f,nt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(M,j),i=(i=Math.imul(M,z))+Math.imul(T,j)|0,s=Math.imul(T,z),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,V)|0)+Math.imul(A,$)|0,s=s+Math.imul(A,V)|0,n=n+Math.imul(S,W)|0,i=(i=i+Math.imul(S,K)|0)+Math.imul(k,W)|0,s=s+Math.imul(k,K)|0,n=n+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,X)|0)+Math.imul(_,Z)|0,s=s+Math.imul(_,X)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(v,Q)|0,s=s+Math.imul(v,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(m,rt)|0,s=s+Math.imul(m,nt)|0;var Et=(u+(n=n+Math.imul(l,st)|0)|0)+((8191&(i=(i=i+Math.imul(l,ot)|0)+Math.imul(f,st)|0))<<13)|0;u=((s=s+Math.imul(f,ot)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(O,j),i=(i=Math.imul(O,z))+Math.imul(B,j)|0,s=Math.imul(B,z),n=n+Math.imul(M,$)|0,i=(i=i+Math.imul(M,V)|0)+Math.imul(T,$)|0,s=s+Math.imul(T,V)|0,n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,K)|0)+Math.imul(A,W)|0,s=s+Math.imul(A,K)|0,n=n+Math.imul(S,Z)|0,i=(i=i+Math.imul(S,X)|0)+Math.imul(k,Z)|0,s=s+Math.imul(k,X)|0,n=n+Math.imul(w,Q)|0,i=(i=i+Math.imul(w,tt)|0)+Math.imul(_,Q)|0,s=s+Math.imul(_,tt)|0,n=n+Math.imul(y,rt)|0,i=(i=i+Math.imul(y,nt)|0)+Math.imul(v,rt)|0,s=s+Math.imul(v,nt)|0,n=n+Math.imul(p,st)|0,i=(i=i+Math.imul(p,ot)|0)+Math.imul(m,st)|0,s=s+Math.imul(m,ot)|0;var St=(u+(n=n+Math.imul(l,ht)|0)|0)+((8191&(i=(i=i+Math.imul(l,ut)|0)+Math.imul(f,ht)|0))<<13)|0;u=((s=s+Math.imul(f,ut)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(C,j),i=(i=Math.imul(C,z))+Math.imul(L,j)|0,s=Math.imul(L,z),n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,V)|0)+Math.imul(B,$)|0,s=s+Math.imul(B,V)|0,n=n+Math.imul(M,W)|0,i=(i=i+Math.imul(M,K)|0)+Math.imul(T,W)|0,s=s+Math.imul(T,K)|0,n=n+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,X)|0)+Math.imul(A,Z)|0,s=s+Math.imul(A,X)|0,n=n+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(k,Q)|0,s=s+Math.imul(k,tt)|0,n=n+Math.imul(w,rt)|0,i=(i=i+Math.imul(w,nt)|0)+Math.imul(_,rt)|0,s=s+Math.imul(_,nt)|0,n=n+Math.imul(y,st)|0,i=(i=i+Math.imul(y,ot)|0)+Math.imul(v,st)|0,s=s+Math.imul(v,ot)|0,n=n+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(m,ht)|0,s=s+Math.imul(m,ut)|0;var kt=(u+(n=n+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,ft)|0)+Math.imul(f,lt)|0))<<13)|0;u=((s=s+Math.imul(f,ft)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(U,j),i=(i=Math.imul(U,z))+Math.imul(F,j)|0,s=Math.imul(F,z),n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,V)|0)+Math.imul(L,$)|0,s=s+Math.imul(L,V)|0,n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,K)|0)+Math.imul(B,W)|0,s=s+Math.imul(B,K)|0,n=n+Math.imul(M,Z)|0,i=(i=i+Math.imul(M,X)|0)+Math.imul(T,Z)|0,s=s+Math.imul(T,X)|0,n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(A,Q)|0,s=s+Math.imul(A,tt)|0,n=n+Math.imul(S,rt)|0,i=(i=i+Math.imul(S,nt)|0)+Math.imul(k,rt)|0,s=s+Math.imul(k,nt)|0,n=n+Math.imul(w,st)|0,i=(i=i+Math.imul(w,ot)|0)+Math.imul(_,st)|0,s=s+Math.imul(_,ot)|0,n=n+Math.imul(y,ht)|0,i=(i=i+Math.imul(y,ut)|0)+Math.imul(v,ht)|0,s=s+Math.imul(v,ut)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,lt)|0,s=s+Math.imul(m,ft)|0;var xt=(u+(n=n+Math.imul(l,pt)|0)|0)+((8191&(i=(i=i+Math.imul(l,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((s=s+Math.imul(f,mt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(U,$),i=(i=Math.imul(U,V))+Math.imul(F,$)|0,s=Math.imul(F,V),n=n+Math.imul(C,W)|0,i=(i=i+Math.imul(C,K)|0)+Math.imul(L,W)|0,s=s+Math.imul(L,K)|0,n=n+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,X)|0)+Math.imul(B,Z)|0,s=s+Math.imul(B,X)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,tt)|0)+Math.imul(T,Q)|0,s=s+Math.imul(T,tt)|0,n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(A,rt)|0,s=s+Math.imul(A,nt)|0,n=n+Math.imul(S,st)|0,i=(i=i+Math.imul(S,ot)|0)+Math.imul(k,st)|0,s=s+Math.imul(k,ot)|0,n=n+Math.imul(w,ht)|0,i=(i=i+Math.imul(w,ut)|0)+Math.imul(_,ht)|0,s=s+Math.imul(_,ut)|0,n=n+Math.imul(y,lt)|0,i=(i=i+Math.imul(y,ft)|0)+Math.imul(v,lt)|0,s=s+Math.imul(v,ft)|0;var Nt=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((s=s+Math.imul(m,mt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,K))+Math.imul(F,W)|0,s=Math.imul(F,K),n=n+Math.imul(C,Z)|0,i=(i=i+Math.imul(C,X)|0)+Math.imul(L,Z)|0,s=s+Math.imul(L,X)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(B,Q)|0,s=s+Math.imul(B,tt)|0,n=n+Math.imul(M,rt)|0,i=(i=i+Math.imul(M,nt)|0)+Math.imul(T,rt)|0,s=s+Math.imul(T,nt)|0,n=n+Math.imul(N,st)|0,i=(i=i+Math.imul(N,ot)|0)+Math.imul(A,st)|0,s=s+Math.imul(A,ot)|0,n=n+Math.imul(S,ht)|0,i=(i=i+Math.imul(S,ut)|0)+Math.imul(k,ht)|0,s=s+Math.imul(k,ut)|0,n=n+Math.imul(w,lt)|0,i=(i=i+Math.imul(w,ft)|0)+Math.imul(_,lt)|0,s=s+Math.imul(_,ft)|0;var At=(u+(n=n+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,mt)|0)+Math.imul(v,pt)|0))<<13)|0;u=((s=s+Math.imul(v,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(U,Z),i=(i=Math.imul(U,X))+Math.imul(F,Z)|0,s=Math.imul(F,X),n=n+Math.imul(C,Q)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(L,Q)|0,s=s+Math.imul(L,tt)|0,n=n+Math.imul(O,rt)|0,i=(i=i+Math.imul(O,nt)|0)+Math.imul(B,rt)|0,s=s+Math.imul(B,nt)|0,n=n+Math.imul(M,st)|0,i=(i=i+Math.imul(M,ot)|0)+Math.imul(T,st)|0,s=s+Math.imul(T,ot)|0,n=n+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ut)|0)+Math.imul(A,ht)|0,s=s+Math.imul(A,ut)|0,n=n+Math.imul(S,lt)|0,i=(i=i+Math.imul(S,ft)|0)+Math.imul(k,lt)|0,s=s+Math.imul(k,ft)|0;var Pt=(u+(n=n+Math.imul(w,pt)|0)|0)+((8191&(i=(i=i+Math.imul(w,mt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((s=s+Math.imul(_,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(U,Q),i=(i=Math.imul(U,tt))+Math.imul(F,Q)|0,s=Math.imul(F,tt),n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(L,rt)|0,s=s+Math.imul(L,nt)|0,n=n+Math.imul(O,st)|0,i=(i=i+Math.imul(O,ot)|0)+Math.imul(B,st)|0,s=s+Math.imul(B,ot)|0,n=n+Math.imul(M,ht)|0,i=(i=i+Math.imul(M,ut)|0)+Math.imul(T,ht)|0,s=s+Math.imul(T,ut)|0,n=n+Math.imul(N,lt)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(A,lt)|0,s=s+Math.imul(A,ft)|0;var Mt=(u+(n=n+Math.imul(S,pt)|0)|0)+((8191&(i=(i=i+Math.imul(S,mt)|0)+Math.imul(k,pt)|0))<<13)|0;u=((s=s+Math.imul(k,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,rt),i=(i=Math.imul(U,nt))+Math.imul(F,rt)|0,s=Math.imul(F,nt),n=n+Math.imul(C,st)|0,i=(i=i+Math.imul(C,ot)|0)+Math.imul(L,st)|0,s=s+Math.imul(L,ot)|0,n=n+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ut)|0)+Math.imul(B,ht)|0,s=s+Math.imul(B,ut)|0,n=n+Math.imul(M,lt)|0,i=(i=i+Math.imul(M,ft)|0)+Math.imul(T,lt)|0,s=s+Math.imul(T,ft)|0;var Tt=(u+(n=n+Math.imul(N,pt)|0)|0)+((8191&(i=(i=i+Math.imul(N,mt)|0)+Math.imul(A,pt)|0))<<13)|0;u=((s=s+Math.imul(A,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(U,st),i=(i=Math.imul(U,ot))+Math.imul(F,st)|0,s=Math.imul(F,ot),n=n+Math.imul(C,ht)|0,i=(i=i+Math.imul(C,ut)|0)+Math.imul(L,ht)|0,s=s+Math.imul(L,ut)|0,n=n+Math.imul(O,lt)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(B,lt)|0,s=s+Math.imul(B,ft)|0;var It=(u+(n=n+Math.imul(M,pt)|0)|0)+((8191&(i=(i=i+Math.imul(M,mt)|0)+Math.imul(T,pt)|0))<<13)|0;u=((s=s+Math.imul(T,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(U,ht),i=(i=Math.imul(U,ut))+Math.imul(F,ht)|0,s=Math.imul(F,ut),n=n+Math.imul(C,lt)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(L,lt)|0,s=s+Math.imul(L,ft)|0;var Ot=(u+(n=n+Math.imul(O,pt)|0)|0)+((8191&(i=(i=i+Math.imul(O,mt)|0)+Math.imul(B,pt)|0))<<13)|0;u=((s=s+Math.imul(B,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(U,lt),i=(i=Math.imul(U,ft))+Math.imul(F,lt)|0,s=Math.imul(F,ft);var Bt=(u+(n=n+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(L,pt)|0))<<13)|0;u=((s=s+Math.imul(L,mt)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863;var Rt=(u+(n=Math.imul(U,pt))|0)+((8191&(i=(i=Math.imul(U,mt))+Math.imul(F,pt)|0))<<13)|0;return u=((s=Math.imul(F,mt))+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,h[0]=gt,h[1]=yt,h[2]=vt,h[3]=bt,h[4]=wt,h[5]=_t,h[6]=Et,h[7]=St,h[8]=kt,h[9]=xt,h[10]=Nt,h[11]=At,h[12]=Pt,h[13]=Mt,h[14]=Tt,h[15]=It,h[16]=Ot,h[17]=Bt,h[18]=Rt,0!==u&&(h[19]=u,r.length++),r};function m(t,e,r){return(new g).mulp(t,e,r)}function g(t,e){this.x=t,this.y=e}Math.imul||(p=d),s.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):r<63?d(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,s=0;s<r.length-1;s++){var o=i;i=0;for(var a=67108863&n,h=Math.min(s,e.length-1),u=Math.max(0,s-t.length+1);u<=h;u++){var c=s-u,l=(0|t.words[c])*(0|e.words[u]),f=67108863&l;a=67108863&(f=f+a|0),i+=(o=(o=o+(l/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}r.words[s]=a,n=o,o=i}return 0!==n?r.words[s]=n:r.length--,r.strip()}(this,t,e):m(this,t,e)},g.prototype.makeRBT=function(t){for(var e=new Array(t),r=s.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},g.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},g.prototype.permute=function(t,e,r,n,i,s){for(var o=0;o<s;o++)n[o]=e[t[o]],i[o]=r[t[o]]},g.prototype.transform=function(t,e,r,n,i,s){this.permute(s,t,e,r,n,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),c=0;c<i;c+=a)for(var l=h,f=u,d=0;d<o;d++){var p=r[c+d],m=n[c+d],g=r[c+d+o],y=n[c+d+o],v=l*g-f*y;y=l*y+f*g,g=v,r[c+d]=p+g,n[c+d]=m+y,r[c+d+o]=p-g,n[c+d+o]=m-y,d!==a&&(v=h*l-u*f,f=h*f+u*l,l=v)}},g.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},g.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},g.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},g.prototype.convert13b=function(t,e,r,i){for(var s=0,o=0;o<e;o++)s+=0|t[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*e;o<i;++o)r[o]=0;n(0===s),n(0==(-8192&s))},g.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},g.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),s=this.stub(n),o=new Array(n),a=new Array(n),h=new Array(n),u=new Array(n),c=new Array(n),l=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,o,n),this.convert13b(e.words,e.length,u,n),this.transform(o,s,a,h,n,i),this.transform(u,s,c,l,n,i);for(var d=0;d<n;d++){var p=a[d]*c[d]-h[d]*l[d];h[d]=a[d]*l[d]+h[d]*c[d],a[d]=p}return this.conjugate(a,h,n),this.transform(a,h,f,s,n,i),this.conjugate(f,s,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),m(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,s=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=s>>>26,this.words[r]=67108863&s}return 0!==e&&(this.words[r]=e,this.length++),this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new s(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&s,h=(0|this.words[e])-a<<r;this.words[e]=h|o,o=a>>>26-r}o&&(this.words[e]=o,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},s.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},s.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,h=r;if(i-=o,i=Math.max(0,i),h){for(var u=0;u<o;u++)h.words[u]=this.words[u];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var l=0|this.words[u];this.words[u]=c<<26-s|l>>>s,c=l&a}return h&&0!==c&&(h.words[h.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},s.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,r){var i,s,o=t.length+r;this._expand(o);var a=0;for(i=0;i<t.length;i++){s=(0|this.words[i+r])+a;var h=(0|t.words[i])*e;a=((s-=67108863&h)>>26)-(h/67108864|0),this.words[i+r]=67108863&s}for(;i<this.length-r;i++)a=(s=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&s;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(s=-(0|this.words[i])+a)>>26,this.words[i]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,o=0|i.words[i.length-1];0!==(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var a,h=n.length-i.length;if("mod"!==e){(a=new s(null)).length=h+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var c=n.clone()._ishlnsubmul(i,1,h);0===c.negative&&(n=c,a&&(a.words[h]=1));for(var l=h-1;l>=0;l--){var f=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(f=Math.min(f/o|0,67108863),n._ishlnsubmul(i,f,l);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=f)}return a&&a.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},s.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(t)),{div:i,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,o,a},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},s.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new s(1),o=new s(0),a=new s(0),h=new s(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var c=r.clone(),l=e.clone();!e.isZero();){for(var f=0,d=1;0==(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(c),o.isub(l)),i.iushrn(1),o.iushrn(1);for(var p=0,m=1;0==(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(c),h.isub(l)),a.iushrn(1),h.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),o.isub(h)):(r.isub(e),a.isub(i),h.isub(o))}return{a,b:h,gcd:r.iushln(u)}},s.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,o=new s(1),a=new s(0),h=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,c=1;0==(e.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(e.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var l=0,f=1;0==(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(r.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),o.isub(a)):(r.isub(e),a.isub(o))}return(i=0===e.cmpn(1)?o:a).cmpn(0)<0&&i.iadd(t),i},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var s=e;e=r,r=s}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var s=i,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new S(t)},s.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function k(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(b,v),b.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&r,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,t.words[i-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(w,v),i(_,v),i(E,v),E.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new b;else if("p224"===t)e=new w;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new E}return y[t]=e,e},S.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new s(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);n(!i.isZero());var a=new s(1).toRed(this),h=a.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new s(2*c*c).toRed(this);0!==this.pow(c,u).cmp(h);)c.redIAdd(h);for(var l=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=o;0!==d.cmp(a);){for(var m=d,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(l,new s(1).iushln(p-g-1));f=f.redMul(y),l=y.redSqr(),d=d.redMul(l),p=g}return f},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],c=h-1;c>=0;c--){var l=u>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==o?(o<<=1,o|=l,(4===++a||0===n&&0===c)&&(i=this.mul(i,r[o]),a=0,o=0)):a=0}h=26}return i},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new k(t)},i(k,S),k.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},k.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},k.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},k.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},k.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=r.nmd(t),this)},9376:t=>{"use strict";t.exports={mask:(t,e,r,n,i)=>{for(var s=0;s<i;s++)r[n+s]=t[s]^e[3&s]},unmask:(t,e)=>{const r=t.length;for(var n=0;n<r;n++)t[n]^=e[3&n]}}},1891:(t,e,r)=>{"use strict";try{t.exports=r(9516)(__dirname)}catch(e){t.exports=r(9376)}},3715:(t,e,r)=>{var n=e;n.utils=r(6436),n.common=r(5772),n.sha=r(9041),n.ripemd=r(2949),n.hmac=r(2344),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},5772:(t,e,r)=>{"use strict";var n=r(6436),i=r(9746);function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=s,s.prototype.update=function(t,e){if(t=n.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var r=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-r,t.length),0===this.pending.length&&(this.pending=null),t=n.join32(t,0,t.length-r,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},s.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},s.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=255&t}else for(n[i++]=255&t,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,s=8;s<this.padLength;s++)n[i++]=0;return n}},2344:(t,e,r)=>{"use strict";var n=r(6436),i=r(9746);function s(t,e,r){if(!(this instanceof s))return new s(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(e,r))}t.exports=s,s.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},s.prototype.update=function(t,e){return this.inner.update(t,e),this},s.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},2949:(t,e,r)=>{"use strict";var n=r(6436),i=r(5772),s=n.rotl32,o=n.sum32,a=n.sum32_3,h=n.sum32_4,u=i.BlockHash;function c(){if(!(this instanceof c))return new c;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function l(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function f(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function d(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}n.inherits(c,u),e.ripemd160=c,c.blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function(t,e){for(var r=this.h[0],n=this.h[1],i=this.h[2],u=this.h[3],c=this.h[4],v=r,b=n,w=i,_=u,E=c,S=0;S<80;S++){var k=o(s(h(r,l(S,n,i,u),t[p[S]+e],f(S)),g[S]),c);r=c,c=u,u=s(i,10),i=n,n=k,k=o(s(h(v,l(79-S,b,w,_),t[m[S]+e],d(S)),y[S]),E),v=E,E=_,_=s(w,10),w=b,b=k}k=a(this.h[1],i,_),this.h[1]=a(this.h[2],u,E),this.h[2]=a(this.h[3],c,v),this.h[3]=a(this.h[4],r,b),this.h[4]=a(this.h[0],n,w),this.h[0]=k},c.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},9041:(t,e,r)=>{"use strict";e.sha1=r(4761),e.sha224=r(799),e.sha256=r(9344),e.sha384=r(772),e.sha512=r(5900)},4761:(t,e,r)=>{"use strict";var n=r(6436),i=r(5772),s=r(7038),o=n.rotl32,a=n.sum32,h=n.sum32_5,u=s.ft_1,c=i.BlockHash,l=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(f,c),t.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=o(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],s=this.h[1],c=this.h[2],f=this.h[3],d=this.h[4];for(n=0;n<r.length;n++){var p=~~(n/20),m=h(o(i,5),u(p,s,c,f),d,r[n],l[p]);d=f,f=c,c=o(s,30),s=i,i=m}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],c),this.h[3]=a(this.h[3],f),this.h[4]=a(this.h[4],d)},f.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},799:(t,e,r)=>{"use strict";var n=r(6436),i=r(9344);function s(){if(!(this instanceof s))return new s;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(s,i),t.exports=s,s.blockSize=512,s.outSize=224,s.hmacStrength=192,s.padLength=64,s.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},9344:(t,e,r)=>{"use strict";var n=r(6436),i=r(5772),s=r(7038),o=r(9746),a=n.sum32,h=n.sum32_4,u=n.sum32_5,c=s.ch32,l=s.maj32,f=s.s0_256,d=s.s1_256,p=s.g0_256,m=s.g1_256,g=i.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}n.inherits(v,g),t.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=h(m(r[n-2]),r[n-7],p(r[n-15]),r[n-16]);var i=this.h[0],s=this.h[1],g=this.h[2],y=this.h[3],v=this.h[4],b=this.h[5],w=this.h[6],_=this.h[7];for(o(this.k.length===r.length),n=0;n<r.length;n++){var E=u(_,d(v),c(v,b,w),this.k[n],r[n]),S=a(f(i),l(i,s,g));_=w,w=b,b=v,v=a(y,E),y=g,g=s,s=i,i=a(E,S)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],g),this.h[3]=a(this.h[3],y),this.h[4]=a(this.h[4],v),this.h[5]=a(this.h[5],b),this.h[6]=a(this.h[6],w),this.h[7]=a(this.h[7],_)},v.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},772:(t,e,r)=>{"use strict";var n=r(6436),i=r(5900);function s(){if(!(this instanceof s))return new s;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(s,i),t.exports=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},5900:(t,e,r)=>{"use strict";var n=r(6436),i=r(5772),s=r(9746),o=n.rotr64_hi,a=n.rotr64_lo,h=n.shr64_hi,u=n.shr64_lo,c=n.sum64,l=n.sum64_hi,f=n.sum64_lo,d=n.sum64_4_hi,p=n.sum64_4_lo,m=n.sum64_5_hi,g=n.sum64_5_lo,y=i.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}function w(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function _(t,e,r,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function E(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function S(t,e,r,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function k(t,e){var r=o(t,e,28)^o(e,t,2)^o(e,t,7);return r<0&&(r+=4294967296),r}function x(t,e){var r=a(t,e,28)^a(e,t,2)^a(e,t,7);return r<0&&(r+=4294967296),r}function N(t,e){var r=o(t,e,14)^o(t,e,18)^o(e,t,9);return r<0&&(r+=4294967296),r}function A(t,e){var r=a(t,e,14)^a(t,e,18)^a(e,t,9);return r<0&&(r+=4294967296),r}function P(t,e){var r=o(t,e,1)^o(t,e,8)^h(t,e,7);return r<0&&(r+=4294967296),r}function M(t,e){var r=a(t,e,1)^a(t,e,8)^u(t,e,7);return r<0&&(r+=4294967296),r}function T(t,e){var r=o(t,e,19)^o(e,t,29)^h(t,e,6);return r<0&&(r+=4294967296),r}function I(t,e){var r=a(t,e,19)^a(e,t,29)^u(t,e,6);return r<0&&(r+=4294967296),r}n.inherits(b,y),t.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=T(r[n-4],r[n-3]),s=I(r[n-4],r[n-3]),o=r[n-14],a=r[n-13],h=P(r[n-30],r[n-29]),u=M(r[n-30],r[n-29]),c=r[n-32],l=r[n-31];r[n]=d(i,s,o,a,h,u,c,l),r[n+1]=p(i,s,o,a,h,u,c,l)}},b.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,n=this.h[0],i=this.h[1],o=this.h[2],a=this.h[3],h=this.h[4],u=this.h[5],d=this.h[6],p=this.h[7],y=this.h[8],v=this.h[9],b=this.h[10],P=this.h[11],M=this.h[12],T=this.h[13],I=this.h[14],O=this.h[15];s(this.k.length===r.length);for(var B=0;B<r.length;B+=2){var R=I,C=O,L=N(y,v),D=A(y,v),U=w(y,v,b,P,M),F=_(y,v,b,P,M,T),q=this.k[B],j=this.k[B+1],z=r[B],G=r[B+1],$=m(R,C,L,D,U,F,q,j,z,G),V=g(R,C,L,D,U,F,q,j,z,G);R=k(n,i),C=x(n,i),L=E(n,i,o,a,h),D=S(n,i,o,a,h,u);var H=l(R,C,L,D),W=f(R,C,L,D);I=M,O=T,M=b,T=P,b=y,P=v,y=l(d,p,$,V),v=f(p,p,$,V),d=h,p=u,h=o,u=a,o=n,a=i,n=l($,V,H,W),i=f($,V,H,W)}c(this.h,0,n,i),c(this.h,2,o,a),c(this.h,4,h,u),c(this.h,6,d,p),c(this.h,8,y,v),c(this.h,10,b,P),c(this.h,12,M,T),c(this.h,14,I,O)},b.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},7038:(t,e,r)=>{"use strict";var n=r(6436).rotr32;function i(t,e,r){return t&e^~t&r}function s(t,e,r){return t&e^t&r^e&r}function o(t,e,r){return t^e^r}e.ft_1=function(t,e,r,n){return 0===t?i(e,r,n):1===t||3===t?o(e,r,n):2===t?s(e,r,n):void 0},e.ch32=i,e.maj32=s,e.p32=o,e.s0_256=function(t){return n(t,2)^n(t,13)^n(t,22)},e.s1_256=function(t){return n(t,6)^n(t,11)^n(t,25)},e.g0_256=function(t){return n(t,7)^n(t,18)^t>>>3},e.g1_256=function(t){return n(t,17)^n(t,19)^t>>>10}},6436:(t,e,r)=>{"use strict";var n=r(9746),i=r(4378);function s(t,e){return 55296==(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1)))}function o(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function a(t){return 1===t.length?"0"+t:t}function h(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=i,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=63&o|128):s(t,i)?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++i)),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=63&o|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=63&o|128)}else for(i=0;i<t.length;i++)r[i]=0|t[i];return r},e.toHex=function(t){for(var e="",r=0;r<t.length;r++)e+=a(t[r].toString(16));return e},e.htonl=o,e.toHex32=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];"little"===e&&(i=o(i)),r+=h(i.toString(16))}return r},e.zero2=a,e.zero8=h,e.join32=function(t,e,r,i){var s=r-e;n(s%4==0);for(var o=new Array(s/4),a=0,h=e;a<o.length;a++,h+=4){var u;u="big"===i?t[h]<<24|t[h+1]<<16|t[h+2]<<8|t[h+3]:t[h+3]<<24|t[h+2]<<16|t[h+1]<<8|t[h],o[a]=u>>>0}return o},e.split32=function(t,e){for(var r=new Array(4*t.length),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];"big"===e?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=255&s):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=255&s)}return r},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,r){return t+e+r>>>0},e.sum32_4=function(t,e,r,n){return t+e+r+n>>>0},e.sum32_5=function(t,e,r,n,i){return t+e+r+n+i>>>0},e.sum64=function(t,e,r,n){var i=t[e],s=n+t[e+1]>>>0,o=(s<n?1:0)+r+i;t[e]=o>>>0,t[e+1]=s},e.sum64_hi=function(t,e,r,n){return(e+n>>>0<e?1:0)+t+r>>>0},e.sum64_lo=function(t,e,r,n){return e+n>>>0},e.sum64_4_hi=function(t,e,r,n,i,s,o,a){var h=0,u=e;return h+=(u=u+n>>>0)<e?1:0,h+=(u=u+s>>>0)<s?1:0,t+r+i+o+(h+=(u=u+a>>>0)<a?1:0)>>>0},e.sum64_4_lo=function(t,e,r,n,i,s,o,a){return e+n+s+a>>>0},e.sum64_5_hi=function(t,e,r,n,i,s,o,a,h,u){var c=0,l=e;return c+=(l=l+n>>>0)<e?1:0,c+=(l=l+s>>>0)<s?1:0,c+=(l=l+a>>>0)<a?1:0,t+r+i+o+h+(c+=(l=l+u>>>0)<u?1:0)>>>0},e.sum64_5_lo=function(t,e,r,n,i,s,o,a,h,u){return e+n+s+a+u>>>0},e.rotr64_hi=function(t,e,r){return(e<<32-r|t>>>r)>>>0},e.rotr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0},e.shr64_hi=function(t,e,r){return t>>>r},e.shr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0}},4378:(t,e,r)=>{try{var n=r(1669);if("function"!=typeof n.inherits)throw"";t.exports=n.inherits}catch(e){t.exports=r(5717)}},5717:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},1094:t=>{!function(){"use strict";var e="object"==typeof window?window:{};!e.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node&&(e=global);for(var r=!e.JS_SHA3_NO_COMMON_JS&&t.exports,n="0123456789abcdef".split(""),i=[0,8,16,24],s=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],o=[224,256,384,512],a=["hex","buffer","arrayBuffer","array"],h=function(t,e,r){return function(n){return new b(t,e,t).update(n)[r]()}},u=function(t,e,r){return function(n,i){return new b(t,e,i).update(n)[r]()}},c=function(t,e){var r=h(t,e,"hex");r.create=function(){return new b(t,e,t)},r.update=function(t){return r.create().update(t)};for(var n=0;n<a.length;++n){var i=a[n];r[i]=h(t,e,i)}return r},l=[{name:"keccak",padding:[1,256,65536,16777216],bits:o,createMethod:c},{name:"sha3",padding:[6,1536,393216,100663296],bits:o,createMethod:c},{name:"shake",padding:[31,7936,2031616,520093696],bits:[128,256],createMethod:function(t,e){var r=u(t,e,"hex");r.create=function(r){return new b(t,e,r)},r.update=function(t,e){return r.create(e).update(t)};for(var n=0;n<a.length;++n){var i=a[n];r[i]=u(t,e,i)}return r}}],f={},d=[],p=0;p<l.length;++p)for(var m=l[p],g=m.bits,y=0;y<g.length;++y){var v=m.name+"_"+g[y];d.push(v),f[v]=m.createMethod(g[y],m.padding)}function b(t,e,r){this.blocks=[],this.s=[],this.padding=e,this.outputBits=r,this.reset=!0,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}b.prototype.update=function(t){var e="string"!=typeof t;e&&t.constructor===ArrayBuffer&&(t=new Uint8Array(t));for(var r,n,s=t.length,o=this.blocks,a=this.byteCount,h=this.blockCount,u=0,c=this.s;u<s;){if(this.reset)for(this.reset=!1,o[0]=this.block,r=1;r<h+1;++r)o[r]=0;if(e)for(r=this.start;u<s&&r<a;++u)o[r>>2]|=t[u]<<i[3&r++];else for(r=this.start;u<s&&r<a;++u)(n=t.charCodeAt(u))<128?o[r>>2]|=n<<i[3&r++]:n<2048?(o[r>>2]|=(192|n>>6)<<i[3&r++],o[r>>2]|=(128|63&n)<<i[3&r++]):n<55296||n>=57344?(o[r>>2]|=(224|n>>12)<<i[3&r++],o[r>>2]|=(128|n>>6&63)<<i[3&r++],o[r>>2]|=(128|63&n)<<i[3&r++]):(n=65536+((1023&n)<<10|1023&t.charCodeAt(++u)),o[r>>2]|=(240|n>>18)<<i[3&r++],o[r>>2]|=(128|n>>12&63)<<i[3&r++],o[r>>2]|=(128|n>>6&63)<<i[3&r++],o[r>>2]|=(128|63&n)<<i[3&r++]);if(this.lastByteIndex=r,r>=a){for(this.start=r-a,this.block=o[h],r=0;r<h;++r)c[r]^=o[r];w(c),this.reset=!0}else this.start=r}return this},b.prototype.finalize=function(){var t=this.blocks,e=this.lastByteIndex,r=this.blockCount,n=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[r],e=1;e<r+1;++e)t[e]=0;for(t[r-1]|=2147483648,e=0;e<r;++e)n[e]^=t[e];w(n)},b.prototype.toString=b.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,r=this.s,i=this.outputBlocks,s=this.extraBytes,o=0,a=0,h="";a<i;){for(o=0;o<e&&a<i;++o,++a)t=r[o],h+=n[t>>4&15]+n[15&t]+n[t>>12&15]+n[t>>8&15]+n[t>>20&15]+n[t>>16&15]+n[t>>28&15]+n[t>>24&15];a%e==0&&(w(r),o=0)}return s&&(t=r[o],s>0&&(h+=n[t>>4&15]+n[15&t]),s>1&&(h+=n[t>>12&15]+n[t>>8&15]),s>2&&(h+=n[t>>20&15]+n[t>>16&15])),h},b.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,s=0,o=0,a=this.outputBits>>3;t=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var h=new Uint32Array(t);o<n;){for(s=0;s<e&&o<n;++s,++o)h[o]=r[s];o%e==0&&w(r)}return i&&(h[s]=r[s],t=t.slice(0,a)),t},b.prototype.buffer=b.prototype.arrayBuffer,b.prototype.digest=b.prototype.array=function(){this.finalize();for(var t,e,r=this.blockCount,n=this.s,i=this.outputBlocks,s=this.extraBytes,o=0,a=0,h=[];a<i;){for(o=0;o<r&&a<i;++o,++a)t=a<<2,e=n[o],h[t]=255&e,h[t+1]=e>>8&255,h[t+2]=e>>16&255,h[t+3]=e>>24&255;a%r==0&&w(n)}return s&&(t=a<<2,e=n[o],s>0&&(h[t]=255&e),s>1&&(h[t+1]=e>>8&255),s>2&&(h[t+2]=e>>16&255)),h};var w=function(t){var e,r,n,i,o,a,h,u,c,l,f,d,p,m,g,y,v,b,w,_,E,S,k,x,N,A,P,M,T,I,O,B,R,C,L,D,U,F,q,j,z,G,$,V,H,W,K,J,Z,X,Y,Q,tt,et,rt,nt,it,st,ot,at,ht,ut,ct;for(n=0;n<48;n+=2)i=t[0]^t[10]^t[20]^t[30]^t[40],o=t[1]^t[11]^t[21]^t[31]^t[41],a=t[2]^t[12]^t[22]^t[32]^t[42],h=t[3]^t[13]^t[23]^t[33]^t[43],u=t[4]^t[14]^t[24]^t[34]^t[44],c=t[5]^t[15]^t[25]^t[35]^t[45],l=t[6]^t[16]^t[26]^t[36]^t[46],f=t[7]^t[17]^t[27]^t[37]^t[47],e=(d=t[8]^t[18]^t[28]^t[38]^t[48])^(a<<1|h>>>31),r=(p=t[9]^t[19]^t[29]^t[39]^t[49])^(h<<1|a>>>31),t[0]^=e,t[1]^=r,t[10]^=e,t[11]^=r,t[20]^=e,t[21]^=r,t[30]^=e,t[31]^=r,t[40]^=e,t[41]^=r,e=i^(u<<1|c>>>31),r=o^(c<<1|u>>>31),t[2]^=e,t[3]^=r,t[12]^=e,t[13]^=r,t[22]^=e,t[23]^=r,t[32]^=e,t[33]^=r,t[42]^=e,t[43]^=r,e=a^(l<<1|f>>>31),r=h^(f<<1|l>>>31),t[4]^=e,t[5]^=r,t[14]^=e,t[15]^=r,t[24]^=e,t[25]^=r,t[34]^=e,t[35]^=r,t[44]^=e,t[45]^=r,e=u^(d<<1|p>>>31),r=c^(p<<1|d>>>31),t[6]^=e,t[7]^=r,t[16]^=e,t[17]^=r,t[26]^=e,t[27]^=r,t[36]^=e,t[37]^=r,t[46]^=e,t[47]^=r,e=l^(i<<1|o>>>31),r=f^(o<<1|i>>>31),t[8]^=e,t[9]^=r,t[18]^=e,t[19]^=r,t[28]^=e,t[29]^=r,t[38]^=e,t[39]^=r,t[48]^=e,t[49]^=r,m=t[0],g=t[1],W=t[11]<<4|t[10]>>>28,K=t[10]<<4|t[11]>>>28,M=t[20]<<3|t[21]>>>29,T=t[21]<<3|t[20]>>>29,at=t[31]<<9|t[30]>>>23,ht=t[30]<<9|t[31]>>>23,G=t[40]<<18|t[41]>>>14,$=t[41]<<18|t[40]>>>14,C=t[2]<<1|t[3]>>>31,L=t[3]<<1|t[2]>>>31,y=t[13]<<12|t[12]>>>20,v=t[12]<<12|t[13]>>>20,J=t[22]<<10|t[23]>>>22,Z=t[23]<<10|t[22]>>>22,I=t[33]<<13|t[32]>>>19,O=t[32]<<13|t[33]>>>19,ut=t[42]<<2|t[43]>>>30,ct=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,rt=t[4]<<30|t[5]>>>2,D=t[14]<<6|t[15]>>>26,U=t[15]<<6|t[14]>>>26,b=t[25]<<11|t[24]>>>21,w=t[24]<<11|t[25]>>>21,X=t[34]<<15|t[35]>>>17,Y=t[35]<<15|t[34]>>>17,B=t[45]<<29|t[44]>>>3,R=t[44]<<29|t[45]>>>3,x=t[6]<<28|t[7]>>>4,N=t[7]<<28|t[6]>>>4,nt=t[17]<<23|t[16]>>>9,it=t[16]<<23|t[17]>>>9,F=t[26]<<25|t[27]>>>7,q=t[27]<<25|t[26]>>>7,_=t[36]<<21|t[37]>>>11,E=t[37]<<21|t[36]>>>11,Q=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,V=t[8]<<27|t[9]>>>5,H=t[9]<<27|t[8]>>>5,A=t[18]<<20|t[19]>>>12,P=t[19]<<20|t[18]>>>12,st=t[29]<<7|t[28]>>>25,ot=t[28]<<7|t[29]>>>25,j=t[38]<<8|t[39]>>>24,z=t[39]<<8|t[38]>>>24,S=t[48]<<14|t[49]>>>18,k=t[49]<<14|t[48]>>>18,t[0]=m^~y&b,t[1]=g^~v&w,t[10]=x^~A&M,t[11]=N^~P&T,t[20]=C^~D&F,t[21]=L^~U&q,t[30]=V^~W&J,t[31]=H^~K&Z,t[40]=et^~nt&st,t[41]=rt^~it&ot,t[2]=y^~b&_,t[3]=v^~w&E,t[12]=A^~M&I,t[13]=P^~T&O,t[22]=D^~F&j,t[23]=U^~q&z,t[32]=W^~J&X,t[33]=K^~Z&Y,t[42]=nt^~st&at,t[43]=it^~ot&ht,t[4]=b^~_&S,t[5]=w^~E&k,t[14]=M^~I&B,t[15]=T^~O&R,t[24]=F^~j&G,t[25]=q^~z&$,t[34]=J^~X&Q,t[35]=Z^~Y&tt,t[44]=st^~at&ut,t[45]=ot^~ht&ct,t[6]=_^~S&m,t[7]=E^~k&g,t[16]=I^~B&x,t[17]=O^~R&N,t[26]=j^~G&C,t[27]=z^~$&L,t[36]=X^~Q&V,t[37]=Y^~tt&H,t[46]=at^~ut&et,t[47]=ht^~ct&rt,t[8]=S^~m&y,t[9]=k^~g&v,t[18]=B^~x&A,t[19]=R^~N&P,t[28]=G^~C&D,t[29]=$^~L&U,t[38]=Q^~V&W,t[39]=tt^~H&K,t[48]=ut^~et&nt,t[49]=ct^~rt&it,t[0]^=s[n],t[1]^=s[n+1]};if(r)t.exports=f;else for(p=0;p<d.length;++p)e[d[p]]=f[d[p]]}()},9746:t=>{function e(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=e,e.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)}},9516:(t,e,r)=>{var n=r(5747),i=r(5622),s=r(2087),o=require,a=process.config&&process.config.variables||{},h=!!{NODE_ENV:"production"}.PREBUILDS_ONLY,u=process.versions.modules,c=!(!process.versions||!process.versions.electron)||!!{NODE_ENV:"production"}.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":"node",l=s.arch(),f=s.platform(),d={NODE_ENV:"production"}.LIBC||(function(t){return"linux"===t&&n.existsSync("/etc/alpine-release")}(f)?"musl":"glibc"),p={NODE_ENV:"production"}.ARM_VERSION||("arm64"===l?"8":a.arm_version)||"",m=(process.versions.uv||"").split(".")[0];function g(t){return o(g.path(t))}function y(t){try{return n.readdirSync(t)}catch(t){return[]}}function v(t,e){var r=y(t).filter(e);return r[0]&&i.join(t,r[0])}function b(t){return/\.node$/.test(t)}function w(t){var e=t.split("."),r={file:t,specificity:0};if("node"===e.pop()){for(var n=0;n<e.length;n++){var i=e[n];if("node"===i||"electron"===i||"node-webkit"===i)r.runtime=i;else if("napi"===i)r.napi=!0;else if("abi"===i.slice(0,3))r.abi=i.slice(3);else if("uv"===i.slice(0,2))r.uv=i.slice(2);else if("armv"===i.slice(0,4))r.armv=i.slice(4);else{if("glibc"!==i&&"musl"!==i)continue;r.libc=i}r.specificity++}return r}}function _(t,e){return function(r){return null!=r&&(!(r.runtime!==t&&!function(t){return"node"===t.runtime&&t.napi}(r))&&(!(r.abi!==e&&!r.napi)&&((!r.uv||r.uv===m)&&((!r.armv||r.armv===p)&&(!r.libc||r.libc===d)))))}}function E(t){return function(e,r){return e.runtime!==r.runtime?e.runtime===t?-1:1:e.abi!==r.abi?e.abi?-1:1:e.specificity!==r.specificity?e.specificity>r.specificity?-1:1:0}}t.exports=g,g.path=function(t){t=i.resolve(t||".");try{var e=o(i.join(t,"package.json")).name.toUpperCase().replace(/-/g,"_");({NODE_ENV:"production"})[e+"_PREBUILD"]&&(t={NODE_ENV:"production"}[e+"_PREBUILD"])}catch(t){}if(!h){var r=v(i.join(t,"build/Release"),b);if(r)return r;var n=v(i.join(t,"build/Debug"),b);if(n)return n}var s=S(t);if(s)return s;var a=S(i.dirname(process.execPath));if(a)return a;var g=["platform="+f,"arch="+l,"runtime="+c,"abi="+u,"uv="+m,p?"armv="+p:"","libc="+d,"node="+process.versions.node,process.versions&&process.versions.electron?"electron="+process.versions.electron:"","webpack=true"].filter(Boolean).join(" ");throw new Error("No native build was found for "+g+"\n    loaded from: "+t+"\n");function S(t){var e=i.join(t,"prebuilds",f+"-"+l),r=y(e).map(w).filter(_(c,u)).sort(E(c))[0];if(r)return i.join(e,r.file)}},g.parseTags=w,g.matchTags=_,g.compareTags=E},6807:(t,e,r)=>{var n=r(7619),i=r(4032),s=(r(6417),r(476).Ber,r(4087)._),o=r(4087),a=r(6160),h=r(5159);void 0===n.RSA_NO_PADDING&&(n.RSA_NO_PADDING=3),t.exports=function(){var t={node10:["md4","md5","ripemd160","sha1","sha224","sha256","sha384","sha512"],node:["md4","md5","ripemd160","sha1","sha224","sha256","sha384","sha512"],iojs:["md4","md5","ripemd160","sha1","sha224","sha256","sha384","sha512"],browser:["md5","ripemd160","sha1","sha256","sha512"]},e="pkcs1_oaep",r="pkcs1",n={private:"pkcs1-private-pem","private-der":"pkcs1-private-der",public:"pkcs8-public-pem","public-der":"pkcs8-public-der"};function u(t,n,a){if(!(this instanceof u))return new u(t,n,a);s.isObject(n)&&(a=n,n=void 0),this.$options={signingScheme:r,signingSchemeOptions:{hash:"sha256",saltLength:null},encryptionScheme:e,encryptionSchemeOptions:{hash:"sha1",label:null},environment:o.detectEnvironment(),rsaUtils:this},this.keyPair=new i.Key,this.$cache={},Buffer.isBuffer(t)||s.isString(t)?this.importKey(t,n):s.isObject(t)&&this.generateKeyPair(t.b,t.e),this.setOptions(a)}return u.prototype.setOptions=function(n){if((n=n||{}).environment&&(this.$options.environment=n.environment),n.signingScheme){if(s.isString(n.signingScheme)){var i=n.signingScheme.toLowerCase().split("-");1==i.length?t.node.indexOf(i[0])>-1?(this.$options.signingSchemeOptions={hash:i[0]},this.$options.signingScheme=r):(this.$options.signingScheme=i[0],this.$options.signingSchemeOptions={hash:null}):(this.$options.signingSchemeOptions={hash:i[1]},this.$options.signingScheme=i[0])}else s.isObject(n.signingScheme)&&(this.$options.signingScheme=n.signingScheme.scheme||r,this.$options.signingSchemeOptions=s.omit(n.signingScheme,"scheme"));if(!a.isSignature(this.$options.signingScheme))throw Error("Unsupported signing scheme");if(this.$options.signingSchemeOptions.hash&&-1===t[this.$options.environment].indexOf(this.$options.signingSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}if(n.encryptionScheme){if(s.isString(n.encryptionScheme)?(this.$options.encryptionScheme=n.encryptionScheme.toLowerCase(),this.$options.encryptionSchemeOptions={}):s.isObject(n.encryptionScheme)&&(this.$options.encryptionScheme=n.encryptionScheme.scheme||e,this.$options.encryptionSchemeOptions=s.omit(n.encryptionScheme,"scheme")),!a.isEncryption(this.$options.encryptionScheme))throw Error("Unsupported encryption scheme");if(this.$options.encryptionSchemeOptions.hash&&-1===t[this.$options.environment].indexOf(this.$options.encryptionSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}this.keyPair.setOptions(this.$options)},u.prototype.generateKeyPair=function(t,e){if(e=e||65537,(t=t||2048)%8!=0)throw Error("Key size must be a multiple of 8.");return this.keyPair.generate(t,e.toString(16)),this.$cache={},this},u.prototype.importKey=function(t,e){if(!t)throw Error("Empty key given");if(e&&(e=n[e]||e),!h.detectAndImport(this.keyPair,t,e)&&void 0===e)throw Error("Key format must be specified");return this.$cache={},this},u.prototype.exportKey=function(t){return t=n[t=t||"private"]||t,this.$cache[t]||(this.$cache[t]=h.detectAndExport(this.keyPair,t)),this.$cache[t]},u.prototype.isPrivate=function(){return this.keyPair.isPrivate()},u.prototype.isPublic=function(t){return this.keyPair.isPublic(t)},u.prototype.isEmpty=function(t){return!(this.keyPair.n||this.keyPair.e||this.keyPair.d)},u.prototype.encrypt=function(t,e,r){return this.$$encryptKey(!1,t,e,r)},u.prototype.decrypt=function(t,e){return this.$$decryptKey(!1,t,e)},u.prototype.encryptPrivate=function(t,e,r){return this.$$encryptKey(!0,t,e,r)},u.prototype.decryptPublic=function(t,e){return this.$$decryptKey(!0,t,e)},u.prototype.$$encryptKey=function(t,e,r,n){try{var i=this.keyPair.encrypt(this.$getDataForEncrypt(e,n),t);return"buffer"!=r&&r?i.toString(r):i}catch(t){throw Error("Error during encryption. Original error: "+t)}},u.prototype.$$decryptKey=function(t,e,r){try{e=s.isString(e)?Buffer.from(e,"base64"):e;var n=this.keyPair.decrypt(e,t);if(null===n)throw Error("Key decrypt method returns null.");return this.$getDecryptedData(n,r)}catch(t){throw Error("Error during decryption (probably incorrect key). Original error: "+t)}},u.prototype.sign=function(t,e,r){if(!this.isPrivate())throw Error("This is not private key");var n=this.keyPair.sign(this.$getDataForEncrypt(t,r));return e&&"buffer"!=e&&(n=n.toString(e)),n},u.prototype.verify=function(t,e,r,n){if(!this.isPublic())throw Error("This is not public key");return n=n&&"buffer"!=n?n:null,this.keyPair.verify(this.$getDataForEncrypt(t,r),e,n)},u.prototype.getKeySize=function(){return this.keyPair.keySize},u.prototype.getMaxMessageSize=function(){return this.keyPair.maxMessageLength},u.prototype.$getDataForEncrypt=function(t,e){if(s.isString(t)||s.isNumber(t))return Buffer.from(""+t,e||"utf8");if(Buffer.isBuffer(t))return t;if(s.isObject(t))return Buffer.from(JSON.stringify(t));throw Error("Unexpected data type")},u.prototype.$getDecryptedData=function(t,e){return"buffer"==(e=e||"buffer")?t:"json"==e?JSON.parse(t.toString()):t.toString(e)},u}()},767:(t,e,r)=>{var n=r(6417);t.exports={getEngine:function(t,e){var i=r(6120);return"node"===e.environment&&"function"==typeof n.publicEncrypt&&"function"==typeof n.privateDecrypt&&(i="function"==typeof n.privateEncrypt&&"function"==typeof n.publicDecrypt?r(9954):r(4034)),i(t,e)}}},9954:(t,e,r)=>{var n=r(6417),i=r(7619),s=r(6160);t.exports=function(t,e){var r=s.pkcs1.makeScheme(t,e);return{encrypt:function(t,s){var o;if(s)return o=i.RSA_PKCS1_PADDING,e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(o=e.encryptionSchemeOptions.padding),n.privateEncrypt({key:e.rsaUtils.exportKey("private"),padding:o},t);o=i.RSA_PKCS1_OAEP_PADDING,"pkcs1"===e.encryptionScheme&&(o=i.RSA_PKCS1_PADDING),e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(o=e.encryptionSchemeOptions.padding);var a=t;return o===i.RSA_NO_PADDING&&(a=r.pkcs0pad(t)),n.publicEncrypt({key:e.rsaUtils.exportKey("public"),padding:o},a)},decrypt:function(t,s){var o;if(s)return o=i.RSA_PKCS1_PADDING,e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(o=e.encryptionSchemeOptions.padding),n.publicDecrypt({key:e.rsaUtils.exportKey("public"),padding:o},t);o=i.RSA_PKCS1_OAEP_PADDING,"pkcs1"===e.encryptionScheme&&(o=i.RSA_PKCS1_PADDING),e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(o=e.encryptionSchemeOptions.padding);var a=n.privateDecrypt({key:e.rsaUtils.exportKey("private"),padding:o},t);return o===i.RSA_NO_PADDING?r.pkcs0unpad(a):a}}}},6120:(t,e,r)=>{var n=r(3810),i=r(6160);t.exports=function(t,e){var r=i.pkcs1.makeScheme(t,e);return{encrypt:function(e,i){var s,o;return i?(s=new n(r.encPad(e,{type:1})),o=t.$doPrivate(s)):(s=new n(t.encryptionScheme.encPad(e)),o=t.$doPublic(s)),o.toBuffer(t.encryptedDataLength)},decrypt:function(e,i){var s,o=new n(e);return i?(s=t.$doPublic(o),r.encUnPad(s.toBuffer(t.encryptedDataLength),{type:1})):(s=t.$doPrivate(o),t.encryptionScheme.encUnPad(s.toBuffer(t.encryptedDataLength)))}}}},4034:(t,e,r)=>{var n=r(6417),i=r(7619),s=r(6160);t.exports=function(t,e){var o=r(6120)(t,e),a=s.pkcs1.makeScheme(t,e);return{encrypt:function(t,r){if(r)return o.encrypt(t,r);var s=i.RSA_PKCS1_OAEP_PADDING;"pkcs1"===e.encryptionScheme&&(s=i.RSA_PKCS1_PADDING),e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(s=e.encryptionSchemeOptions.padding);var h=t;return s===i.RSA_NO_PADDING&&(h=a.pkcs0pad(t)),n.publicEncrypt({key:e.rsaUtils.exportKey("public"),padding:s},h)},decrypt:function(t,r){if(r)return o.decrypt(t,r);var s=i.RSA_PKCS1_OAEP_PADDING;"pkcs1"===e.encryptionScheme&&(s=i.RSA_PKCS1_PADDING),e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(s=e.encryptionSchemeOptions.padding);var h=n.privateDecrypt({key:e.rsaUtils.exportKey("private"),padding:s},t);return s===i.RSA_NO_PADDING?a.pkcs0unpad(h):h}}}},5629:(t,e,r)=>{r(4087)._,r(4087);t.exports={privateExport:function(t,e){return{n:t.n.toBuffer(),e:t.e,d:t.d.toBuffer(),p:t.p.toBuffer(),q:t.q.toBuffer(),dmp1:t.dmp1.toBuffer(),dmq1:t.dmq1.toBuffer(),coeff:t.coeff.toBuffer()}},privateImport:function(t,e,r){if(!(e.n&&e.e&&e.d&&e.p&&e.q&&e.dmp1&&e.dmq1&&e.coeff))throw Error("Invalid key data");t.setPrivate(e.n,e.e,e.d,e.p,e.q,e.dmp1,e.dmq1,e.coeff)},publicExport:function(t,e){return{n:t.n.toBuffer(),e:t.e}},publicImport:function(t,e,r){if(!e.n||!e.e)throw Error("Invalid key data");t.setPublic(e.n,e.e)},autoImport:function(e,r){return!(!r.n||!r.e)&&(r.d&&r.p&&r.q&&r.dmp1&&r.dmq1&&r.coeff?(t.exports.privateImport(e,r),!0):(t.exports.publicImport(e,r),!0))}}},5159:(t,e,r)=>{r(4087)._;function n(t){t=t.split("-");for(var e="private",r={type:"default"},n=1;n<t.length;n++)if(t[n])switch(t[n]){case"public":case"private":e=t[n];break;case"pem":case"der":r.type=t[n]}return{scheme:t[0],keyType:e,keyOpt:r}}t.exports={pkcs1:r(5217),pkcs8:r(5531),components:r(5629),openssh:r(3685),isPrivateExport:function(e){return t.exports[e]&&"function"==typeof t.exports[e].privateExport},isPrivateImport:function(e){return t.exports[e]&&"function"==typeof t.exports[e].privateImport},isPublicExport:function(e){return t.exports[e]&&"function"==typeof t.exports[e].publicExport},isPublicImport:function(e){return t.exports[e]&&"function"==typeof t.exports[e].publicImport},detectAndImport:function(e,r,i){if(void 0===i){for(var s in t.exports)if("function"==typeof t.exports[s].autoImport&&t.exports[s].autoImport(e,r))return!0}else if(i){var o=n(i);if(!t.exports[o.scheme])throw Error("Unsupported key format");"private"===o.keyType?t.exports[o.scheme].privateImport(e,r,o.keyOpt):t.exports[o.scheme].publicImport(e,r,o.keyOpt)}return!1},detectAndExport:function(e,r){if(r){var i=n(r);if(t.exports[i.scheme]){if("private"===i.keyType){if(!e.isPrivate())throw Error("This is not private key");return t.exports[i.scheme].privateExport(e,i.keyOpt)}if(!e.isPublic())throw Error("This is not public key");return t.exports[i.scheme].publicExport(e,i.keyOpt)}throw Error("Unsupported key format")}}}},3685:(t,e,r)=>{var n=r(4087)._,i=r(4087),s=r(3810);const o="-----BEGIN OPENSSH PRIVATE KEY-----",a="-----END OPENSSH PRIVATE KEY-----";function h(t){const e=t.buf.readInt32BE(t.off);t.off+=4;const r=t.buf.slice(t.off,t.off+e);return t.off+=e,r}function u(t,e){t.buf.writeInt32BE(e.byteLength,t.off),t.off+=4,t.off+=e.copy(t.buf,t.off)}t.exports={privateExport:function(t,e){const r=t.n.toBuffer();let n=Buffer.alloc(4);for(n.writeUInt32BE(t.e,0);0===n[0];)n=n.slice(1);const s=t.d.toBuffer(),h=t.coeff.toBuffer(),c=t.p.toBuffer(),l=t.q.toBuffer();let f;f=void 0!==t.sshcomment?Buffer.from(t.sshcomment):Buffer.from([]);const d=15+n.byteLength+4+r.byteLength,p=23+r.byteLength+4+n.byteLength+4+s.byteLength+4+h.byteLength+4+c.byteLength+4+l.byteLength+4+f.byteLength;let m=43+d+4+p;m+=8*Math.ceil(p/8)-p;const g=Buffer.alloc(m),y={buf:g,off:0};g.write("openssh-key-v1","utf8"),g.writeUInt8(0,14),y.off+=15,u(y,Buffer.from("none")),u(y,Buffer.from("none")),u(y,Buffer.from("")),y.off=y.buf.writeUInt32BE(1,y.off),y.off=y.buf.writeUInt32BE(d,y.off),u(y,Buffer.from("ssh-rsa")),u(y,n),u(y,r),y.off=y.buf.writeUInt32BE(m-47-d,y.off),y.off+=8,u(y,Buffer.from("ssh-rsa")),u(y,r),u(y,n),u(y,s),u(y,h),u(y,c),u(y,l),u(y,f);let v=1;for(;y.off<m;)y.off=y.buf.writeUInt8(v++,y.off);return"der"===e.type?y.buf:o+"\n"+i.linebrk(g.toString("base64"),70)+"\n"+a+"\n"},privateImport:function(t,e,r){var u;if("der"!==(r=r||{}).type){if(Buffer.isBuffer(e)&&(e=e.toString("utf8")),!n.isString(e))throw Error("Unsupported key format");var c=i.trimSurroundingText(e,o,a).replace(/\s+|\n\r|\n|\r$/gm,"");u=Buffer.from(c,"base64")}else{if(!Buffer.isBuffer(e))throw Error("Unsupported key format");u=e}const l={buf:u,off:0};if("openssh-key-v1"!==u.slice(0,14).toString("ascii"))throw"Invalid file format.";if(l.off+=15,"none"!==h(l).toString("ascii"))throw Error("Unsupported key type");if("none"!==h(l).toString("ascii"))throw Error("Unsupported key type");if(""!==h(l).toString("ascii"))throw Error("Unsupported key type");if(l.off+=4,l.off+=4,"ssh-rsa"!==h(l).toString("ascii"))throw Error("Unsupported key type");if(h(l),h(l),l.off+=12,"ssh-rsa"!==h(l).toString("ascii"))throw Error("Unsupported key type");const f=h(l),d=h(l),p=h(l),m=h(l),g=h(l),y=h(l),v=new s(p),b=new s(y),w=new s(g),_=v.mod(w.subtract(s.ONE)),E=v.mod(b.subtract(s.ONE));t.setPrivate(f,d,p,g,y,_.toBuffer(),E.toBuffer(),m),t.sshcomment=h(l).toString("ascii")},publicExport:function(t,e){let r=Buffer.alloc(4);for(r.writeUInt32BE(t.e,0);0===r[0];)r=r.slice(1);const n=t.n.toBuffer(),i=Buffer.alloc(r.byteLength+4+n.byteLength+4+"ssh-rsa".length+4),s={buf:i,off:0};u(s,Buffer.from("ssh-rsa")),u(s,r),u(s,n);let o=t.sshcomment||"";return"der"===e.type?s.buf:"ssh-rsa "+i.toString("base64")+" "+o+"\n"},publicImport:function(t,e,r){var i;if("der"!==(r=r||{}).type){if(Buffer.isBuffer(e)&&(e=e.toString("utf8")),!n.isString(e))throw Error("Unsupported key format");{if("ssh-rsa "!==e.substring(0,8))throw Error("Unsupported key format");let r=e.indexOf(" ",8);-1===r?r=e.length:t.sshcomment=e.substring(r+1).replace(/\s+|\n\r|\n|\r$/gm,"");const n=e.substring(8,r).replace(/\s+|\n\r|\n|\r$/gm,"");i=Buffer.from(n,"base64")}}else{if(!Buffer.isBuffer(e))throw Error("Unsupported key format");i=e}const s={buf:i,off:0},o=h(s).toString("ascii");if("ssh-rsa"!==o)throw Error("Invalid key type: "+o);const a=h(s),u=h(s);t.setPublic(u,a)},autoImport:function(e,r){return/^[\S\s]*-----BEGIN OPENSSH PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END OPENSSH PRIVATE KEY-----[\S\s]*$/g.test(r)?(t.exports.privateImport(e,r),!0):!!/^[\S\s]*ssh-rsa \s*(?=(([A-Za-z0-9+/=]+\s*)+))\1[\S\s]*$/g.test(r)&&(t.exports.publicImport(e,r),!0)}}},5217:(t,e,r)=>{var n=r(476).Ber,i=r(4087)._,s=r(4087);const o="-----BEGIN RSA PRIVATE KEY-----",a="-----END RSA PRIVATE KEY-----",h="-----BEGIN RSA PUBLIC KEY-----",u="-----END RSA PUBLIC KEY-----";t.exports={privateExport:function(t,e){e=e||{};var r=t.n.toBuffer(),i=t.d.toBuffer(),h=t.p.toBuffer(),u=t.q.toBuffer(),c=t.dmp1.toBuffer(),l=t.dmq1.toBuffer(),f=t.coeff.toBuffer(),d=r.length+i.length+h.length+u.length+c.length+l.length+f.length+512,p=new n.Writer({size:d});return p.startSequence(),p.writeInt(0),p.writeBuffer(r,2),p.writeInt(t.e),p.writeBuffer(i,2),p.writeBuffer(h,2),p.writeBuffer(u,2),p.writeBuffer(c,2),p.writeBuffer(l,2),p.writeBuffer(f,2),p.endSequence(),"der"===e.type?p.buffer:o+"\n"+s.linebrk(p.buffer.toString("base64"),64)+"\n"+a},privateImport:function(t,e,r){var h;if("der"!==(r=r||{}).type){if(Buffer.isBuffer(e)&&(e=e.toString("utf8")),!i.isString(e))throw Error("Unsupported key format");var u=s.trimSurroundingText(e,o,a).replace(/\s+|\n\r|\n|\r$/gm,"");h=Buffer.from(u,"base64")}else{if(!Buffer.isBuffer(e))throw Error("Unsupported key format");h=e}var c=new n.Reader(h);c.readSequence(),c.readString(2,!0),t.setPrivate(c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0))},publicExport:function(t,e){e=e||{};var r=t.n.toBuffer(),i=r.length+512,o=new n.Writer({size:i});return o.startSequence(),o.writeBuffer(r,2),o.writeInt(t.e),o.endSequence(),"der"===e.type?o.buffer:h+"\n"+s.linebrk(o.buffer.toString("base64"),64)+"\n"+u},publicImport:function(t,e,r){var o;if("der"!==(r=r||{}).type){if(Buffer.isBuffer(e)&&(e=e.toString("utf8")),i.isString(e)){var a=s.trimSurroundingText(e,h,u).replace(/\s+|\n\r|\n|\r$/gm,"");o=Buffer.from(a,"base64")}}else{if(!Buffer.isBuffer(e))throw Error("Unsupported key format");o=e}var c=new n.Reader(o);c.readSequence(),t.setPublic(c.readString(2,!0),c.readString(2,!0))},autoImport:function(e,r){return/^[\S\s]*-----BEGIN RSA PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PRIVATE KEY-----[\S\s]*$/g.test(r)?(t.exports.privateImport(e,r),!0):!!/^[\S\s]*-----BEGIN RSA PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PUBLIC KEY-----[\S\s]*$/g.test(r)&&(t.exports.publicImport(e,r),!0)}}},5531:(t,e,r)=>{var n=r(476).Ber,i=r(4087)._,s="1.2.840.113549.1.1.1",o=r(4087);const a="-----BEGIN PRIVATE KEY-----",h="-----END PRIVATE KEY-----",u="-----BEGIN PUBLIC KEY-----",c="-----END PUBLIC KEY-----";t.exports={privateExport:function(t,e){e=e||{};var r=t.n.toBuffer(),i=t.d.toBuffer(),u=t.p.toBuffer(),c=t.q.toBuffer(),l=t.dmp1.toBuffer(),f=t.dmq1.toBuffer(),d=t.coeff.toBuffer(),p=r.length+i.length+u.length+c.length+l.length+f.length+d.length+512,m=new n.Writer({size:p});m.startSequence(),m.writeInt(0),m.writeBuffer(r,2),m.writeInt(t.e),m.writeBuffer(i,2),m.writeBuffer(u,2),m.writeBuffer(c,2),m.writeBuffer(l,2),m.writeBuffer(f,2),m.writeBuffer(d,2),m.endSequence();var g=new n.Writer({size:p});return g.startSequence(),g.writeInt(0),g.startSequence(),g.writeOID(s),g.writeNull(),g.endSequence(),g.writeBuffer(m.buffer,4),g.endSequence(),"der"===e.type?g.buffer:a+"\n"+o.linebrk(g.buffer.toString("base64"),64)+"\n"+h},privateImport:function(t,e,r){var u;if("der"!==(r=r||{}).type){if(Buffer.isBuffer(e)&&(e=e.toString("utf8")),!i.isString(e))throw Error("Unsupported key format");var c=o.trimSurroundingText(e,a,h).replace("-----END PRIVATE KEY-----","").replace(/\s+|\n\r|\n|\r$/gm,"");u=Buffer.from(c,"base64")}else{if(!Buffer.isBuffer(e))throw Error("Unsupported key format");u=e}var l=new n.Reader(u);if(l.readSequence(),l.readInt(0),new n.Reader(l.readString(48,!0)).readOID(6,!0)!==s)throw Error("Invalid Public key format");var f=new n.Reader(l.readString(4,!0));f.readSequence(),f.readString(2,!0),t.setPrivate(f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0))},publicExport:function(t,e){e=e||{};var r=t.n.toBuffer(),i=r.length+512,a=new n.Writer({size:i});a.writeByte(0),a.startSequence(),a.writeBuffer(r,2),a.writeInt(t.e),a.endSequence();var h=new n.Writer({size:i});return h.startSequence(),h.startSequence(),h.writeOID(s),h.writeNull(),h.endSequence(),h.writeBuffer(a.buffer,3),h.endSequence(),"der"===e.type?h.buffer:u+"\n"+o.linebrk(h.buffer.toString("base64"),64)+"\n"+c},publicImport:function(t,e,r){var a;if("der"!==(r=r||{}).type){if(Buffer.isBuffer(e)&&(e=e.toString("utf8")),i.isString(e)){var h=o.trimSurroundingText(e,u,c).replace(/\s+|\n\r|\n|\r$/gm,"");a=Buffer.from(h,"base64")}}else{if(!Buffer.isBuffer(e))throw Error("Unsupported key format");a=e}var l=new n.Reader(a);if(l.readSequence(),new n.Reader(l.readString(48,!0)).readOID(6,!0)!==s)throw Error("Invalid Public key format");var f=new n.Reader(l.readString(3,!0));f.readByte(),f.readSequence(),t.setPublic(f.readString(2,!0),f.readString(2,!0))},autoImport:function(e,r){return/^[\S\s]*-----BEGIN PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PRIVATE KEY-----[\S\s]*$/g.test(r)?(t.exports.privateImport(e,r),!0):!!/^[\S\s]*-----BEGIN PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PUBLIC KEY-----[\S\s]*$/g.test(r)&&(t.exports.publicImport(e,r),!0)}}},3810:(t,e,r)=>{var n=r(6417),i=r(4087)._;function s(t,e){null!=t&&("number"==typeof t?this.fromNumber(t,e):Buffer.isBuffer(t)?this.fromBuffer(t):null==e&&"string"!=typeof t?this.fromByteArray(t):this.fromString(t,e))}function o(){return new s(null)}s.prototype.am=function(t,e,r,n,i,s){for(var o=16383&e,a=e>>14;--s>=0;){var h=16383&this[t],u=this[t++]>>14,c=a*h+u*o;i=((h=o*h+((16383&c)<<14)+r[n]+i)>>28)+(c>>14)+a*u,r[n++]=268435455&h}return i},s.prototype.DB=28,s.prototype.DM=268435455,s.prototype.DV=1<<28;s.prototype.FV=Math.pow(2,52),s.prototype.F1=24,s.prototype.F2=4;var a,h,u=new Array;for(a="0".charCodeAt(0),h=0;h<=9;++h)u[a++]=h;for(a="a".charCodeAt(0),h=10;h<36;++h)u[a++]=h;for(a="A".charCodeAt(0),h=10;h<36;++h)u[a++]=h;function c(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function l(t,e){var r=u[t.charCodeAt(e)];return null==r?-1:r}function f(t){var e=o();return e.fromInt(t),e}function d(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function p(t){this.m=t}function m(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function g(t,e){return t&e}function y(t,e){return t|e}function v(t,e){return t^e}function b(t,e){return t&~e}function w(t){if(0===t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function _(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function E(){}function S(t){return t}function k(t){this.r2=o(),this.q3=o(),s.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}p.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},p.prototype.revert=function(t){return t},p.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},p.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},p.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},m.prototype.convert=function(t){var e=o();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(s.ZERO)>0&&this.m.subTo(e,e),e},m.prototype.revert=function(t){var e=o();return t.copyTo(e),this.reduce(e),e},m.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t[e],n=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[r=e+this.m.t]+=this.m.am(0,n,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},m.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},m.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},E.prototype.convert=S,E.prototype.revert=S,E.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r)},E.prototype.sqrTo=function(t,e){t.squareTo(e)},k.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=o();return t.copyTo(e),this.reduce(e),e},k.prototype.revert=function(t){return t},k.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},k.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},k.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var x=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],N=(1<<26)/x[x.length-1];s.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},s.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+DV:this.t=0},s.prototype.fromString=function(t,e,r){var n;switch(e){case 2:n=1;break;case 4:n=2;break;case 8:n=3;break;case 16:n=4;break;case 32:n=5;break;case 256:n=8;break;default:return void this.fromRadix(t,e)}this.t=0,this.s=0;for(var i=t.length,o=!1,a=0;--i>=0;){var h=8==n?255&t[i]:l(t,i);h<0?"-"==t.charAt(i)&&(o=!0):(o=!1,0===a?this[this.t++]=h:a+n>this.DB?(this[this.t-1]|=(h&(1<<this.DB-a)-1)<<a,this[this.t++]=h>>this.DB-a):this[this.t-1]|=h<<a,(a+=n)>=this.DB&&(a-=this.DB))}r||8!=n||0==(128&t[0])||(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&s.ZERO.subTo(this,this)},s.prototype.fromByteArray=function(t,e){this.fromString(t,256,e)},s.prototype.fromBuffer=function(t){this.fromString(t,256,!0)},s.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},s.prototype.dlShiftTo=function(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s},s.prototype.drShiftTo=function(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s},s.prototype.lShiftTo=function(t,e){var r,n=t%this.DB,i=this.DB-n,s=(1<<i)-1,o=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e[r+o+1]=this[r]>>i|a,a=(this[r]&s)<<n;for(r=o-1;r>=0;--r)e[r]=0;e[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()},s.prototype.rShiftTo=function(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,i=this.DB-n,s=(1<<n)-1;e[0]=this[r]>>n;for(var o=r+1;o<this.t;++o)e[o-r-1]|=(this[o]&s)<<i,e[o-r]=this[o]>>n;n>0&&(e[this.t-r-1]|=(this.s&s)<<i),e.t=this.t-r,e.clamp()}},s.prototype.subTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]-t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t[r],e[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[r++]=this.DV+n:n>0&&(e[r++]=n),e.t=r,e.clamp()},s.prototype.multiplyTo=function(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e[i]=0;for(i=0;i<n.t;++i)e[i+r.t]=r.am(0,n[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&s.ZERO.subTo(e,e)},s.prototype.squareTo=function(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()},s.prototype.divRemTo=function(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=o());var a=o(),h=this.s,u=t.s,c=this.DB-d(n[n.t-1]);c>0?(n.lShiftTo(c,a),i.lShiftTo(c,r)):(n.copyTo(a),i.copyTo(r));var l=a.t,f=a[l-1];if(0!==f){var p=f*(1<<this.F1)+(l>1?a[l-2]>>this.F2:0),m=this.FV/p,g=(1<<this.F1)/p,y=1<<this.F2,v=r.t,b=v-l,w=null==e?o():e;for(a.dlShiftTo(b,w),r.compareTo(w)>=0&&(r[r.t++]=1,r.subTo(w,r)),s.ONE.dlShiftTo(l,w),w.subTo(a,a);a.t<l;)a[a.t++]=0;for(;--b>=0;){var _=r[--v]==f?this.DM:Math.floor(r[v]*m+(r[v-1]+y)*g);if((r[v]+=a.am(0,_,r,b,0,l))<_)for(a.dlShiftTo(b,w),r.subTo(w,r);r[v]<--_;)r.subTo(w,r)}null!=e&&(r.drShiftTo(l,e),h!=u&&s.ZERO.subTo(e,e)),r.t=l,r.clamp(),c>0&&r.rShiftTo(c,r),h<0&&s.ZERO.subTo(r,r)}}},s.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},s.prototype.isEven=function(){return 0===(this.t>0?1&this[0]:this.s)},s.prototype.exp=function(t,e){if(t>4294967295||t<1)return s.ONE;var r=o(),n=o(),i=e.convert(this),a=d(t)-1;for(i.copyTo(r);--a>=0;)if(e.sqrTo(r,n),(t&1<<a)>0)e.mulTo(n,i,r);else{var h=r;r=n,n=h}return e.revert(r)},s.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},s.prototype.toRadix=function(t){if(null==t&&(t=10),0===this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=f(r),i=o(),s=o(),a="";for(this.divRemTo(n,i,s);i.signum()>0;)a=(r+s.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,s);return s.intValue().toString(t)+a},s.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,a=0,h=0;h<t.length;++h){var u=l(t,h);u<0?"-"==t.charAt(h)&&0===this.signum()&&(i=!0):(a=e*a+u,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&s.ZERO.subTo(this,this)},s.prototype.fromNumber=function(t,e){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t),this.testBit(t-1)||this.bitwiseTo(s.ONE.shiftLeft(t-1),y,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(s.ONE.shiftLeft(t-1),this);else{var r=n.randomBytes(1+(t>>3)),i=7&t;i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromByteArray(r)}},s.prototype.bitwiseTo=function(t,e,r){var n,i,s=Math.min(t.t,this.t);for(n=0;n<s;++n)r[n]=e(this[n],t[n]);if(t.t<this.t){for(i=t.s&this.DM,n=s;n<this.t;++n)r[n]=e(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<t.t;++n)r[n]=e(i,t[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},s.prototype.changeBit=function(t,e){var r=s.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r},s.prototype.addTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]+t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t[r],e[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[r++]=n:n<-1&&(e[r++]=this.DV+n),e.t=r,e.clamp()},s.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},s.prototype.dAddOffset=function(t,e){if(0!==t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},s.prototype.multiplyLowerTo=function(t,e,r){var n,i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,t[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t[i],r,i,0,e-i);r.clamp()},s.prototype.multiplyUpperTo=function(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r[this.t+n-e]=this.am(e-n,t[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)},s.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0===e)r=this[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this[n])%t;return r},s.prototype.millerRabin=function(t){var e=this.subtract(s.ONE),r=e.getLowestSetBit();if(r<=0)return!1;var n=e.shiftRight(r);(t=t+1>>1)>x.length&&(t=x.length);for(var i=o(),a=0;a<t;++a){i.fromInt(x[Math.floor(Math.random()*x.length)]);var h=i.modPow(n,this);if(0!=h.compareTo(s.ONE)&&0!=h.compareTo(e)){for(var u=1;u++<r&&0!=h.compareTo(e);)if(0===(h=h.modPowInt(2,this)).compareTo(s.ONE))return!1;if(0!=h.compareTo(e))return!1}}return!0},s.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(r=this[o]>>a)>0&&(i=!0,s=c(r));o>=0;)a<e?(r=(this[o]&(1<<a)-1)<<e-a,r|=this[--o]>>(a+=this.DB-e)):(r=this[o]>>(a-=e)&n,a<=0&&(a+=this.DB,--o)),r>0&&(i=!0),i&&(s+=c(r));return i?s:"0"},s.prototype.negate=function(){var t=o();return s.ZERO.subTo(this,t),t},s.prototype.abs=function(){return this.s<0?this.negate():this},s.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this[r]-t[r]))return e;return 0},s.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+d(this[this.t-1]^this.s&this.DM)},s.prototype.mod=function(t){var e=o();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(s.ZERO)>0&&t.subTo(e,e),e},s.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new p(e):new m(e),this.exp(t,r)},s.prototype.clone=function(){var t=o();return this.copyTo(t),t},s.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0===this.t)return-1}else{if(1==this.t)return this[0];if(0===this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},s.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},s.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},s.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},s.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(t-- >0)for(n<this.DB&&(r=this[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this[t]&(1<<n)-1)<<8-n,r|=this[--t]>>(n+=this.DB-8)):(r=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0===i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e},s.prototype.toBuffer=function(t){var e=Buffer.from(this.toByteArray());if(!0===t&&0===e[0])e=e.slice(1);else if(i.isNumber(t)){if(e.length>t){for(var r=0;r<e.length-t;r++)if(0!==e[r])return null;return e.slice(e.length-t)}if(e.length<t){var n=Buffer.alloc(t);return n.fill(0,0,t-e.length),e.copy(n,t-e.length),n}}return e},s.prototype.equals=function(t){return 0==this.compareTo(t)},s.prototype.min=function(t){return this.compareTo(t)<0?this:t},s.prototype.max=function(t){return this.compareTo(t)>0?this:t},s.prototype.and=function(t){var e=o();return this.bitwiseTo(t,g,e),e},s.prototype.or=function(t){var e=o();return this.bitwiseTo(t,y,e),e},s.prototype.xor=function(t){var e=o();return this.bitwiseTo(t,v,e),e},s.prototype.andNot=function(t){var e=o();return this.bitwiseTo(t,b,e),e},s.prototype.not=function(){for(var t=o(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},s.prototype.shiftLeft=function(t){var e=o();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},s.prototype.shiftRight=function(t){var e=o();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},s.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+w(this[t]);return this.s<0?this.t*this.DB:-1},s.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=_(this[r]^e);return t},s.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},s.prototype.setBit=function(t){return this.changeBit(t,y)},s.prototype.clearBit=function(t){return this.changeBit(t,b)},s.prototype.flipBit=function(t){return this.changeBit(t,v)},s.prototype.add=function(t){var e=o();return this.addTo(t,e),e},s.prototype.subtract=function(t){var e=o();return this.subTo(t,e),e},s.prototype.multiply=function(t){var e=o();return this.multiplyTo(t,e),e},s.prototype.divide=function(t){var e=o();return this.divRemTo(t,e,null),e},s.prototype.remainder=function(t){var e=o();return this.divRemTo(t,null,e),e},s.prototype.divideAndRemainder=function(t){var e=o(),r=o();return this.divRemTo(t,e,r),new Array(e,r)},s.prototype.modPow=function(t,e){var r,n,i=t.bitLength(),s=f(1);if(i<=0)return s;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new p(e):e.isEven()?new k(e):new m(e);var a=new Array,h=3,u=r-1,c=(1<<r)-1;if(a[1]=n.convert(this),r>1){var l=o();for(n.sqrTo(a[1],l);h<=c;)a[h]=o(),n.mulTo(l,a[h-2],a[h]),h+=2}var g,y,v=t.t-1,b=!0,w=o();for(i=d(t[v])-1;v>=0;){for(i>=u?g=t[v]>>i-u&c:(g=(t[v]&(1<<i+1)-1)<<u-i,v>0&&(g|=t[v-1]>>this.DB+i-u)),h=r;0==(1&g);)g>>=1,--h;if((i-=h)<0&&(i+=this.DB,--v),b)a[g].copyTo(s),b=!1;else{for(;h>1;)n.sqrTo(s,w),n.sqrTo(w,s),h-=2;h>0?n.sqrTo(s,w):(y=s,s=w,w=y),n.mulTo(w,a[g],s)}for(;v>=0&&0==(t[v]&1<<i);)n.sqrTo(s,w),y=s,s=w,w=y,--i<0&&(i=this.DB-1,--v)}return n.revert(s)},s.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0===t.signum())return s.ZERO;for(var r=t.clone(),n=this.clone(),i=f(1),o=f(0),a=f(0),h=f(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?(a.isEven()&&h.isEven()||(a.addTo(this,a),h.subTo(t,h)),a.rShiftTo(1,a)):h.isEven()||h.subTo(t,h),h.rShiftTo(1,h);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(a,i),o.subTo(h,o)):(n.subTo(r,n),e&&a.subTo(i,a),h.subTo(o,h))}return 0!=n.compareTo(s.ONE)?s.ZERO:h.compareTo(t)>=0?h.subtract(t):h.signum()<0?(h.addTo(t,h),h.signum()<0?h.add(t):h):h},s.prototype.pow=function(t){return this.exp(t,new E)},s.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r},s.prototype.isProbablePrime=function(t){var e,r=this.abs();if(1==r.t&&r[0]<=x[x.length-1]){for(e=0;e<x.length;++e)if(r[0]==x[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<x.length;){for(var n=x[e],i=e+1;i<x.length&&n<N;)n*=x[i++];for(n=r.modInt(n);e<i;)if(n%x[e++]==0)return!1}return r.millerRabin(t)},s.int2char=c,s.ZERO=f(0),s.ONE=f(1),s.prototype.square=function(){var t=o();return this.squareTo(t),t},t.exports=s},4032:(t,e,r)=>{var n=r(4087)._,i=(r(6417),r(3810)),s=r(4087),o=r(6160),a=r(767);e.BigInteger=i,t.exports.Key=function(){function t(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return t.prototype.setOptions=function(t){var e=o[t.signingScheme],r=o[t.encryptionScheme];e===r?this.signingScheme=this.encryptionScheme=r.makeScheme(this,t):(this.encryptionScheme=r.makeScheme(this,t),this.signingScheme=e.makeScheme(this,t)),this.encryptEngine=a.getEngine(this,t)},t.prototype.generate=function(t,e){var r=t>>1;this.e=parseInt(e,16);for(var n=new i(e,16);;){for(;this.p=new i(t-r,1),0!==this.p.subtract(i.ONE).gcd(n).compareTo(i.ONE)||!this.p.isProbablePrime(10););for(;this.q=new i(r,1),0!==this.q.subtract(i.ONE).gcd(n).compareTo(i.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var o=this.p.subtract(i.ONE),a=this.q.subtract(i.ONE),h=o.multiply(a);if(0===h.gcd(n).compareTo(i.ONE)){if(this.n=this.p.multiply(this.q),this.n.bitLength()<t)continue;this.d=n.modInverse(h),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}this.$$recalculateCache()},t.prototype.setPrivate=function(t,e,r,o,a,h,u,c){if(!(t&&e&&r&&t.length>0&&(n.isNumber(e)||e.length>0)&&r.length>0))throw Error("Invalid RSA private key");this.n=new i(t),this.e=n.isNumber(e)?e:s.get32IntFromBuffer(e,0),this.d=new i(r),o&&a&&h&&u&&c&&(this.p=new i(o),this.q=new i(a),this.dmp1=new i(h),this.dmq1=new i(u),this.coeff=new i(c)),this.$$recalculateCache()},t.prototype.setPublic=function(t,e){if(!(t&&e&&t.length>0&&(n.isNumber(e)||e.length>0)))throw Error("Invalid RSA public key");this.n=new i(t),this.e=n.isNumber(e)?e:s.get32IntFromBuffer(e,0),this.$$recalculateCache()},t.prototype.$doPrivate=function(t){if(this.p||this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),r=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(r)<0;)e=e.add(this.p);return e.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},t.prototype.$doPublic=function(t){return t.modPowInt(this.e,this.n)},t.prototype.encrypt=function(t,e){var r=[],n=[],i=t.length,s=Math.ceil(i/this.maxMessageLength)||1,o=Math.ceil(i/s||1);if(1==s)r.push(t);else for(var a=0;a<s;a++)r.push(t.slice(a*o,(a+1)*o));for(var h=0;h<r.length;h++)n.push(this.encryptEngine.encrypt(r[h],e));return Buffer.concat(n)},t.prototype.decrypt=function(t,e){if(t.length%this.encryptedDataLength>0)throw Error("Incorrect data or key");for(var r=[],n=0,i=0,s=t.length/this.encryptedDataLength,o=0;o<s;o++)i=(n=o*this.encryptedDataLength)+this.encryptedDataLength,r.push(this.encryptEngine.decrypt(t.slice(n,Math.min(i,t.length)),e));return Buffer.concat(r)},t.prototype.sign=function(t){return this.signingScheme.sign.apply(this.signingScheme,arguments)},t.prototype.verify=function(t,e,r){return this.signingScheme.verify.apply(this.signingScheme,arguments)},t.prototype.isPrivate=function(){return!!(this.n&&this.e&&this.d)},t.prototype.isPublic=function(t){return this.n&&this.e&&!(t&&this.d)||!1},Object.defineProperty(t.prototype,"keySize",{get:function(){return this.cache.keyBitLength}}),Object.defineProperty(t.prototype,"encryptedDataLength",{get:function(){return this.cache.keyByteLength}}),Object.defineProperty(t.prototype,"maxMessageLength",{get:function(){return this.encryptionScheme.maxMessageLength()}}),t.prototype.$$recalculateCache=function(){this.cache=this.cache||{},this.cache.keyBitLength=this.n.bitLength(),this.cache.keyByteLength=this.cache.keyBitLength+6>>3},t}()},5218:(t,e,r)=>{r(3810);var n=r(6417);t.exports={isEncryption:!0,isSignature:!1},t.exports.digestLength={md4:16,md5:16,ripemd160:20,rmd160:20,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64};var i="sha1";t.exports.eme_oaep_mgf1=function(e,r,s){s=s||i;for(var o=t.exports.digestLength[s],a=Math.ceil(r/o),h=Buffer.alloc(o*a),u=Buffer.alloc(4),c=0;c<a;++c){var l=n.createHash(s);l.update(e),u.writeUInt32BE(c,0),l.update(u),l.digest().copy(h,c*o)}return h.slice(0,r)},t.exports.makeScheme=function(e,r){function s(t,e){this.key=t,this.options=e}return s.prototype.maxMessageLength=function(){return this.key.encryptedDataLength-2*t.exports.digestLength[this.options.encryptionSchemeOptions.hash||i]-2},s.prototype.encPad=function(e){var r=this.options.encryptionSchemeOptions.hash||i,s=this.options.encryptionSchemeOptions.mgf||t.exports.eme_oaep_mgf1,o=this.options.encryptionSchemeOptions.label||Buffer.alloc(0),a=this.key.encryptedDataLength,h=t.exports.digestLength[r];if(e.length>a-2*h-2)throw new Error("Message is too long to encode into an encoded message with a length of "+a+" bytes, increaseemLen to fix this error (minimum value for given parameters and options: "+(a-2*h-2)+")");var u=n.createHash(r);u.update(o),u=u.digest();var c=Buffer.alloc(a-e.length-2*h-1);c.fill(0),c[c.length-1]=1;for(var l=Buffer.concat([u,c,e]),f=n.randomBytes(h),d=s(f,l.length,r),p=0;p<l.length;p++)l[p]^=d[p];for(d=s(l,h,r),p=0;p<f.length;p++)f[p]^=d[p];var m=Buffer.alloc(1+f.length+l.length);return m[0]=0,f.copy(m,1),l.copy(m,1+f.length),m},s.prototype.encUnPad=function(e){var r=this.options.encryptionSchemeOptions.hash||i,s=this.options.encryptionSchemeOptions.mgf||t.exports.eme_oaep_mgf1,o=this.options.encryptionSchemeOptions.label||Buffer.alloc(0),a=t.exports.digestLength[r];if(e.length<2*a+2)throw new Error("Error decoding message, the supplied message is not long enough to be a valid OAEP encoded message");for(var h=e.slice(1,a+1),u=e.slice(1+a),c=s(u,a,r),l=0;l<h.length;l++)h[l]^=c[l];for(c=s(h,u.length,r),l=0;l<u.length;l++)u[l]^=c[l];var f=n.createHash(r);if(f.update(o),f=f.digest(),u.slice(0,a).toString("hex")!=f.toString("hex"))throw new Error("Error decoding message, the lHash calculated from the label provided and the lHash in the encrypted data do not match.");for(l=a;0===u[l++]&&l<u.length;);if(1!=u[l-1])throw new Error("Error decoding message, there is no padding message separator byte");return u.slice(l)},new s(e,r)}},3047:(t,e,r)=>{var n=r(3810),i=r(6417),s=r(7619),o={md2:Buffer.from("3020300c06082a864886f70d020205000410","hex"),md5:Buffer.from("3020300c06082a864886f70d020505000410","hex"),sha1:Buffer.from("3021300906052b0e03021a05000414","hex"),sha224:Buffer.from("302d300d06096086480165030402040500041c","hex"),sha256:Buffer.from("3031300d060960864801650304020105000420","hex"),sha384:Buffer.from("3041300d060960864801650304020205000430","hex"),sha512:Buffer.from("3051300d060960864801650304020305000440","hex"),ripemd160:Buffer.from("3021300906052b2403020105000414","hex"),rmd160:Buffer.from("3021300906052b2403020105000414","hex")},a={ripemd160:"rmd160"},h="sha256";t.exports={isEncryption:!0,isSignature:!0},t.exports.makeScheme=function(t,e){function r(t,e){this.key=t,this.options=e}return r.prototype.maxMessageLength=function(){return this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==s.RSA_NO_PADDING?this.key.encryptedDataLength:this.key.encryptedDataLength-11},r.prototype.encPad=function(t,e){var r;if(e=e||{},t.length>this.key.maxMessageLength)throw new Error("Message too long for RSA (n="+this.key.encryptedDataLength+", l="+t.length+")");if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==s.RSA_NO_PADDING)return(r=Buffer.alloc(this.key.maxMessageLength-t.length)).fill(0),Buffer.concat([r,t]);if(1===e.type)return(r=Buffer.alloc(this.key.encryptedDataLength-t.length-1)).fill(255,0,r.length-1),r[0]=1,r[r.length-1]=0,Buffer.concat([r,t]);(r=Buffer.alloc(this.key.encryptedDataLength-t.length))[0]=0,r[1]=2;for(var n=i.randomBytes(r.length-3),o=0;o<n.length;o++){for(var a=n[o];0===a;)a=i.randomBytes(1)[0];r[o+2]=a}return r[r.length-1]=0,Buffer.concat([r,t])},r.prototype.encUnPad=function(t,e){e=e||{};var r=0;if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==s.RSA_NO_PADDING)return"function"==typeof t.lastIndexOf?t.slice(t.lastIndexOf("\0")+1,t.length):t.slice(String.prototype.lastIndexOf.call(t,"\0")+1,t.length);if(t.length<4)return null;if(1===e.type){if(0!==t[0]||1!==t[1])return null;for(r=3;0!==t[r];)if(255!=t[r]||++r>=t.length)return null}else{if(0!==t[0]||2!==t[1])return null;for(r=3;0!==t[r];)if(++r>=t.length)return null}return t.slice(r+1,t.length)},r.prototype.sign=function(t){var e=this.options.signingSchemeOptions.hash||h;if("browser"===this.options.environment){e=a[e]||e;var r=i.createHash(e);r.update(t);var s=this.pkcs1pad(r.digest(),e);return this.key.$doPrivate(new n(s)).toBuffer(this.key.encryptedDataLength)}var o=i.createSign("RSA-"+e.toUpperCase());return o.update(t),o.sign(this.options.rsaUtils.exportKey("private"))},r.prototype.verify=function(t,e,r){if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==s.RSA_NO_PADDING)return!1;var o=this.options.signingSchemeOptions.hash||h;if("browser"===this.options.environment){o=a[o]||o,r&&(e=Buffer.from(e,r));var u=i.createHash(o);u.update(t);var c=this.pkcs1pad(u.digest(),o);return this.key.$doPublic(new n(e)).toBuffer().toString("hex")==c.toString("hex")}var l=i.createVerify("RSA-"+o.toUpperCase());return l.update(t),l.verify(this.options.rsaUtils.exportKey("public"),e,r)},r.prototype.pkcs0pad=function(t){var e=Buffer.alloc(this.key.maxMessageLength-t.length);return e.fill(0),Buffer.concat([e,t])},r.prototype.pkcs0unpad=function(t){return"function"==typeof t.lastIndexOf?t.slice(t.lastIndexOf("\0")+1,t.length):t.slice(String.prototype.lastIndexOf.call(t,"\0")+1,t.length)},r.prototype.pkcs1pad=function(t,e){var r=o[e];if(!r)throw Error("Unsupported hash algorithm");var n=Buffer.concat([r,t]);if(n.length+10>this.key.encryptedDataLength)throw Error("Key is too short for signing algorithm ("+e+")");var i=Buffer.alloc(this.key.encryptedDataLength-n.length-1);return i.fill(255,0,i.length-1),i[0]=1,i[i.length-1]=0,Buffer.concat([i,n])},new r(t,e)}},6256:(t,e,r)=>{var n=r(3810),i=r(6417);t.exports={isEncryption:!1,isSignature:!0};var s="sha1";t.exports.makeScheme=function(t,e){var o=r(6160).pkcs1_oaep;function a(t,e){this.key=t,this.options=e}return a.prototype.sign=function(t){var e=i.createHash(this.options.signingSchemeOptions.hash||s);e.update(t);var r=this.emsa_pss_encode(e.digest(),this.key.keySize-1);return this.key.$doPrivate(new n(r)).toBuffer(this.key.encryptedDataLength)},a.prototype.verify=function(t,e,r){r&&(e=Buffer.from(e,r)),e=new n(e);var o=Math.ceil((this.key.keySize-1)/8),a=this.key.$doPublic(e).toBuffer(o),h=i.createHash(this.options.signingSchemeOptions.hash||s);return h.update(t),this.emsa_pss_verify(h.digest(),a,this.key.keySize-1)},a.prototype.emsa_pss_encode=function(t,e){var r=this.options.signingSchemeOptions.hash||s,n=this.options.signingSchemeOptions.mgf||o.eme_oaep_mgf1,a=this.options.signingSchemeOptions.saltLength||20,h=o.digestLength[r],u=Math.ceil(e/8);if(u<h+a+2)throw new Error("Output length passed to emBits("+e+") is too small for the options specified("+r+", "+a+"). To fix this issue increase the value of emBits. (minimum size: "+(8*h+8*a+9)+")");var c=i.randomBytes(a),l=Buffer.alloc(8+h+a);l.fill(0,0,8),t.copy(l,8),c.copy(l,8+t.length);var f=i.createHash(r);f.update(l),f=f.digest();var d=Buffer.alloc(u-c.length-h-2);d.fill(0);var p=Buffer.alloc(d.length+1+c.length);d.copy(p),p[d.length]=1,c.copy(p,d.length+1);for(var m=n(f,p.length,r),g=Buffer.alloc(p.length),y=0;y<m.length;y++)g[y]=p[y]^m[y];var v=8*u-e,b=255^255>>8-v<<8-v;g[0]=g[0]&b;var w=Buffer.alloc(g.length+f.length+1);return g.copy(w,0),f.copy(w,g.length),w[w.length-1]=188,w},a.prototype.emsa_pss_verify=function(t,e,r){var n=this.options.signingSchemeOptions.hash||s,a=this.options.signingSchemeOptions.mgf||o.eme_oaep_mgf1,h=this.options.signingSchemeOptions.saltLength||20,u=o.digestLength[n],c=Math.ceil(r/8);if(c<u+h+2||188!=e[e.length-1])return!1;var l=Buffer.alloc(c-u-1);e.copy(l,0,0,c-u-1);for(var f=0,d=0,p=8*c-r;d<p;d++)f|=1<<7-d;if(0!=(l[0]&f))return!1;var m=e.slice(c-u-1,c-1),g=a(m,l.length,n);for(d=0;d<l.length;d++)l[d]^=g[d];for(f=255^255>>8-(p=8*c-r)<<8-p,l[0]=l[0]&f,d=0;0===l[d]&&d<l.length;d++);if(1!=l[d])return!1;var y=l.slice(l.length-h),v=Buffer.alloc(8+u+h);v.fill(0,0,8),t.copy(v,8),y.copy(v,8+t.length);var b=i.createHash(n);return b.update(v),b=b.digest(),m.toString("hex")===b.toString("hex")},new a(t,e)}},6160:(t,e,r)=>{t.exports={pkcs1:r(3047),pkcs1_oaep:r(5218),pss:r(6256),isEncryption:function(e){return t.exports[e]&&t.exports[e].isEncryption},isSignature:function(e){return t.exports[e]&&t.exports[e].isSignature}}},4087:(t,e,r)=>{r(6417);t.exports.linebrk=function(t,e){for(var r="",n=0;n+e<t.length;)r+=t.substring(n,n+e)+"\n",n+=e;return r+t.substring(n,t.length)},t.exports.detectEnvironment=function(){return"undefined"==typeof window||!window||process&&"node"===process.title?"node":"browser"},t.exports.get32IntFromBuffer=function(t,e){e=e||0;var r;if((r=t.length-e)>0){if(r>=4)return t.readUIntBE(e,r);for(var n=0,i=e+r,s=0;i>e;i--,s+=2)n+=t[i-1]*Math.pow(16,s);return n}return NaN},t.exports._={isObject:function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)},isString:function(t){return"string"==typeof t||t instanceof String},isNumber:function(t){return"number"==typeof t||!isNaN(parseFloat(t))&&isFinite(t)},omit:function(t,e){var r={};for(var n in t)t.hasOwnProperty(n)&&n!==e&&(r[n]=t[n]);return r}},t.exports.trimSurroundingText=function(t,e,r){var n=0,i=t.length,s=t.indexOf(e);s>=0&&(n=s+e.length);var o=t.indexOf(r,s);return o>=0&&(i=o),t.substring(n,i)}},2399:(t,e,r)=>{"use strict";var n,i=r(4293),s=i.Buffer,o={};for(n in i)i.hasOwnProperty(n)&&"SlowBuffer"!==n&&"Buffer"!==n&&(o[n]=i[n]);var a=o.Buffer={};for(n in s)s.hasOwnProperty(n)&&"allocUnsafe"!==n&&"allocUnsafeSlow"!==n&&(a[n]=s[n]);if(o.Buffer.prototype=s.prototype,a.from&&a.from!==Uint8Array.from||(a.from=function(t,e,r){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return s(t,e,r)}),a.alloc||(a.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=s(t);return e&&0!==e.length?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n}),!o.kStringMaxLength)try{o.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(t){}o.constants||(o.constants={MAX_LENGTH:o.kMaxLength},o.kStringMaxLength&&(o.constants.MAX_STRING_LENGTH=o.kStringMaxLength)),t.exports=o},137:t=>{"use strict";t.exports=function(t){const e=t.length;let r=0;for(;r<e;)if(0==(128&t[r]))r++;else if(192==(224&t[r])){if(r+1===e||128!=(192&t[r+1])||192==(254&t[r]))return!1;r+=2}else if(224==(240&t[r])){if(r+2>=e||128!=(192&t[r+1])||128!=(192&t[r+2])||224===t[r]&&128==(224&t[r+1])||237===t[r]&&160==(224&t[r+1]))return!1;r+=3}else{if(240!=(248&t[r]))return!1;if(r+3>=e||128!=(192&t[r+1])||128!=(192&t[r+2])||128!=(192&t[r+3])||240===t[r]&&128==(240&t[r+1])||244===t[r]&&t[r+1]>143||t[r]>244)return!1;r+=4}return!0}},311:(t,e,r)=>{"use strict";try{t.exports=r(9516)(__dirname)}catch(e){t.exports=r(137)}},8777:(t,e,r)=>{"use strict";const n=r(8762);n.createWebSocketStream=r(404),n.Server=r(9284),n.Receiver=r(2957),n.Sender=r(7330),t.exports=n},977:(t,e,r)=>{"use strict";const{EMPTY_BUFFER:n}=r(1872);function i(t,e){if(0===t.length)return n;if(1===t.length)return t[0];const r=Buffer.allocUnsafe(e);let i=0;for(let e=0;e<t.length;e++){const n=t[e];r.set(n,i),i+=n.length}return i<e?r.slice(0,i):r}function s(t,e,r,n,i){for(let s=0;s<i;s++)r[n+s]=t[s]^e[3&s]}function o(t,e){const r=t.length;for(let n=0;n<r;n++)t[n]^=e[3&n]}function a(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function h(t){if(h.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=Buffer.from(t):ArrayBuffer.isView(t)?e=Buffer.from(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),h.readOnly=!1),e}try{const e=r(1891),n=e.BufferUtil||e;t.exports={concat:i,mask(t,e,r,i,o){o<48?s(t,e,r,i,o):n.mask(t,e,r,i,o)},toArrayBuffer:a,toBuffer:h,unmask(t,e){t.length<32?o(t,e):n.unmask(t,e)}}}catch(e){t.exports={concat:i,mask:s,toArrayBuffer:a,toBuffer:h,unmask:o}}},1872:t=>{"use strict";t.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},62:t=>{"use strict";class e{constructor(t,e){this.target=e,this.type=t}}class r extends e{constructor(t,e){super("message",e),this.data=t}}class n extends e{constructor(t,e,r){super("close",r),this.wasClean=r._closeFrameReceived&&r._closeFrameSent,this.reason=e,this.code=t}}class i extends e{constructor(t){super("open",t)}}class s extends e{constructor(t,e){super("error",e),this.message=t.message,this.error=t}}const o={addEventListener(t,e,o){if("function"!=typeof e)return;function a(t){e.call(this,new r(t,this))}function h(t,r){e.call(this,new n(t,r,this))}function u(t){e.call(this,new s(t,this))}function c(){e.call(this,new i(this))}const l=o&&o.once?"once":"on";"message"===t?(a._listener=e,this[l](t,a)):"close"===t?(h._listener=e,this[l](t,h)):"error"===t?(u._listener=e,this[l](t,u)):"open"===t?(c._listener=e,this[l](t,c)):this[l](t,e)},removeEventListener(t,e){const r=this.listeners(t);for(let n=0;n<r.length;n++)r[n]!==e&&r[n]._listener!==e||this.removeListener(t,r[n])}};t.exports=o},1503:t=>{"use strict";const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function r(t,e,r){void 0===t[e]?t[e]=[r]:t[e].push(r)}t.exports={format:function(t){return Object.keys(t).map((e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map((t=>[e].concat(Object.keys(t).map((e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map((t=>!0===t?e:`${e}=${t}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(t){const n=Object.create(null);if(void 0===t||""===t)return n;let i,s,o=Object.create(null),a=!1,h=!1,u=!1,c=-1,l=-1,f=0;for(;f<t.length;f++){const d=t.charCodeAt(f);if(void 0===i)if(-1===l&&1===e[d])-1===c&&(c=f);else if(32===d||9===d)-1===l&&-1!==c&&(l=f);else{if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${f}`);{if(-1===c)throw new SyntaxError(`Unexpected character at index ${f}`);-1===l&&(l=f);const e=t.slice(c,l);44===d?(r(n,e,o),o=Object.create(null)):i=e,c=l=-1}}else if(void 0===s)if(-1===l&&1===e[d])-1===c&&(c=f);else if(32===d||9===d)-1===l&&-1!==c&&(l=f);else if(59===d||44===d){if(-1===c)throw new SyntaxError(`Unexpected character at index ${f}`);-1===l&&(l=f),r(o,t.slice(c,l),!0),44===d&&(r(n,i,o),o=Object.create(null),i=void 0),c=l=-1}else{if(61!==d||-1===c||-1!==l)throw new SyntaxError(`Unexpected character at index ${f}`);s=t.slice(c,f),c=l=-1}else if(h){if(1!==e[d])throw new SyntaxError(`Unexpected character at index ${f}`);-1===c?c=f:a||(a=!0),h=!1}else if(u)if(1===e[d])-1===c&&(c=f);else if(34===d&&-1!==c)u=!1,l=f;else{if(92!==d)throw new SyntaxError(`Unexpected character at index ${f}`);h=!0}else if(34===d&&61===t.charCodeAt(f-1))u=!0;else if(-1===l&&1===e[d])-1===c&&(c=f);else if(-1===c||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${f}`);{if(-1===c)throw new SyntaxError(`Unexpected character at index ${f}`);-1===l&&(l=f);let e=t.slice(c,l);a&&(e=e.replace(/\\/g,""),a=!1),r(o,s,e),44===d&&(r(n,i,o),o=Object.create(null),i=void 0),s=void 0,c=l=-1}}else-1===l&&(l=f)}if(-1===c||u)throw new SyntaxError("Unexpected end of input");-1===l&&(l=f);const d=t.slice(c,l);return void 0===i?r(n,d,o):(void 0===s?r(o,d,!0):r(o,s,a?d.replace(/\\/g,""):d),r(n,i,o)),n}}},305:t=>{"use strict";const e=Symbol("kDone"),r=Symbol("kRun");t.exports=class{constructor(t){this[e]=()=>{this.pending--,this[r]()},this.concurrency=t||1/0,this.jobs=[],this.pending=0}add(t){this.jobs.push(t),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const t=this.jobs.shift();this.pending++,t(this[e])}}}},5196:(t,e,r)=>{"use strict";const n=r(8761),i=r(977),s=r(305),{kStatusCode:o,NOOP:a}=r(1872),h=Buffer.from([0,0,255,255]),u=Symbol("permessage-deflate"),c=Symbol("total-length"),l=Symbol("callback"),f=Symbol("buffers"),d=Symbol("error");let p;function m(t){this[f].push(t),this[c]+=t.length}function g(t){this[c]+=t.length,this[u]._maxPayload<1||this[c]<=this[u]._maxPayload?this[f].push(t):(this[d]=new RangeError("Max payload size exceeded"),this[d].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[d][o]=1009,this.removeListener("data",g),this.reset())}function y(t){this[u]._inflate=null,t[o]=1007,this[l](t)}t.exports=class{constructor(t,e,r){if(this._maxPayload=0|r,this._options=t||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!e,this._deflate=null,this._inflate=null,this.params=null,!p){const t=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;p=new s(t)}}static get extensionName(){return"permessage-deflate"}offer(){const t={};return this._options.serverNoContextTakeover&&(t.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(t.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(t.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?t.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(t.client_max_window_bits=!0),t}accept(t){return t=this.normalizeParams(t),this.params=this._isServer?this.acceptAsServer(t):this.acceptAsClient(t),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const t=this._deflate[l];this._deflate.close(),this._deflate=null,t&&t(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(t){const e=this._options,r=t.find((t=>!(!1===e.serverNoContextTakeover&&t.server_no_context_takeover||t.server_max_window_bits&&(!1===e.serverMaxWindowBits||"number"==typeof e.serverMaxWindowBits&&e.serverMaxWindowBits>t.server_max_window_bits)||"number"==typeof e.clientMaxWindowBits&&!t.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return e.serverNoContextTakeover&&(r.server_no_context_takeover=!0),e.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof e.serverMaxWindowBits&&(r.server_max_window_bits=e.serverMaxWindowBits),"number"==typeof e.clientMaxWindowBits?r.client_max_window_bits=e.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==e.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(t){const e=t[0];if(!1===this._options.clientNoContextTakeover&&e.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(e.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&e.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(e.client_max_window_bits=this._options.clientMaxWindowBits);return e}normalizeParams(t){return t.forEach((t=>{Object.keys(t).forEach((e=>{let r=t[e];if(r.length>1)throw new Error(`Parameter "${e}" must have only a single value`);if(r=r[0],"client_max_window_bits"===e){if(!0!==r){const t=+r;if(!Number.isInteger(t)||t<8||t>15)throw new TypeError(`Invalid value for parameter "${e}": ${r}`);r=t}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${e}": ${r}`)}else if("server_max_window_bits"===e){const t=+r;if(!Number.isInteger(t)||t<8||t>15)throw new TypeError(`Invalid value for parameter "${e}": ${r}`);r=t}else{if("client_no_context_takeover"!==e&&"server_no_context_takeover"!==e)throw new Error(`Unknown parameter "${e}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${e}": ${r}`)}t[e]=r}))})),t}decompress(t,e,r){p.add((n=>{this._decompress(t,e,((t,e)=>{n(),r(t,e)}))}))}compress(t,e,r){p.add((n=>{this._compress(t,e,((t,e)=>{n(),r(t,e)}))}))}_decompress(t,e,r){const s=this._isServer?"client":"server";if(!this._inflate){const t=`${s}_max_window_bits`,e="number"!=typeof this.params[t]?n.Z_DEFAULT_WINDOWBITS:this.params[t];this._inflate=n.createInflateRaw({...this._options.zlibInflateOptions,windowBits:e}),this._inflate[u]=this,this._inflate[c]=0,this._inflate[f]=[],this._inflate.on("error",y),this._inflate.on("data",g)}this._inflate[l]=r,this._inflate.write(t),e&&this._inflate.write(h),this._inflate.flush((()=>{const t=this._inflate[d];if(t)return this._inflate.close(),this._inflate=null,void r(t);const n=i.concat(this._inflate[f],this._inflate[c]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[c]=0,this._inflate[f]=[],e&&this.params[`${s}_no_context_takeover`]&&this._inflate.reset()),r(null,n)}))}_compress(t,e,r){const s=this._isServer?"server":"client";if(!this._deflate){const t=`${s}_max_window_bits`,e="number"!=typeof this.params[t]?n.Z_DEFAULT_WINDOWBITS:this.params[t];this._deflate=n.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:e}),this._deflate[c]=0,this._deflate[f]=[],this._deflate.on("error",a),this._deflate.on("data",m)}this._deflate[l]=r,this._deflate.write(t),this._deflate.flush(n.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let t=i.concat(this._deflate[f],this._deflate[c]);e&&(t=t.slice(0,t.length-4)),this._deflate[l]=null,this._deflate[c]=0,this._deflate[f]=[],e&&this.params[`${s}_no_context_takeover`]&&this._deflate.reset(),r(null,t)}))}}},2957:(t,e,r)=>{"use strict";const{Writable:n}=r(2413),i=r(5196),{BINARY_TYPES:s,EMPTY_BUFFER:o,kStatusCode:a,kWebSocket:h}=r(1872),{concat:u,toArrayBuffer:c,unmask:l}=r(977),{isValidStatusCode:f,isValidUTF8:d}=r(6746);function p(t,e,r,n,i){const s=new t(r?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(s,p),s.code=i,s[a]=n,s}t.exports=class extends n{constructor(t,e,r,n){super(),this._binaryType=t||s[0],this[h]=void 0,this._extensions=e||{},this._isServer=!!r,this._maxPayload=0|n,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(t,e,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=t.length,this._buffers.push(t),this.startLoop(r)}consume(t){if(this._bufferedBytes-=t,t===this._buffers[0].length)return this._buffers.shift();if(t<this._buffers[0].length){const e=this._buffers[0];return this._buffers[0]=e.slice(t),e.slice(0,t)}const e=Buffer.allocUnsafe(t);do{const r=this._buffers[0],n=e.length-t;t>=r.length?e.set(this._buffers.shift(),n):(e.set(new Uint8Array(r.buffer,r.byteOffset,t),n),this._buffers[0]=r.slice(t)),t-=r.length}while(t>0);return e}startLoop(t){let e;this._loop=!0;do{switch(this._state){case 0:e=this.getInfo();break;case 1:e=this.getPayloadLength16();break;case 2:e=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:e=this.getData(t);break;default:return void(this._loop=!1)}}while(this._loop);t(e)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const t=this.consume(2);if(0!=(48&t[0]))return this._loop=!1,p(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");const e=64==(64&t[0]);if(e&&!this._extensions[i.extensionName])return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=128==(128&t[0]),this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(e)return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,p(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,p(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=e}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,p(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,p(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(e)return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,p(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&t[1]),this._isServer){if(!this._masked)return this._loop=!1,p(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,p(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const t=this.consume(8),e=t.readUInt32BE(0);return e>Math.pow(2,21)-1?(this._loop=!1,p(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=e*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,p(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(t){let e=o;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);e=this.consume(this._payloadLength),this._masked&&l(e,this._mask)}return this._opcode>7?this.controlMessage(e):this._compressed?(this._state=5,void this.decompress(e,t)):(e.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(e)),this.dataMessage())}decompress(t,e){this._extensions[i.extensionName].decompress(t,this._fin,((t,r)=>{if(t)return e(t);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return e(p(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(r)}const n=this.dataMessage();if(n)return e(n);this.startLoop(e)}))}dataMessage(){if(this._fin){const t=this._messageLength,e=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let r;r="nodebuffer"===this._binaryType?u(e,t):"arraybuffer"===this._binaryType?c(u(e,t)):e,this.emit("message",r)}else{const r=u(e,t);if(!d(r))return this._loop=!1,p(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",r.toString())}}this._state=0}controlMessage(t){if(8===this._opcode)if(this._loop=!1,0===t.length)this.emit("conclude",1005,""),this.end();else{if(1===t.length)return p(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{const e=t.readUInt16BE(0);if(!f(e))return p(RangeError,`invalid status code ${e}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");const r=t.slice(2);if(!d(r))return p(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",e,r.toString()),this.end()}}else 9===this._opcode?this.emit("ping",t):this.emit("pong",t);this._state=0}}},7330:(t,e,r)=>{"use strict";r(1631),r(4016);const{randomFillSync:n}=r(6417),i=r(5196),{EMPTY_BUFFER:s}=r(1872),{isValidStatusCode:o}=r(6746),{mask:a,toBuffer:h}=r(977),u=Buffer.alloc(4);class c{constructor(t,e){this._extensions=e||{},this._socket=t,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(t,e){const r=e.mask&&e.readOnly;let i=e.mask?6:2,s=t.length;t.length>=65536?(i+=8,s=127):t.length>125&&(i+=2,s=126);const o=Buffer.allocUnsafe(r?t.length+i:i);return o[0]=e.fin?128|e.opcode:e.opcode,e.rsv1&&(o[0]|=64),o[1]=s,126===s?o.writeUInt16BE(t.length,2):127===s&&(o.writeUInt32BE(0,2),o.writeUInt32BE(t.length,6)),e.mask?(n(u,0,4),o[1]|=128,o[i-4]=u[0],o[i-3]=u[1],o[i-2]=u[2],o[i-1]=u[3],r?(a(t,u,o,i,t.length),[o]):(a(t,u,t,0,t.length),[o,t])):[o,t]}close(t,e,r,n){let i;if(void 0===t)i=s;else{if("number"!=typeof t||!o(t))throw new TypeError("First argument must be a valid error code number");if(void 0===e||""===e)i=Buffer.allocUnsafe(2),i.writeUInt16BE(t,0);else{const r=Buffer.byteLength(e);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+r),i.writeUInt16BE(t,0),i.write(e,2)}}this._deflating?this.enqueue([this.doClose,i,r,n]):this.doClose(i,r,n)}doClose(t,e,r){this.sendFrame(c.frame(t,{fin:!0,rsv1:!1,opcode:8,mask:e,readOnly:!1}),r)}ping(t,e,r){const n=h(t);if(n.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,n,e,h.readOnly,r]):this.doPing(n,e,h.readOnly,r)}doPing(t,e,r,n){this.sendFrame(c.frame(t,{fin:!0,rsv1:!1,opcode:9,mask:e,readOnly:r}),n)}pong(t,e,r){const n=h(t);if(n.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,n,e,h.readOnly,r]):this.doPong(n,e,h.readOnly,r)}doPong(t,e,r,n){this.sendFrame(c.frame(t,{fin:!0,rsv1:!1,opcode:10,mask:e,readOnly:r}),n)}send(t,e,r){const n=h(t),s=this._extensions[i.extensionName];let o=e.binary?2:1,a=e.compress;if(this._firstFragment?(this._firstFragment=!1,a&&s&&(a=n.length>=s._threshold),this._compress=a):(a=!1,o=0),e.fin&&(this._firstFragment=!0),s){const t={fin:e.fin,rsv1:a,opcode:o,mask:e.mask,readOnly:h.readOnly};this._deflating?this.enqueue([this.dispatch,n,this._compress,t,r]):this.dispatch(n,this._compress,t,r)}else this.sendFrame(c.frame(n,{fin:e.fin,rsv1:!1,opcode:o,mask:e.mask,readOnly:h.readOnly}),r)}dispatch(t,e,r,n){if(!e)return void this.sendFrame(c.frame(t,r),n);const s=this._extensions[i.extensionName];this._bufferedBytes+=t.length,this._deflating=!0,s.compress(t,r.fin,((e,i)=>{if(this._socket.destroyed){const t=new Error("The socket was closed while data was being compressed");"function"==typeof n&&n(t);for(let e=0;e<this._queue.length;e++){const r=this._queue[e][4];"function"==typeof r&&r(t)}}else this._bufferedBytes-=t.length,this._deflating=!1,r.readOnly=!1,this.sendFrame(c.frame(i,r),n),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const t=this._queue.shift();this._bufferedBytes-=t[1].length,Reflect.apply(t[0],this,t.slice(1))}}enqueue(t){this._bufferedBytes+=t[1].length,this._queue.push(t)}sendFrame(t,e){2===t.length?(this._socket.cork(),this._socket.write(t[0]),this._socket.write(t[1],e),this._socket.uncork()):this._socket.write(t[0],e)}}t.exports=c},404:(t,e,r)=>{"use strict";const{Duplex:n}=r(2413);function i(t){t.emit("close")}function s(){!this.destroyed&&this._writableState.finished&&this.destroy()}function o(t){this.removeListener("error",o),this.destroy(),0===this.listenerCount("error")&&this.emit("error",t)}t.exports=function(t,e){let r=!0,a=!0;function h(){r&&t._socket.resume()}t.readyState===t.CONNECTING?t.once("open",(function(){t._receiver.removeAllListeners("drain"),t._receiver.on("drain",h)})):(t._receiver.removeAllListeners("drain"),t._receiver.on("drain",h));const u=new n({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",(function(e){u.push(e)||(r=!1,t._socket.pause())})),t.once("error",(function(t){u.destroyed||(a=!1,u.destroy(t))})),t.once("close",(function(){u.destroyed||u.push(null)})),u._destroy=function(e,r){if(t.readyState===t.CLOSED)return r(e),void process.nextTick(i,u);let n=!1;t.once("error",(function(t){n=!0,r(t)})),t.once("close",(function(){n||r(e),process.nextTick(i,u)})),a&&t.terminate()},u._final=function(e){t.readyState!==t.CONNECTING?null!==t._socket&&(t._socket._writableState.finished?(e(),u._readableState.endEmitted&&u.destroy()):(t._socket.once("finish",(function(){e()})),t.close())):t.once("open",(function(){u._final(e)}))},u._read=function(){t.readyState!==t.OPEN||r||(r=!0,t._receiver._writableState.needDrain||t._socket.resume())},u._write=function(e,r,n){t.readyState!==t.CONNECTING?t.send(e,n):t.once("open",(function(){u._write(e,r,n)}))},u.on("end",s),u.on("error",o),u}},6746:(t,e,r)=>{"use strict";function n(t){return t>=1e3&&t<=1014&&1004!==t&&1005!==t&&1006!==t||t>=3e3&&t<=4999}function i(t){const e=t.length;let r=0;for(;r<e;)if(0==(128&t[r]))r++;else if(192==(224&t[r])){if(r+1===e||128!=(192&t[r+1])||192==(254&t[r]))return!1;r+=2}else if(224==(240&t[r])){if(r+2>=e||128!=(192&t[r+1])||128!=(192&t[r+2])||224===t[r]&&128==(224&t[r+1])||237===t[r]&&160==(224&t[r+1]))return!1;r+=3}else{if(240!=(248&t[r]))return!1;if(r+3>=e||128!=(192&t[r+1])||128!=(192&t[r+2])||128!=(192&t[r+3])||240===t[r]&&128==(240&t[r+1])||244===t[r]&&t[r+1]>143||t[r]>244)return!1;r+=4}return!0}try{let e=r(311);"object"==typeof e&&(e=e.Validation.isValidUTF8),t.exports={isValidStatusCode:n,isValidUTF8:t=>t.length<150?i(t):e(t)}}catch(e){t.exports={isValidStatusCode:n,isValidUTF8:i}}},9284:(t,e,r)=>{"use strict";const n=r(8614),i=r(8605),{createHash:s}=(r(7211),r(1631),r(4016),r(6417)),o=r(5196),a=r(8762),{format:h,parse:u}=r(1503),{GUID:c,kWebSocket:l}=r(1872),f=/^[+/0-9A-Za-z]{22}==$/;function d(t){t._state=2,t.emit("close")}function p(){this.destroy()}function m(t,e,r,n){t.writable&&(r=r||i.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},t.write(`HTTP/1.1 ${e} ${i.STATUS_CODES[e]}\r\n`+Object.keys(n).map((t=>`${t}: ${n[t]}`)).join("\r\n")+"\r\n\r\n"+r)),t.removeListener("error",p),t.destroy()}function g(t){return t.trim()}t.exports=class extends n{constructor(t,e){if(super(),null==(t={maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...t}).port&&!t.server&&!t.noServer||null!=t.port&&(t.server||t.noServer)||t.server&&t.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=t.port?(this._server=i.createServer(((t,e)=>{const r=i.STATUS_CODES[426];e.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),e.end(r)})),this._server.listen(t.port,t.host,t.backlog,e)):t.server&&(this._server=t.server),this._server){const t=this.emit.bind(this,"connection");this._removeListeners=function(t,e){for(const r of Object.keys(e))t.on(r,e[r]);return function(){for(const r of Object.keys(e))t.removeListener(r,e[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(e,r,n)=>{this.handleUpgrade(e,r,n,t)}})}!0===t.perMessageDeflate&&(t.perMessageDeflate={}),t.clientTracking&&(this.clients=new Set),this.options=t,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(t){if(t&&this.once("close",t),2===this._state)return void process.nextTick(d,this);if(1===this._state)return;if(this._state=1,this.clients)for(const t of this.clients)t.terminate();const e=this._server;e&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?e.close(d.bind(void 0,this)):process.nextTick(d,this)}shouldHandle(t){if(this.options.path){const e=t.url.indexOf("?");if((-1!==e?t.url.slice(0,e):t.url)!==this.options.path)return!1}return!0}handleUpgrade(t,e,r,n){e.on("error",p);const i=void 0!==t.headers["sec-websocket-key"]&&t.headers["sec-websocket-key"].trim(),s=+t.headers["sec-websocket-version"],a={};if("GET"!==t.method||"websocket"!==t.headers.upgrade.toLowerCase()||!i||!f.test(i)||8!==s&&13!==s||!this.shouldHandle(t))return m(e,400);if(this.options.perMessageDeflate){const r=new o(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=u(t.headers["sec-websocket-extensions"]);e[o.extensionName]&&(r.accept(e[o.extensionName]),a[o.extensionName]=r)}catch(t){return m(e,400)}}if(this.options.verifyClient){const o={origin:t.headers[""+(8===s?"sec-websocket-origin":"origin")],secure:!(!t.socket.authorized&&!t.socket.encrypted),req:t};if(2===this.options.verifyClient.length)return void this.options.verifyClient(o,((s,o,h,u)=>{if(!s)return m(e,o||401,h,u);this.completeUpgrade(i,a,t,e,r,n)}));if(!this.options.verifyClient(o))return m(e,401)}this.completeUpgrade(i,a,t,e,r,n)}completeUpgrade(t,e,r,n,i,u){if(!n.readable||!n.writable)return n.destroy();if(n[l])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return m(n,503);const f=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${s("sha1").update(t+c).digest("base64")}`],d=new a(null);let y=r.headers["sec-websocket-protocol"];if(y&&(y=y.split(",").map(g),y=this.options.handleProtocols?this.options.handleProtocols(y,r):y[0],y&&(f.push(`Sec-WebSocket-Protocol: ${y}`),d._protocol=y)),e[o.extensionName]){const t=e[o.extensionName].params,r=h({[o.extensionName]:[t]});f.push(`Sec-WebSocket-Extensions: ${r}`),d._extensions=e}this.emit("headers",f,r),n.write(f.concat("\r\n").join("\r\n")),n.removeListener("error",p),d.setSocket(n,i,this.options.maxPayload),this.clients&&(this.clients.add(d),d.on("close",(()=>this.clients.delete(d)))),u(d,r)}}},8762:(t,e,r)=>{"use strict";const n=r(8614),i=r(7211),s=r(8605),o=r(1631),a=r(4016),{randomBytes:h,createHash:u}=r(6417),{URL:c}=r(8835),l=r(5196),f=r(2957),d=r(7330),{BINARY_TYPES:p,EMPTY_BUFFER:m,GUID:g,kStatusCode:y,kWebSocket:v,NOOP:b}=r(1872),{addEventListener:w,removeEventListener:_}=r(62),{format:E,parse:S}=r(1503),{toBuffer:k}=r(977),x=["CONNECTING","OPEN","CLOSING","CLOSED"],N=[8,13];class A extends n{constructor(t,e,r){super(),this._binaryType=p[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=A.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==t?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(e)?e=e.join(", "):"object"==typeof e&&null!==e&&(r=e,e=void 0),P(this,t,e,r)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(t){p.includes(t)&&(this._binaryType=t,this._receiver&&(this._receiver._binaryType=t))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get onclose(){}set onclose(t){}get onerror(){}set onerror(t){}get onopen(){}set onopen(t){}get onmessage(){}set onmessage(t){}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(t,e,r){const n=new f(this.binaryType,this._extensions,this._isServer,r);this._sender=new d(t,this._extensions),this._receiver=n,this._socket=t,n[v]=this,t[v]=this,n.on("conclude",B),n.on("drain",R),n.on("error",C),n.on("message",D),n.on("ping",U),n.on("pong",F),t.setTimeout(0),t.setNoDelay(),e.length>0&&t.unshift(e),t.on("close",q),t.on("data",j),t.on("end",z),t.on("error",G),this._readyState=A.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=A.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[l.extensionName]&&this._extensions[l.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=A.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(t,e){if(this.readyState!==A.CLOSED){if(this.readyState===A.CONNECTING){const t="WebSocket was closed before the connection was established";return I(this,this._req,t)}this.readyState!==A.CLOSING?(this._readyState=A.CLOSING,this._sender.close(t,e,!this._isServer,(t=>{t||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end()}}ping(t,e,r){if(this.readyState===A.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof t?(r=t,t=e=void 0):"function"==typeof e&&(r=e,e=void 0),"number"==typeof t&&(t=t.toString()),this.readyState===A.OPEN?(void 0===e&&(e=!this._isServer),this._sender.ping(t||m,e,r)):O(this,t,r)}pong(t,e,r){if(this.readyState===A.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof t?(r=t,t=e=void 0):"function"==typeof e&&(r=e,e=void 0),"number"==typeof t&&(t=t.toString()),this.readyState===A.OPEN?(void 0===e&&(e=!this._isServer),this._sender.pong(t||m,e,r)):O(this,t,r)}send(t,e,r){if(this.readyState===A.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof e&&(r=e,e={}),"number"==typeof t&&(t=t.toString()),this.readyState!==A.OPEN)return void O(this,t,r);const n={binary:"string"!=typeof t,mask:!this._isServer,compress:!0,fin:!0,...e};this._extensions[l.extensionName]||(n.compress=!1),this._sender.send(t||m,n,r)}terminate(){if(this.readyState!==A.CLOSED){if(this.readyState===A.CONNECTING){const t="WebSocket was closed before the connection was established";return I(this,this._req,t)}this._socket&&(this._readyState=A.CLOSING,this._socket.destroy())}}}function P(t,e,r,n){const o={protocolVersion:N[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!N.includes(o.protocolVersion))throw new RangeError(`Unsupported protocol version: ${o.protocolVersion} (supported versions: ${N.join(", ")})`);let a;e instanceof c?(a=e,t._url=e.href):(a=new c(e),t._url=e);const f="ws+unix:"===a.protocol;if(!(a.host||f&&a.pathname))throw new Error(`Invalid URL: ${t.url}`);const d="wss:"===a.protocol||"https:"===a.protocol,p=d?443:80,m=h(16).toString("base64"),y=d?i.get:s.get;let v;if(o.createConnection=d?T:M,o.defaultPort=o.defaultPort||p,o.port=a.port||p,o.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,o.headers={"Sec-WebSocket-Version":o.protocolVersion,"Sec-WebSocket-Key":m,Connection:"Upgrade",Upgrade:"websocket",...o.headers},o.path=a.pathname+a.search,o.timeout=o.handshakeTimeout,o.perMessageDeflate&&(v=new l(!0!==o.perMessageDeflate?o.perMessageDeflate:{},!1,o.maxPayload),o.headers["Sec-WebSocket-Extensions"]=E({[l.extensionName]:v.offer()})),r&&(o.headers["Sec-WebSocket-Protocol"]=r),o.origin&&(o.protocolVersion<13?o.headers["Sec-WebSocket-Origin"]=o.origin:o.headers.Origin=o.origin),(a.username||a.password)&&(o.auth=`${a.username}:${a.password}`),f){const t=o.path.split(":");o.socketPath=t[0],o.path=t[1]}let b=t._req=y(o);o.timeout&&b.on("timeout",(()=>{I(t,b,"Opening handshake has timed out")})),b.on("error",(e=>{null===b||b.aborted||(b=t._req=null,t._readyState=A.CLOSING,t.emit("error",e),t.emitClose())})),b.on("response",(i=>{const s=i.headers.location,a=i.statusCode;if(s&&o.followRedirects&&a>=300&&a<400){if(++t._redirects>o.maxRedirects)return void I(t,b,"Maximum redirects exceeded");b.abort();const i=new c(s,e);P(t,i,r,n)}else t.emit("unexpected-response",b,i)||I(t,b,`Unexpected server response: ${i.statusCode}`)})),b.on("upgrade",((e,n,i)=>{if(t.emit("upgrade",e),t.readyState!==A.CONNECTING)return;b=t._req=null;const s=u("sha1").update(m+g).digest("base64");if(e.headers["sec-websocket-accept"]!==s)return void I(t,n,"Invalid Sec-WebSocket-Accept header");const a=e.headers["sec-websocket-protocol"],h=(r||"").split(/, */);let c;if(!r&&a?c="Server sent a subprotocol but none was requested":r&&!a?c="Server sent no subprotocol":a&&!h.includes(a)&&(c="Server sent an invalid subprotocol"),c)return void I(t,n,c);a&&(t._protocol=a);const f=e.headers["sec-websocket-extensions"];if(void 0!==f){if(!v){return void I(t,n,"Server sent a Sec-WebSocket-Extensions header but no extension was requested")}let e;try{e=S(f)}catch(e){return void I(t,n,"Invalid Sec-WebSocket-Extensions header")}const r=Object.keys(e);if(r.length){if(1!==r.length||r[0]!==l.extensionName){return void I(t,n,"Server indicated an extension that was not requested")}try{v.accept(e[l.extensionName])}catch(e){return void I(t,n,"Invalid Sec-WebSocket-Extensions header")}t._extensions[l.extensionName]=v}}t.setSocket(n,i,o.maxPayload)}))}function M(t){return t.path=t.socketPath,o.connect(t)}function T(t){return t.path=void 0,t.servername||""===t.servername||(t.servername=o.isIP(t.host)?"":t.host),a.connect(t)}function I(t,e,r){t._readyState=A.CLOSING;const n=new Error(r);Error.captureStackTrace(n,I),e.setHeader?(e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),e.once("abort",t.emitClose.bind(t)),t.emit("error",n)):(e.destroy(n),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function O(t,e,r){if(e){const r=k(e).length;t._socket?t._sender._bufferedBytes+=r:t._bufferedAmount+=r}if(r){r(new Error(`WebSocket is not open: readyState ${t.readyState} (${x[t.readyState]})`))}}function B(t,e){const r=this[v];r._socket.removeListener("data",j),r._socket.resume(),r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,1005===t?r.close():r.close(t,e)}function R(){this[v]._socket.resume()}function C(t){const e=this[v];e._socket.removeListener("data",j),e._socket.resume(),e.close(t[y]),e.emit("error",t)}function L(){this[v].emitClose()}function D(t){this[v].emit("message",t)}function U(t){const e=this[v];e.pong(t,!e._isServer,b),e.emit("ping",t)}function F(t){this[v].emit("pong",t)}function q(){const t=this[v];this.removeListener("close",q),this.removeListener("end",z),t._readyState=A.CLOSING,t._socket.read(),t._receiver.end(),this.removeListener("data",j),this[v]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",L),t._receiver.on("finish",L))}function j(t){this[v]._receiver.write(t)||this.pause()}function z(){const t=this[v];t._readyState=A.CLOSING,t._receiver.end(),this.end()}function G(){const t=this[v];this.removeListener("error",G),this.on("error",b),t&&(t._readyState=A.CLOSING,this.destroy())}Object.defineProperty(A,"CONNECTING",{enumerable:!0,value:x.indexOf("CONNECTING")}),Object.defineProperty(A.prototype,"CONNECTING",{enumerable:!0,value:x.indexOf("CONNECTING")}),Object.defineProperty(A,"OPEN",{enumerable:!0,value:x.indexOf("OPEN")}),Object.defineProperty(A.prototype,"OPEN",{enumerable:!0,value:x.indexOf("OPEN")}),Object.defineProperty(A,"CLOSING",{enumerable:!0,value:x.indexOf("CLOSING")}),Object.defineProperty(A.prototype,"CLOSING",{enumerable:!0,value:x.indexOf("CLOSING")}),Object.defineProperty(A,"CLOSED",{enumerable:!0,value:x.indexOf("CLOSED")}),Object.defineProperty(A.prototype,"CLOSED",{enumerable:!0,value:x.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach((t=>{Object.defineProperty(A.prototype,t,{enumerable:!0})})),["open","error","close","message"].forEach((t=>{Object.defineProperty(A.prototype,`on${t}`,{enumerable:!0,get(){const e=this.listeners(t);for(let t=0;t<e.length;t++)if(e[t]._listener)return e[t]._listener},set(e){const r=this.listeners(t);for(let e=0;e<r.length;e++)r[e]._listener&&this.removeListener(t,r[e]);this.addEventListener(t,e)}})})),A.prototype.addEventListener=w,A.prototype.removeEventListener=_,t.exports=A},2357:t=>{"use strict";t.exports=require("assert")},4293:t=>{"use strict";t.exports=require("buffer")},7619:t=>{"use strict";t.exports=require("constants")},6417:t=>{"use strict";t.exports=require("crypto")},8614:t=>{"use strict";t.exports=require("events")},5747:t=>{"use strict";t.exports=require("fs")},8605:t=>{"use strict";t.exports=require("http")},7211:t=>{"use strict";t.exports=require("https")},1631:t=>{"use strict";t.exports=require("net")},2087:t=>{"use strict";t.exports=require("os")},5622:t=>{"use strict";t.exports=require("path")},2413:t=>{"use strict";t.exports=require("stream")},4016:t=>{"use strict";t.exports=require("tls")},8835:t=>{"use strict";t.exports=require("url")},1669:t=>{"use strict";t.exports=require("util")},8761:t=>{"use strict";t.exports=require("zlib")}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var n={};return(()=>{"use strict";r.r(n),r.d(n,{EnfaceAuth:()=>Es});const t=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const e=function(e){return"string"==typeof e&&t.test(e)};var i=r(6417),s=r.n(i);const o=new Uint8Array(256);let a=o.length;function h(){return a>o.length-16&&(s().randomFillSync(o),a=0),o.slice(a,a+=16)}const u=[];for(let t=0;t<256;++t)u.push((t+256).toString(16).substr(1));const c=function(t,r=0){const n=(u[t[r+0]]+u[t[r+1]]+u[t[r+2]]+u[t[r+3]]+"-"+u[t[r+4]]+u[t[r+5]]+"-"+u[t[r+6]]+u[t[r+7]]+"-"+u[t[r+8]]+u[t[r+9]]+"-"+u[t[r+10]]+u[t[r+11]]+u[t[r+12]]+u[t[r+13]]+u[t[r+14]]+u[t[r+15]]).toLowerCase();if(!e(n))throw TypeError("Stringified UUID is invalid");return n};let l,f,d=0,p=0;const m=function(t,e,r){let n=e&&r||0;const i=e||new Array(16);let s=(t=t||{}).node||l,o=void 0!==t.clockseq?t.clockseq:f;if(null==s||null==o){const e=t.random||(t.rng||h)();null==s&&(s=l=[1|e[0],e[1],e[2],e[3],e[4],e[5]]),null==o&&(o=f=16383&(e[6]<<8|e[7]))}let a=void 0!==t.msecs?t.msecs:Date.now(),u=void 0!==t.nsecs?t.nsecs:p+1;const m=a-d+(u-p)/1e4;if(m<0&&void 0===t.clockseq&&(o=o+1&16383),(m<0||a>d)&&void 0===t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=a,p=u,f=o,a+=122192928e5;const g=(1e4*(268435455&a)+u)%4294967296;i[n++]=g>>>24&255,i[n++]=g>>>16&255,i[n++]=g>>>8&255,i[n++]=255&g;const y=a/4294967296*1e4&268435455;i[n++]=y>>>8&255,i[n++]=255&y,i[n++]=y>>>24&15|16,i[n++]=y>>>16&255,i[n++]=o>>>8|128,i[n++]=255&o;for(let t=0;t<6;++t)i[n+t]=s[t];return e||c(i)};var g=r(8777),y=r.n(g),v=r(7211),b=r.n(v),w="check",_="ready",E="auth",S=function(t,e){if(!0!==t)throw new Error(e)},k=function(t,e,r){if(t===e)throw new Error(r)};let x=!1,N=!1;const A={debug:1,default:2,info:2,warning:3,error:4,off:5};let P=A.default,M=null;const T=function(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach((e=>{try{if("test"!=="test".normalize(e))throw new Error("bad normalize")}catch(r){t.push(e)}})),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();var I,O;!function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"}(I||(I={})),function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED"}(O||(O={}));class B{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,e){const r=t.toLowerCase();null==A[r]&&this.throwArgumentError("invalid log level name","logLevel",t),P>A[r]||console.log.apply(console,e)}debug(...t){this._log(B.levels.DEBUG,t)}info(...t){this._log(B.levels.INFO,t)}warn(...t){this._log(B.levels.WARNING,t)}makeError(t,e,r){if(N)return this.makeError("censored error",e,{});e||(e=B.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach((t=>{try{n.push(t+"="+JSON.stringify(r[t]))}catch(e){n.push(t+"="+JSON.stringify(r[t].toString()))}})),n.push(`code=${e}`),n.push(`version=${this.version}`);const i=t;n.length&&(t+=" ("+n.join(", ")+")");const s=new Error(t);return s.reason=i,s.code=e,Object.keys(r).forEach((function(t){s[t]=r[t]})),s}throwError(t,e,r){throw this.makeError(t,e,r)}throwArgumentError(t,e,r){return this.throwError(t,B.errors.INVALID_ARGUMENT,{argument:e,value:r})}assert(t,e,r,n){t||this.throwError(e,r,n)}assertArgument(t,e,r,n){t||this.throwArgumentError(e,r,n)}checkNormalize(t){null==t&&(t="platform missing String.prototype.normalize"),T&&this.throwError("platform missing String.prototype.normalize",B.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:T})}checkSafeUint53(t,e){"number"==typeof t&&(null==e&&(e="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(e,B.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(e,B.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,e,r){r=r?": "+r:"",t<e&&this.throwError("missing argument"+r,B.errors.MISSING_ARGUMENT,{count:t,expectedCount:e}),t>e&&this.throwError("too many arguments"+r,B.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:e})}checkNew(t,e){t!==Object&&null!=t||this.throwError("missing new",B.errors.MISSING_NEW,{name:e.name})}checkAbstract(t,e){t===e?this.throwError("cannot instantiate abstract class "+JSON.stringify(e.name)+" directly; use a sub-class",B.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",B.errors.MISSING_NEW,{name:e.name})}static globalLogger(){return M||(M=new B("logger/5.4.0")),M}static setCensorship(t,e){if(!t&&e&&this.globalLogger().throwError("cannot permanently disable censorship",B.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),x){if(!t)return;this.globalLogger().throwError("error censorship permanent",B.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}N=!!t,x=!!e}static setLogLevel(t){const e=A[t.toLowerCase()];null!=e?P=e:B.globalLogger().warn("invalid log level - "+t)}static from(t){return new B(t)}}B.errors=O,B.levels=I;const R=new B("bytes/5.4.0");function C(t){return!!t.toHexString}function L(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return L(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function D(t){return z(t)&&!(t.length%2)||U(t)}function U(t){if(null==t)return!1;if(t.constructor===Uint8Array)return!0;if("string"==typeof t)return!1;if(null==t.length)return!1;for(let e=0;e<t.length;e++){const r=t[e];if("number"!=typeof r||r<0||r>=256||r%1)return!1}return!0}function F(t,e){if(e||(e={}),"number"==typeof t){R.checkSafeUint53(t,"invalid arrayify value");const e=[];for(;t;)e.unshift(255&t),t=parseInt(String(t/256));return 0===e.length&&e.push(0),L(new Uint8Array(e))}if(e.allowMissingPrefix&&"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),C(t)&&(t=t.toHexString()),z(t)){let r=t.substring(2);r.length%2&&("left"===e.hexPad?r="0x0"+r.substring(2):"right"===e.hexPad?r+="0":R.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let t=0;t<r.length;t+=2)n.push(parseInt(r.substring(t,t+2),16));return L(new Uint8Array(n))}return U(t)?L(new Uint8Array(t)):R.throwArgumentError("invalid arrayify value","value",t)}function q(t){const e=t.map((t=>F(t))),r=e.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(r);return e.reduce(((t,e)=>(n.set(e,t),t+e.length)),0),L(n)}function j(t){let e=F(t);if(0===e.length)return e;let r=0;for(;r<e.length&&0===e[r];)r++;return r&&(e=e.slice(r)),e}function z(t,e){return!("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/))&&(!e||t.length===2+2*e)}const G="0123456789abcdef";function $(t,e){if(e||(e={}),"number"==typeof t){R.checkSafeUint53(t,"invalid hexlify value");let e="";for(;t;)e=G[15&t]+e,t=Math.floor(t/16);return e.length?(e.length%2&&(e="0"+e),"0x"+e):"0x00"}if("bigint"==typeof t)return(t=t.toString(16)).length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),C(t))return t.toHexString();if(z(t))return t.length%2&&("left"===e.hexPad?t="0x0"+t.substring(2):"right"===e.hexPad?t+="0":R.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(U(t)){let e="0x";for(let r=0;r<t.length;r++){let n=t[r];e+=G[(240&n)>>4]+G[15&n]}return e}return R.throwArgumentError("invalid hexlify value","value",t)}function V(t){if("string"!=typeof t)t=$(t);else if(!z(t)||t.length%2)return null;return(t.length-2)/2}function H(t,e,r){return"string"!=typeof t?t=$(t):(!z(t)||t.length%2)&&R.throwArgumentError("invalid hexData","value",t),e=2+2*e,null!=r?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function W(t){let e="0x";return t.forEach((t=>{e+=$(t).substring(2)})),e}function K(t){const e=function(t){"string"!=typeof t&&(t=$(t));z(t)||R.throwArgumentError("invalid hex string","value",t);t=t.substring(2);let e=0;for(;e<t.length&&"0"===t[e];)e++;return"0x"+t.substring(e)}($(t,{hexPad:"left"}));return"0x"===e?"0x0":e}function J(t,e){for("string"!=typeof t?t=$(t):z(t)||R.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&R.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function Z(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0};if(D(t)){const r=F(t);65!==r.length&&R.throwArgumentError("invalid signature string; must be 65 bytes","signature",t),e.r=$(r.slice(0,32)),e.s=$(r.slice(32,64)),e.v=r[64],e.v<27&&(0===e.v||1===e.v?e.v+=27:R.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=$(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,null!=e._vs){const r=function(t,e){(t=F(t)).length>e&&R.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),L(r)}(F(e._vs),32);e._vs=$(r);const n=r[0]>=128?1:0;null==e.recoveryParam?e.recoveryParam=n:e.recoveryParam!==n&&R.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),r[0]&=127;const i=$(r);null==e.s?e.s=i:e.s!==i&&R.throwArgumentError("signature v mismatch _vs","signature",t)}null==e.recoveryParam?null==e.v?R.throwArgumentError("signature missing v and recoveryParam","signature",t):0===e.v||1===e.v?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2:null==e.v?e.v=27+e.recoveryParam:e.recoveryParam!==1-e.v%2&&R.throwArgumentError("signature recoveryParam mismatch v","signature",t),null!=e.r&&z(e.r)?e.r=J(e.r,32):R.throwArgumentError("signature missing or invalid r","signature",t),null!=e.s&&z(e.s)?e.s=J(e.s,32):R.throwArgumentError("signature missing or invalid s","signature",t);const r=F(e.s);r[0]>=128&&R.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=$(r);e._vs&&(z(e._vs)||R.throwArgumentError("signature invalid _vs","signature",t),e._vs=J(e._vs,32)),null==e._vs?e._vs=n:e._vs!==n&&R.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e}var X=r(3550),Y=r.n(X);var Q=Y().BN;const tt=new B("bignumber/5.4.0"),et={},rt=9007199254740991;let nt=!1;class it{constructor(t,e){tt.checkNew(new.target,it),t!==et&&tt.throwError("cannot call constructor directly; use BigNumber.from",B.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=e,this._isBigNumber=!0,Object.freeze(this)}fromTwos(t){return ot(at(this).fromTwos(t))}toTwos(t){return ot(at(this).toTwos(t))}abs(){return"-"===this._hex[0]?it.from(this._hex.substring(1)):this}add(t){return ot(at(this).add(at(t)))}sub(t){return ot(at(this).sub(at(t)))}div(t){return it.from(t).isZero()&&ht("division by zero","div"),ot(at(this).div(at(t)))}mul(t){return ot(at(this).mul(at(t)))}mod(t){const e=at(t);return e.isNeg()&&ht("cannot modulo negative values","mod"),ot(at(this).umod(e))}pow(t){const e=at(t);return e.isNeg()&&ht("cannot raise to negative values","pow"),ot(at(this).pow(e))}and(t){const e=at(t);return(this.isNegative()||e.isNeg())&&ht("cannot 'and' negative values","and"),ot(at(this).and(e))}or(t){const e=at(t);return(this.isNegative()||e.isNeg())&&ht("cannot 'or' negative values","or"),ot(at(this).or(e))}xor(t){const e=at(t);return(this.isNegative()||e.isNeg())&&ht("cannot 'xor' negative values","xor"),ot(at(this).xor(e))}mask(t){return(this.isNegative()||t<0)&&ht("cannot mask negative values","mask"),ot(at(this).maskn(t))}shl(t){return(this.isNegative()||t<0)&&ht("cannot shift negative values","shl"),ot(at(this).shln(t))}shr(t){return(this.isNegative()||t<0)&&ht("cannot shift negative values","shr"),ot(at(this).shrn(t))}eq(t){return at(this).eq(at(t))}lt(t){return at(this).lt(at(t))}lte(t){return at(this).lte(at(t))}gt(t){return at(this).gt(at(t))}gte(t){return at(this).gte(at(t))}isNegative(){return"-"===this._hex[0]}isZero(){return at(this).isZero()}toNumber(){try{return at(this).toNumber()}catch(t){ht("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(t){}return tt.throwError("this platform does not support BigInt",B.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?nt||(nt=!0,tt.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?tt.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",B.errors.UNEXPECTED_ARGUMENT,{}):tt.throwError("BigNumber.toString does not accept parameters",B.errors.UNEXPECTED_ARGUMENT,{})),at(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof it)return t;if("string"==typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new it(et,st(t)):t.match(/^-?[0-9]+$/)?new it(et,st(new Q(t))):tt.throwArgumentError("invalid BigNumber string","value",t);if("number"==typeof t)return t%1&&ht("underflow","BigNumber.from",t),(t>=rt||t<=-rt)&&ht("overflow","BigNumber.from",t),it.from(String(t));const e=t;if("bigint"==typeof e)return it.from(e.toString());if(U(e))return it.from($(e));if(e)if(e.toHexString){const t=e.toHexString();if("string"==typeof t)return it.from(t)}else{let t=e._hex;if(null==t&&"BigNumber"===e.type&&(t=e.hex),"string"==typeof t&&(z(t)||"-"===t[0]&&z(t.substring(1))))return it.from(t)}return tt.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!(!t||!t._isBigNumber)}}function st(t){if("string"!=typeof t)return st(t.toString(16));if("-"===t[0])return"-"===(t=t.substring(1))[0]&&tt.throwArgumentError("invalid hex","value",t),"0x00"===(t=st(t))?t:"-"+t;if("0x"!==t.substring(0,2)&&(t="0x"+t),"0x"===t)return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&"0x00"===t.substring(0,4);)t="0x"+t.substring(4);return t}function ot(t){return it.from(st(t))}function at(t){const e=it.from(t).toHexString();return"-"===e[0]?new Q("-"+e.substring(3),16):new Q(e.substring(2),16)}function ht(t,e,r){const n={fault:t,operation:e};return null!=r&&(n.value=r),tt.throwError(t,B.errors.NUMERIC_FAULT,n)}var ut=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))};const ct=new B("properties/5.4.0");function lt(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function ft(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||"object"!=typeof t.prototype)break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function dt(t){return ut(this,void 0,void 0,(function*(){const e=Object.keys(t).map((e=>{const r=t[e];return Promise.resolve(r).then((t=>({key:e,value:t})))}));return(yield Promise.all(e)).reduce(((t,e)=>(t[e.key]=e.value,t)),{})}))}function pt(t){const e={};for(const r in t)e[r]=t[r];return e}const mt={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function gt(t){if(null==t||mt[typeof t])return!0;if(Array.isArray(t)||"object"==typeof t){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++)if(!gt(t[e[r]]))return!1;return!0}return ct.throwArgumentError("Cannot deepCopy "+typeof t,"object",t)}function yt(t){if(gt(t))return t;if(Array.isArray(t))return Object.freeze(t.map((t=>vt(t))));if("object"==typeof t){const e={};for(const r in t){const n=t[r];void 0!==n&&lt(e,r,vt(n))}return e}return ct.throwArgumentError("Cannot deepCopy "+typeof t,"object",t)}function vt(t){return yt(t)}class bt{constructor(t){for(const e in t)this[e]=vt(t[e])}}const wt="abi/5.4.0",_t=new B(wt);class Et{constructor(t,e,r,n){this.name=t,this.type=e,this.localName=r,this.dynamic=n}_throwError(t,e){_t.throwArgumentError(t,this.localName,e)}}class St{constructor(t){lt(this,"wordSize",t||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(t)}get data(){return W(this._data)}get length(){return this._dataLength}_writeData(t){return this._data.push(t),this._dataLength+=t.length,t.length}appendWriter(t){return this._writeData(q(t._data))}writeBytes(t){let e=F(t);const r=e.length%this.wordSize;return r&&(e=q([e,this._padding.slice(r)])),this._writeData(e)}_getValue(t){let e=F(it.from(t));return e.length>this.wordSize&&_t.throwError("value out-of-bounds",B.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:e.length}),e.length%this.wordSize&&(e=q([this._padding.slice(e.length%this.wordSize),e])),e}writeValue(t){return this._writeData(this._getValue(t))}writeUpdatableValue(){const t=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,e=>{this._data[t]=this._getValue(e)}}}class kt{constructor(t,e,r,n){lt(this,"_data",F(t)),lt(this,"wordSize",e||32),lt(this,"_coerceFunc",r),lt(this,"allowLoose",n),this._offset=0}get data(){return $(this._data)}get consumed(){return this._offset}static coerce(t,e){let r=t.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(e=e.toNumber()),e}coerce(t,e){return this._coerceFunc?this._coerceFunc(t,e):kt.coerce(t,e)}_peekBytes(t,e,r){let n=Math.ceil(e/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+e<=this._data.length?n=e:_t.throwError("data out-of-bounds",B.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}subReader(t){return new kt(this._data.slice(this._offset+t),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(t,e){let r=this._peekBytes(0,t,!!e);return this._offset+=r.length,r.slice(0,t)}readValue(){return it.from(this.readBytes(this.wordSize))}}var xt=r(1094),Nt=r.n(xt);function At(t){return"0x"+Nt().keccak_256(F(t))}const Pt=new B("rlp/5.4.0");function Mt(t){const e=[];for(;t;)e.unshift(255&t),t>>=8;return e}function Tt(t,e,r){let n=0;for(let i=0;i<r;i++)n=256*n+t[e+i];return n}function It(t){if(Array.isArray(t)){let e=[];if(t.forEach((function(t){e=e.concat(It(t))})),e.length<=55)return e.unshift(192+e.length),e;const r=Mt(e.length);return r.unshift(247+r.length),r.concat(e)}D(t)||Pt.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(F(t));if(1===e.length&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=Mt(e.length);return r.unshift(183+r.length),r.concat(e)}function Ot(t){return $(It(t))}function Bt(t,e,r,n){const i=[];for(;r<e+1+n;){const s=Rt(t,r);i.push(s.result),(r+=s.consumed)>e+1+n&&Pt.throwError("child data too short",B.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function Rt(t,e){if(0===t.length&&Pt.throwError("data too short",B.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&Pt.throwError("data short segment too short",B.errors.BUFFER_OVERRUN,{});const n=Tt(t,e+1,r);return e+1+r+n>t.length&&Pt.throwError("data long segment too short",B.errors.BUFFER_OVERRUN,{}),Bt(t,e,e+1+r,r+n)}if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&Pt.throwError("data array too short",B.errors.BUFFER_OVERRUN,{}),Bt(t,e,e+1,r)}if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&Pt.throwError("data array too short",B.errors.BUFFER_OVERRUN,{});const n=Tt(t,e+1,r);e+1+r+n>t.length&&Pt.throwError("data array too short",B.errors.BUFFER_OVERRUN,{});return{consumed:1+r+n,result:$(t.slice(e+1+r,e+1+r+n))}}if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&Pt.throwError("data too short",B.errors.BUFFER_OVERRUN,{});return{consumed:1+r,result:$(t.slice(e+1,e+1+r))}}return{consumed:1,result:$(t[e])}}function Ct(t){const e=F(t),r=Rt(e,0);return r.consumed!==e.length&&Pt.throwArgumentError("invalid rlp data","data",t),r.result}const Lt=new B("address/5.4.0");function Dt(t){z(t,20)||Lt.throwArgumentError("invalid address","address",t);const e=(t=t.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let t=0;t<40;t++)r[t]=e[t].charCodeAt(0);const n=F(At(r));for(let t=0;t<40;t+=2)n[t>>1]>>4>=8&&(e[t]=e[t].toUpperCase()),(15&n[t>>1])>=8&&(e[t+1]=e[t+1].toUpperCase());return"0x"+e.join("")}const Ut={};for(let t=0;t<10;t++)Ut[String(t)]=String(t);for(let t=0;t<26;t++)Ut[String.fromCharCode(65+t)]=String(10+t);const Ft=Math.floor((qt=9007199254740991,Math.log10?Math.log10(qt):Math.log(qt)/Math.LN10));var qt;function jt(t){let e=(t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00").split("").map((t=>Ut[t])).join("");for(;e.length>=Ft;){let t=e.substring(0,Ft);e=parseInt(t,10)%97+e.substring(t.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function zt(t){let e=null;if("string"!=typeof t&&Lt.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==t.substring(0,2)&&(t="0x"+t),e=Dt(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&Lt.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==jt(t)&&Lt.throwArgumentError("bad icap checksum","address",t),r=t.substring(4),e=new Q(r,36).toString(16);e.length<40;)e="0"+e;e=Dt("0x"+e)}else Lt.throwArgumentError("invalid address","address",t);var r;return e}function Gt(t){let e=null;try{e=zt(t.from)}catch(e){Lt.throwArgumentError("missing from address","transaction",t)}return zt(H(At(Ot([e,j(F(it.from(t.nonce).toHexString()))])),12))}const $t=new B("strings/5.4.0");var Vt,Ht;function Wt(t,e,r,n,i){if(t===Ht.BAD_PREFIX||t===Ht.UNEXPECTED_CONTINUE){let t=0;for(let n=e+1;n<r.length&&r[n]>>6==2;n++)t++;return t}return t===Ht.OVERRUN?r.length-e-1:0}!function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"}(Vt||(Vt={})),function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"}(Ht||(Ht={}));const Kt=Object.freeze({error:function(t,e,r,n,i){return $t.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)},ignore:Wt,replace:function(t,e,r,n,i){return t===Ht.OVERLONG?(n.push(i),0):(n.push(65533),Wt(t,e,r))}});function Jt(t,e){null==e&&(e=Kt.error),t=F(t);const r=[];let n=0;for(;n<t.length;){const i=t[n++];if(i>>7==0){r.push(i);continue}let s=null,o=null;if(192==(224&i))s=1,o=127;else if(224==(240&i))s=2,o=2047;else{if(240!=(248&i)){n+=e(128==(192&i)?Ht.UNEXPECTED_CONTINUE:Ht.BAD_PREFIX,n-1,t,r);continue}s=3,o=65535}if(n-1+s>=t.length){n+=e(Ht.OVERRUN,n-1,t,r);continue}let a=i&(1<<8-s-1)-1;for(let i=0;i<s;i++){let i=t[n];if(128!=(192&i)){n+=e(Ht.MISSING_CONTINUE,n,t,r),a=null;break}a=a<<6|63&i,n++}null!==a&&(a>1114111?n+=e(Ht.OUT_OF_RANGE,n-1-s,t,r,a):a>=55296&&a<=57343?n+=e(Ht.UTF16_SURROGATE,n-1-s,t,r,a):a<=o?n+=e(Ht.OVERLONG,n-1-s,t,r,a):r.push(a))}return r}function Zt(t,e=Vt.current){e!=Vt.current&&($t.checkNormalize(),t=t.normalize(e));let r=[];for(let e=0;e<t.length;e++){const n=t.charCodeAt(e);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){e++;const i=t.charCodeAt(e);if(e>=t.length||56320!=(64512&i))throw new Error("invalid utf-8 string");const s=65536+((1023&n)<<10)+(1023&i);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(63&s|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return F(r)}function Xt(t){return t.map((t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10&1023),56320+(1023&t))))).join("")}function Yt(t,e){return Xt(Jt(t,e))}function Qt(t,e=Vt.current){return Jt(Zt(t,e))}function te(t){return At(Zt(t))}class ee extends Et{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){try{zt(e)}catch(t){this._throwError(t.message,e)}return t.writeValue(e)}decode(t){return zt(J(t.readValue().toHexString(),20))}}class re extends Et{constructor(t){super(t.name,t.type,void 0,t.dynamic),this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}const ne=new B(wt);function ie(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let t={};n=e.map((e=>{const n=e.localName;return n||ne.throwError("cannot encode object for signature with missing names",B.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),t[n]&&ne.throwError("cannot encode object for signature with duplicate names",B.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),t[n]=!0,r[n]}))}else ne.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&ne.throwArgumentError("types/value length mismatch","tuple",r);let i=new St(t.wordSize),s=new St(t.wordSize),o=[];e.forEach(((t,e)=>{let r=n[e];if(t.dynamic){let e=s.length;t.encode(s,r);let n=i.writeUpdatableValue();o.push((t=>{n(t+e)}))}else t.encode(i,r)})),o.forEach((t=>{t(i.length)}));let a=t.appendWriter(i);return a+=t.appendWriter(s),a}function se(t,e){let r=[],n=t.subReader(0);e.forEach((e=>{let i=null;if(e.dynamic){let r=t.readValue(),s=n.subReader(r.toNumber());try{i=e.decode(s)}catch(t){if(t.code===B.errors.BUFFER_OVERRUN)throw t;i=t,i.baseType=e.name,i.name=e.localName,i.type=e.type}}else try{i=e.decode(t)}catch(t){if(t.code===B.errors.BUFFER_OVERRUN)throw t;i=t,i.baseType=e.name,i.name=e.localName,i.type=e.type}null!=i&&r.push(i)}));const i=e.reduce(((t,e)=>{const r=e.localName;return r&&(t[r]||(t[r]=0),t[r]++),t}),{});e.forEach(((t,e)=>{let n=t.localName;if(!n||1!==i[n])return;if("length"===n&&(n="_length"),null!=r[n])return;const s=r[e];s instanceof Error?Object.defineProperty(r,n,{get:()=>{throw s}}):r[n]=s}));for(let t=0;t<r.length;t++){const e=r[t];e instanceof Error&&Object.defineProperty(r,t,{get:()=>{throw e}})}return Object.freeze(r)}class oe extends Et{constructor(t,e,r){super("array",t.type+"["+(e>=0?e:"")+"]",r,-1===e||t.dynamic),this.coder=t,this.length=e}defaultValue(){const t=this.coder.defaultValue(),e=[];for(let r=0;r<this.length;r++)e.push(t);return e}encode(t,e){Array.isArray(e)||this._throwError("expected array value",e);let r=this.length;-1===r&&(r=e.length,t.writeValue(e.length)),ne.checkArgumentCount(e.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let t=0;t<e.length;t++)n.push(this.coder);return ie(t,n,e)}decode(t){let e=this.length;-1===e&&(e=t.readValue().toNumber(),32*e>t._data.length&&ne.throwError("insufficient data length",B.errors.BUFFER_OVERRUN,{length:t._data.length,count:e}));let r=[];for(let t=0;t<e;t++)r.push(new re(this.coder));return t.coerce(this.name,se(t,r))}}class ae extends Et{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){return t.writeValue(e?1:0)}decode(t){return t.coerce(this.type,!t.readValue().isZero())}}class he extends Et{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=F(e);let r=t.writeValue(e.length);return r+=t.writeBytes(e),r}decode(t){return t.readBytes(t.readValue().toNumber(),!0)}}class ue extends he{constructor(t){super("bytes",t)}decode(t){return t.coerce(this.name,$(super.decode(t)))}}class ce extends Et{constructor(t,e){let r="bytes"+String(t);super(r,r,e,!1),this.size=t}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(t,e){let r=F(e);return r.length!==this.size&&this._throwError("incorrect data length",e),t.writeBytes(r)}decode(t){return t.coerce(this.name,$(t.readBytes(this.size)))}}class le extends Et{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return null!=e&&this._throwError("not null",e),t.writeBytes([])}decode(t){return t.readBytes(0),t.coerce(this.name,null)}}const fe=it.from(-1),de=it.from(0),pe=it.from(1),me=it.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class ge extends Et{constructor(t,e,r){const n=(e?"int":"uint")+8*t;super(n,n,r,!1),this.size=t,this.signed=e}defaultValue(){return 0}encode(t,e){let r=it.from(e),n=me.mask(8*t.wordSize);if(this.signed){let t=n.mask(8*this.size-1);(r.gt(t)||r.lt(t.add(pe).mul(fe)))&&this._throwError("value out-of-bounds",e)}else(r.lt(de)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",e);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*t.wordSize)),t.writeValue(r)}decode(t){let e=t.readValue().mask(8*this.size);return this.signed&&(e=e.fromTwos(8*this.size)),t.coerce(this.name,e)}}class ye extends he{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,Zt(e))}decode(t){return Yt(super.decode(t))}}class ve extends Et{constructor(t,e){let r=!1;const n=[];t.forEach((t=>{t.dynamic&&(r=!0),n.push(t.type)}));super("tuple","tuple("+n.join(",")+")",e,r),this.coders=t}defaultValue(){const t=[];this.coders.forEach((e=>{t.push(e.defaultValue())}));const e=this.coders.reduce(((t,e)=>{const r=e.localName;return r&&(t[r]||(t[r]=0),t[r]++),t}),{});return this.coders.forEach(((r,n)=>{let i=r.localName;i&&1===e[i]&&("length"===i&&(i="_length"),null==t[i]&&(t[i]=t[n]))})),Object.freeze(t)}encode(t,e){return ie(t,this.coders,e)}decode(t){return t.coerce(this.name,se(t,this.coders))}}const be=new B(wt),we={};let _e={calldata:!0,memory:!0,storage:!0},Ee={calldata:!0,memory:!0};function Se(t,e){if("bytes"===t||"string"===t){if(_e[e])return!0}else if("address"===t){if("payable"===e)return!0}else if((t.indexOf("[")>=0||"tuple"===t)&&Ee[e])return!0;return(_e[e]||"payable"===e)&&be.throwArgumentError("invalid modifier","name",e),!1}function ke(t,e){for(let r in e)lt(t,r,e[r])}const xe=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),Ne=new RegExp(/^(.*)\[([0-9]*)\]$/);class Ae{constructor(t,e){t!==we&&be.throwError("use fromString",B.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),ke(this,e);let r=this.type.match(Ne);ke(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:Ae.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(t){if(t||(t=xe.sighash),xe[t]||be.throwArgumentError("invalid format type","format",t),t===xe.json){let e={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(e.indexed=this.indexed),this.components&&(e.components=this.components.map((e=>JSON.parse(e.format(t))))),JSON.stringify(e)}let e="";return"array"===this.baseType?(e+=this.arrayChildren.format(t),e+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(t!==xe.sighash&&(e+=this.type),e+="("+this.components.map((e=>e.format(t))).join(t===xe.full?", ":",")+")"):e+=this.type,t!==xe.sighash&&(!0===this.indexed&&(e+=" indexed"),t===xe.full&&this.name&&(e+=" "+this.name)),e}static from(t,e){return"string"==typeof t?Ae.fromString(t,e):Ae.fromObject(t)}static fromObject(t){return Ae.isParamType(t)?t:new Ae(we,{name:t.name||null,type:Ue(t.type),indexed:null==t.indexed?null:!!t.indexed,components:t.components?t.components.map(Ae.fromObject):null})}static fromString(t,e){return r=function(t,e){let r=t;function n(e){be.throwArgumentError(`unexpected character at position ${e}`,"param",t)}function i(t){let r={type:"",name:"",parent:t,state:{allowType:!0}};return e&&(r.indexed=!1),r}t=t.replace(/\s/g," ");let s={type:"",name:"",state:{allowType:!0}},o=s;for(let r=0;r<t.length;r++){let s=t[r];switch(s){case"(":o.state.allowType&&""===o.type?o.type="tuple":o.state.allowParams||n(r),o.state.allowType=!1,o.type=Ue(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,"indexed"===o.name&&(e||n(r),o.indexed=!0,o.name=""),Se(o.type,o.name)&&(o.name=""),o.type=Ue(o.type);let t=o;o=o.parent,o||n(r),delete t.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,"indexed"===o.name&&(e||n(r),o.indexed=!0,o.name=""),Se(o.type,o.name)&&(o.name=""),o.type=Ue(o.type);let a=i(o.parent);o.parent.components.push(a),delete o.parent,o=a;break;case" ":o.state.allowType&&""!==o.type&&(o.type=Ue(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&""!==o.name&&("indexed"===o.name?(e||n(r),o.indexed&&n(r),o.indexed=!0,o.name=""):Se(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||n(r),o.type+=s,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||n(r),o.type+=s,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=s,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=s,delete o.state.allowArray):o.state.readArray?o.type+=s:n(r)}}return o.parent&&be.throwArgumentError("unexpected eof","param",t),delete s.state,"indexed"===o.name?(e||n(r.length-7),o.indexed&&n(r.length-7),o.indexed=!0,o.name=""):Se(o.type,o.name)&&(o.name=""),s.type=Ue(s.type),s}(t,!!e),Ae.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components});var r}static isParamType(t){return!(null==t||!t._isParamType)}}function Pe(t,e){return function(t){t=t.trim();let e=[],r="",n=0;for(let i=0;i<t.length;i++){let s=t[i];","===s&&0===n?(e.push(r),r=""):(r+=s,"("===s?n++:")"===s&&(n--,-1===n&&be.throwArgumentError("unbalanced parenthesis","value",t)))}r&&e.push(r);return e}(t).map((t=>Ae.fromString(t,e)))}class Me{constructor(t,e){t!==we&&be.throwError("use a static from method",B.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),ke(this,e),this._isFragment=!0,Object.freeze(this)}static from(t){return Me.isFragment(t)?t:"string"==typeof t?Me.fromString(t):Me.fromObject(t)}static fromObject(t){if(Me.isFragment(t))return t;switch(t.type){case"function":return Ce.fromObject(t);case"event":return Te.fromObject(t);case"constructor":return Re.fromObject(t);case"error":return De.fromObject(t);case"fallback":case"receive":return null}return be.throwArgumentError("invalid fragment object","value",t)}static fromString(t){return"event"===(t=(t=(t=t.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?Te.fromString(t.substring(5).trim()):"function"===t.split(" ")[0]?Ce.fromString(t.substring(8).trim()):"constructor"===t.split("(")[0].trim()?Re.fromString(t.trim()):"error"===t.split(" ")[0]?De.fromString(t.substring(5).trim()):be.throwArgumentError("unsupported fragment","value",t)}static isFragment(t){return!(!t||!t._isFragment)}}class Te extends Me{format(t){if(t||(t=xe.sighash),xe[t]||be.throwArgumentError("invalid format type","format",t),t===xe.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==xe.sighash&&(e+="event "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===xe.full?", ":",")+") ",t!==xe.sighash&&this.anonymous&&(e+="anonymous "),e.trim()}static from(t){return"string"==typeof t?Te.fromString(t):Te.fromObject(t)}static fromObject(t){if(Te.isEventFragment(t))return t;"event"!==t.type&&be.throwArgumentError("invalid event object","value",t);const e={name:qe(t.name),anonymous:t.anonymous,inputs:t.inputs?t.inputs.map(Ae.fromObject):[],type:"event"};return new Te(we,e)}static fromString(t){let e=t.match(je);e||be.throwArgumentError("invalid event string","value",t);let r=!1;return e[3].split(" ").forEach((t=>{switch(t.trim()){case"anonymous":r=!0;break;case"":break;default:be.warn("unknown modifier: "+t)}})),Te.fromObject({name:e[1].trim(),anonymous:r,inputs:Pe(e[2],!0),type:"event"})}static isEventFragment(t){return t&&t._isFragment&&"event"===t.type}}function Ie(t,e){e.gas=null;let r=t.split("@");return 1!==r.length?(r.length>2&&be.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||be.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=it.from(r[1]),r[0]):t}function Oe(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach((t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}}))}function Be(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return null!=t.stateMutability?(e.stateMutability=t.stateMutability,e.constant="view"===e.stateMutability||"pure"===e.stateMutability,null!=t.constant&&!!t.constant!==e.constant&&be.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable="payable"===e.stateMutability,null!=t.payable&&!!t.payable!==e.payable&&be.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):null!=t.payable?(e.payable=!!t.payable,null!=t.constant||e.payable||"constructor"===t.type||be.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&be.throwArgumentError("cannot have constant payable function","value",t)):null!=t.constant?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):"constructor"!==t.type&&be.throwArgumentError("unable to determine stateMutability","value",t),e}class Re extends Me{format(t){if(t||(t=xe.sighash),xe[t]||be.throwArgumentError("invalid format type","format",t),t===xe.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});t===xe.sighash&&be.throwError("cannot format a constructor for sighash",B.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let e="constructor("+this.inputs.map((e=>e.format(t))).join(t===xe.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "),e.trim()}static from(t){return"string"==typeof t?Re.fromString(t):Re.fromObject(t)}static fromObject(t){if(Re.isConstructorFragment(t))return t;"constructor"!==t.type&&be.throwArgumentError("invalid constructor object","value",t);let e=Be(t);e.constant&&be.throwArgumentError("constructor cannot be constant","value",t);const r={name:null,type:t.type,inputs:t.inputs?t.inputs.map(Ae.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?it.from(t.gas):null};return new Re(we,r)}static fromString(t){let e={type:"constructor"},r=(t=Ie(t,e)).match(je);return r&&"constructor"===r[1].trim()||be.throwArgumentError("invalid constructor string","value",t),e.inputs=Pe(r[2].trim(),!1),Oe(r[3].trim(),e),Re.fromObject(e)}static isConstructorFragment(t){return t&&t._isFragment&&"constructor"===t.type}}class Ce extends Re{format(t){if(t||(t=xe.sighash),xe[t]||be.throwArgumentError("invalid format type","format",t),t===xe.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t)))),outputs:this.outputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==xe.sighash&&(e+="function "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===xe.full?", ":",")+") ",t!==xe.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "):this.constant&&(e+="view "),this.outputs&&this.outputs.length&&(e+="returns ("+this.outputs.map((e=>e.format(t))).join(", ")+") "),null!=this.gas&&(e+="@"+this.gas.toString()+" ")),e.trim()}static from(t){return"string"==typeof t?Ce.fromString(t):Ce.fromObject(t)}static fromObject(t){if(Ce.isFunctionFragment(t))return t;"function"!==t.type&&be.throwArgumentError("invalid function object","value",t);let e=Be(t);const r={type:t.type,name:qe(t.name),constant:e.constant,inputs:t.inputs?t.inputs.map(Ae.fromObject):[],outputs:t.outputs?t.outputs.map(Ae.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?it.from(t.gas):null};return new Ce(we,r)}static fromString(t){let e={type:"function"},r=(t=Ie(t,e)).split(" returns ");r.length>2&&be.throwArgumentError("invalid function string","value",t);let n=r[0].match(je);if(n||be.throwArgumentError("invalid function signature","value",t),e.name=n[1].trim(),e.name&&qe(e.name),e.inputs=Pe(n[2],!1),Oe(n[3].trim(),e),r.length>1){let n=r[1].match(je);""==n[1].trim()&&""==n[3].trim()||be.throwArgumentError("unexpected tokens","value",t),e.outputs=Pe(n[2],!1)}else e.outputs=[];return Ce.fromObject(e)}static isFunctionFragment(t){return t&&t._isFragment&&"function"===t.type}}function Le(t){const e=t.format();return"Error(string)"!==e&&"Panic(uint256)"!==e||be.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class De extends Me{format(t){if(t||(t=xe.sighash),xe[t]||be.throwArgumentError("invalid format type","format",t),t===xe.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==xe.sighash&&(e+="error "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===xe.full?", ":",")+") ",e.trim()}static from(t){return"string"==typeof t?De.fromString(t):De.fromObject(t)}static fromObject(t){if(De.isErrorFragment(t))return t;"error"!==t.type&&be.throwArgumentError("invalid error object","value",t);const e={type:t.type,name:qe(t.name),inputs:t.inputs?t.inputs.map(Ae.fromObject):[]};return Le(new De(we,e))}static fromString(t){let e={type:"error"},r=t.match(je);return r||be.throwArgumentError("invalid error signature","value",t),e.name=r[1].trim(),e.name&&qe(e.name),e.inputs=Pe(r[2],!1),Le(De.fromObject(e))}static isErrorFragment(t){return t&&t._isFragment&&"error"===t.type}}function Ue(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const Fe=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function qe(t){return t&&t.match(Fe)||be.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const je=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");const ze=new B(wt),Ge=new RegExp(/^bytes([0-9]*)$/),$e=new RegExp(/^(u?int)([0-9]*)$/);class Ve{constructor(t){ze.checkNew(new.target,Ve),lt(this,"coerceFunc",t||null)}_getCoder(t){switch(t.baseType){case"address":return new ee(t.name);case"bool":return new ae(t.name);case"string":return new ye(t.name);case"bytes":return new ue(t.name);case"array":return new oe(this._getCoder(t.arrayChildren),t.arrayLength,t.name);case"tuple":return new ve((t.components||[]).map((t=>this._getCoder(t))),t.name);case"":return new le(t.name)}let e=t.type.match($e);if(e){let r=parseInt(e[2]||"256");return(0===r||r>256||r%8!=0)&&ze.throwArgumentError("invalid "+e[1]+" bit length","param",t),new ge(r/8,"int"===e[1],t.name)}if(e=t.type.match(Ge),e){let r=parseInt(e[1]);return(0===r||r>32)&&ze.throwArgumentError("invalid bytes length","param",t),new ce(r,t.name)}return ze.throwArgumentError("invalid type","type",t.type)}_getWordSize(){return 32}_getReader(t,e){return new kt(t,this._getWordSize(),this.coerceFunc,e)}_getWriter(){return new St(this._getWordSize())}getDefaultValue(t){const e=t.map((t=>this._getCoder(Ae.from(t))));return new ve(e,"_").defaultValue()}encode(t,e){t.length!==e.length&&ze.throwError("types/values length mismatch",B.errors.INVALID_ARGUMENT,{count:{types:t.length,values:e.length},value:{types:t,values:e}});const r=t.map((t=>this._getCoder(Ae.from(t)))),n=new ve(r,"_"),i=this._getWriter();return n.encode(i,e),i.data}decode(t,e,r){const n=t.map((t=>this._getCoder(Ae.from(t))));return new ve(n,"_").decode(this._getReader(F(e),r))}}const He=new Ve,We=new B(wt);class Ke extends bt{}class Je extends bt{}class Ze extends bt{}class Xe extends bt{static isIndexed(t){return!(!t||!t._isIndexed)}}const Ye={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function Qe(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class tr{constructor(t){We.checkNew(new.target,tr);let e=[];e="string"==typeof t?JSON.parse(t):t,lt(this,"fragments",e.map((t=>Me.from(t))).filter((t=>null!=t))),lt(this,"_abiCoder",ft(new.target,"getAbiCoder")()),lt(this,"functions",{}),lt(this,"errors",{}),lt(this,"events",{}),lt(this,"structs",{}),this.fragments.forEach((t=>{let e=null;switch(t.type){case"constructor":return this.deploy?void We.warn("duplicate definition - constructor"):void lt(this,"deploy",t);case"function":e=this.functions;break;case"event":e=this.events;break;case"error":e=this.errors;break;default:return}let r=t.format();e[r]?We.warn("duplicate definition - "+r):e[r]=t})),this.deploy||lt(this,"deploy",Re.from({payable:!1,type:"constructor"})),lt(this,"_isInterface",!0)}format(t){t||(t=xe.full),t===xe.sighash&&We.throwArgumentError("interface does not support formatting sighash","format",t);const e=this.fragments.map((e=>e.format(t)));return t===xe.json?JSON.stringify(e.map((t=>JSON.parse(t)))):e}static getAbiCoder(){return He}static getAddress(t){return zt(t)}static getSighash(t){return H(te(t.format()),0,4)}static getEventTopic(t){return te(t.format())}getFunction(t){if(z(t)){for(const e in this.functions)if(t===this.getSighash(e))return this.functions[e];We.throwArgumentError("no matching function","sighash",t)}if(-1===t.indexOf("(")){const e=t.trim(),r=Object.keys(this.functions).filter((t=>t.split("(")[0]===e));return 0===r.length?We.throwArgumentError("no matching function","name",e):r.length>1&&We.throwArgumentError("multiple matching functions","name",e),this.functions[r[0]]}const e=this.functions[Ce.fromString(t).format()];return e||We.throwArgumentError("no matching function","signature",t),e}getEvent(t){if(z(t)){const e=t.toLowerCase();for(const t in this.events)if(e===this.getEventTopic(t))return this.events[t];We.throwArgumentError("no matching event","topichash",e)}if(-1===t.indexOf("(")){const e=t.trim(),r=Object.keys(this.events).filter((t=>t.split("(")[0]===e));return 0===r.length?We.throwArgumentError("no matching event","name",e):r.length>1&&We.throwArgumentError("multiple matching events","name",e),this.events[r[0]]}const e=this.events[Te.fromString(t).format()];return e||We.throwArgumentError("no matching event","signature",t),e}getError(t){if(z(t)){const e=ft(this.constructor,"getSighash");for(const r in this.errors){if(t===e(this.errors[r]))return this.errors[r]}We.throwArgumentError("no matching error","sighash",t)}if(-1===t.indexOf("(")){const e=t.trim(),r=Object.keys(this.errors).filter((t=>t.split("(")[0]===e));return 0===r.length?We.throwArgumentError("no matching error","name",e):r.length>1&&We.throwArgumentError("multiple matching errors","name",e),this.errors[r[0]]}const e=this.errors[Ce.fromString(t).format()];return e||We.throwArgumentError("no matching error","signature",t),e}getSighash(t){if("string"==typeof t)try{t=this.getFunction(t)}catch(e){try{t=this.getError(t)}catch(t){throw e}}return ft(this.constructor,"getSighash")(t)}getEventTopic(t){return"string"==typeof t&&(t=this.getEvent(t)),ft(this.constructor,"getEventTopic")(t)}_decodeParams(t,e){return this._abiCoder.decode(t,e)}_encodeParams(t,e){return this._abiCoder.encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){"string"==typeof t&&(t=this.getError(t));const r=F(e);return $(r.slice(0,4))!==this.getSighash(t)&&We.throwArgumentError(`data signature does not match error ${t.name}.`,"data",$(r)),this._decodeParams(t.inputs,r.slice(4))}encodeErrorResult(t,e){return"string"==typeof t&&(t=this.getError(t)),$(q([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionData(t,e){"string"==typeof t&&(t=this.getFunction(t));const r=F(e);return $(r.slice(0,4))!==this.getSighash(t)&&We.throwArgumentError(`data signature does not match function ${t.name}.`,"data",$(r)),this._decodeParams(t.inputs,r.slice(4))}encodeFunctionData(t,e){return"string"==typeof t&&(t=this.getFunction(t)),$(q([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionResult(t,e){"string"==typeof t&&(t=this.getFunction(t));let r=F(e),n=null,i=null,s=null,o=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(t.outputs,r)}catch(t){}break;case 4:{const t=$(r.slice(0,4)),e=Ye[t];if(e)i=this._abiCoder.decode(e.inputs,r.slice(4)),s=e.name,o=e.signature,e.reason&&(n=i[0]);else try{const e=this.getError(t);i=this._abiCoder.decode(e.inputs,r.slice(4)),s=e.name,o=e.format()}catch(t){console.log(t)}break}}return We.throwError("call revert exception",B.errors.CALL_EXCEPTION,{method:t.format(),errorArgs:i,errorName:s,errorSignature:o,reason:n})}encodeFunctionResult(t,e){return"string"==typeof t&&(t=this.getFunction(t)),$(this._abiCoder.encode(t.outputs,e||[]))}encodeFilterTopics(t,e){"string"==typeof t&&(t=this.getEvent(t)),e.length>t.inputs.length&&We.throwError("too many arguments for "+t.format(),B.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:e});let r=[];t.anonymous||r.push(this.getEventTopic(t));const n=(t,e)=>"string"===t.type?te(e):"bytes"===t.type?At($(e)):("address"===t.type&&this._abiCoder.encode(["address"],[e]),J($(e),32));for(e.forEach(((e,i)=>{let s=t.inputs[i];s.indexed?null==e?r.push(null):"array"===s.baseType||"tuple"===s.baseType?We.throwArgumentError("filtering with tuples or arrays not supported","contract."+s.name,e):Array.isArray(e)?r.push(e.map((t=>n(s,t)))):r.push(n(s,e)):null!=e&&We.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+s.name,e)}));r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(t,e){"string"==typeof t&&(t=this.getEvent(t));const r=[],n=[],i=[];return t.anonymous||r.push(this.getEventTopic(t)),e.length!==t.inputs.length&&We.throwArgumentError("event arguments/values mismatch","values",e),t.inputs.forEach(((t,s)=>{const o=e[s];if(t.indexed)if("string"===t.type)r.push(te(o));else if("bytes"===t.type)r.push(At(o));else{if("tuple"===t.baseType||"array"===t.baseType)throw new Error("not implemented");r.push(this._abiCoder.encode([t.type],[o]))}else n.push(t),i.push(o)})),{data:this._abiCoder.encode(n,i),topics:r}}decodeEventLog(t,e,r){if("string"==typeof t&&(t=this.getEvent(t)),null!=r&&!t.anonymous){let e=this.getEventTopic(t);z(r[0],32)&&r[0].toLowerCase()===e||We.throwError("fragment/topic mismatch",B.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:e,value:r[0]}),r=r.slice(1)}let n=[],i=[],s=[];t.inputs.forEach(((t,e)=>{t.indexed?"string"===t.type||"bytes"===t.type||"tuple"===t.baseType||"array"===t.baseType?(n.push(Ae.fromObject({type:"bytes32",name:t.name})),s.push(!0)):(n.push(t),s.push(!1)):(i.push(t),s.push(!1))}));let o=null!=r?this._abiCoder.decode(n,q(r)):null,a=this._abiCoder.decode(i,e,!0),h=[],u=0,c=0;t.inputs.forEach(((t,e)=>{if(t.indexed)if(null==o)h[e]=new Xe({_isIndexed:!0,hash:null});else if(s[e])h[e]=new Xe({_isIndexed:!0,hash:o[c++]});else try{h[e]=o[c++]}catch(t){h[e]=t}else try{h[e]=a[u++]}catch(t){h[e]=t}if(t.name&&null==h[t.name]){const r=h[e];r instanceof Error?Object.defineProperty(h,t.name,{get:()=>{throw Qe(`property ${JSON.stringify(t.name)}`,r)}}):h[t.name]=r}}));for(let t=0;t<h.length;t++){const e=h[t];e instanceof Error&&Object.defineProperty(h,t,{get:()=>{throw Qe(`index ${t}`,e)}})}return Object.freeze(h)}parseTransaction(t){let e=this.getFunction(t.data.substring(0,10).toLowerCase());return e?new Je({args:this._abiCoder.decode(e.inputs,"0x"+t.data.substring(10)),functionFragment:e,name:e.name,signature:e.format(),sighash:this.getSighash(e),value:it.from(t.value||"0")}):null}parseLog(t){let e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new Ke({eventFragment:e,name:e.name,signature:e.format(),topic:this.getEventTopic(e),args:this.decodeEventLog(e,t.data,t.topics)})}parseError(t){const e=$(t);let r=this.getError(e.substring(0,10).toLowerCase());return r?new Ze({args:this._abiCoder.decode(r.inputs,"0x"+e.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(t){return!(!t||!t._isInterface)}}var er=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))};const rr=new B("abstract-provider/5.4.0");class nr extends bt{static isForkEvent(t){return!(!t||!t._isForkEvent)}}class ir{constructor(){rr.checkAbstract(new.target,ir),lt(this,"_isProvider",!0)}getFeeData(){return er(this,void 0,void 0,(function*(){const{block:t,gasPrice:e}=yield dt({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((t=>null))});let r=null,n=null;return t&&t.baseFeePerGas&&(n=it.from("1000000000"),r=t.baseFeePerGas.mul(2).add(n)),{maxFeePerGas:r,maxPriorityFeePerGas:n,gasPrice:e}}))}addListener(t,e){return this.on(t,e)}removeListener(t,e){return this.off(t,e)}static isProvider(t){return!(!t||!t._isProvider)}}var sr=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))};const or=new B("abstract-signer/5.4.0"),ar=["accessList","chainId","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],hr=[B.errors.INSUFFICIENT_FUNDS,B.errors.NONCE_EXPIRED,B.errors.REPLACEMENT_UNDERPRICED];class ur{constructor(){or.checkAbstract(new.target,ur),lt(this,"_isSigner",!0)}getBalance(t){return sr(this,void 0,void 0,(function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),t)}))}getTransactionCount(t){return sr(this,void 0,void 0,(function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),t)}))}estimateGas(t){return sr(this,void 0,void 0,(function*(){this._checkProvider("estimateGas");const e=yield dt(this.checkTransaction(t));return yield this.provider.estimateGas(e)}))}call(t,e){return sr(this,void 0,void 0,(function*(){this._checkProvider("call");const r=yield dt(this.checkTransaction(t));return yield this.provider.call(r,e)}))}sendTransaction(t){return this._checkProvider("sendTransaction"),this.populateTransaction(t).then((t=>this.signTransaction(t).then((t=>this.provider.sendTransaction(t)))))}getChainId(){return sr(this,void 0,void 0,(function*(){this._checkProvider("getChainId");return(yield this.provider.getNetwork()).chainId}))}getGasPrice(){return sr(this,void 0,void 0,(function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()}))}getFeeData(){return sr(this,void 0,void 0,(function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()}))}resolveName(t){return sr(this,void 0,void 0,(function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(t)}))}checkTransaction(t){for(const e in t)-1===ar.indexOf(e)&&or.throwArgumentError("invalid transaction key: "+e,"transaction",t);const e=pt(t);return null==e.from?e.from=this.getAddress():e.from=Promise.all([Promise.resolve(e.from),this.getAddress()]).then((e=>(e[0].toLowerCase()!==e[1].toLowerCase()&&or.throwArgumentError("from address mismatch","transaction",t),e[0]))),e}populateTransaction(t){return sr(this,void 0,void 0,(function*(){const e=yield dt(this.checkTransaction(t));null!=e.to&&(e.to=Promise.resolve(e.to).then((t=>sr(this,void 0,void 0,(function*(){if(null==t)return null;const e=yield this.resolveName(t);return null==e&&or.throwArgumentError("provided ENS name resolves to null","tx.to",t),e})))));const r=null!=e.maxFeePerGas||null!=e.maxPriorityFeePerGas;if(null==e.gasPrice||2!==e.type&&!r?0!==e.type&&1!==e.type||!r||or.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",t):or.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",t),2!==e.type&&null!=e.type||null==e.maxFeePerGas||null==e.maxPriorityFeePerGas)if(0===e.type||1===e.type)null==e.gasPrice&&(e.gasPrice=this.getGasPrice());else{const t=yield this.getFeeData();if(null==e.type)if(null!=t.maxFeePerGas&&null!=t.maxPriorityFeePerGas)if(e.type=2,null!=e.gasPrice){const t=e.gasPrice;delete e.gasPrice,e.maxFeePerGas=t,e.maxPriorityFeePerGas=t}else null==e.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null==e.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas);else null!=t.gasPrice?(r&&or.throwError("network does not support EIP-1559",B.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==e.gasPrice&&(e.gasPrice=t.gasPrice),e.type=0):or.throwError("failed to get consistent fee data",B.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===e.type&&(null==e.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null==e.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas))}else e.type=2;return null==e.nonce&&(e.nonce=this.getTransactionCount("pending")),null==e.gasLimit&&(e.gasLimit=this.estimateGas(e).catch((t=>{if(hr.indexOf(t.code)>=0)throw t;return or.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",B.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,tx:e})}))),null==e.chainId?e.chainId=this.getChainId():e.chainId=Promise.all([Promise.resolve(e.chainId),this.getChainId()]).then((e=>(0!==e[1]&&e[0]!==e[1]&&or.throwArgumentError("chainId address mismatch","transaction",t),e[0]))),yield dt(e)}))}_checkProvider(t){this.provider||or.throwError("missing provider",B.errors.UNSUPPORTED_OPERATION,{operation:t||"_checkProvider"})}static isSigner(t){return!(!t||!t._isSigner)}}class cr extends ur{constructor(t,e){or.checkNew(new.target,cr),super(),lt(this,"address",t),lt(this,"provider",e||null)}getAddress(){return Promise.resolve(this.address)}_fail(t,e){return Promise.resolve().then((()=>{or.throwError(t,B.errors.UNSUPPORTED_OPERATION,{operation:e})}))}signMessage(t){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(t){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(t,e,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(t){return new cr(this.address,t)}}var lr=r(3715),fr=r.n(lr);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function dr(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}var pr=mr;function mr(t,e){if(!t)throw new Error(e||"Assertion failed")}mr.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)};var gr=dr((function(t,e){var r=e;function n(t){return 1===t.length?"0"+t:t}function i(t){for(var e="",r=0;r<t.length;r++)e+=n(t[r].toString(16));return e}r.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"!=typeof t){for(var n=0;n<t.length;n++)r[n]=0|t[n];return r}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t);for(n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(n=0;n<t.length;n++){var i=t.charCodeAt(n),s=i>>8,o=255&i;s?r.push(s,o):r.push(o)}return r},r.zero2=n,r.toHex=i,r.encode=function(t,e){return"hex"===e?i(t):t}})),yr=dr((function(t,e){var r=e;r.assert=pr,r.toArray=gr.toArray,r.zero2=gr.zero2,r.toHex=gr.toHex,r.encode=gr.encode,r.getNAF=function(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);for(var i=1<<e+1,s=t.clone(),o=0;o<n.length;o++){var a,h=s.andln(i-1);s.isOdd()?(a=h>(i>>1)-1?(i>>1)-h:h,s.isubn(a)):a=0,n[o]=a,s.iushrn(1)}return n},r.getJSF=function(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n,i=0,s=0;t.cmpn(-i)>0||e.cmpn(-s)>0;){var o,a,h=t.andln(3)+i&3,u=e.andln(3)+s&3;3===h&&(h=-1),3===u&&(u=-1),o=0==(1&h)?0:3!==(n=t.andln(7)+i&7)&&5!==n||2!==u?h:-h,r[0].push(o),a=0==(1&u)?0:3!==(n=e.andln(7)+s&7)&&5!==n||2!==h?u:-u,r[1].push(a),2*i===o+1&&(i=1-i),2*s===a+1&&(s=1-s),t.iushrn(1),e.iushrn(1)}return r},r.cachedProperty=function(t,e,r){var n="_"+e;t.prototype[e]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(t){return"string"==typeof t?r.toArray(t,"hex"):t},r.intFromLE=function(t){return new(Y())(t,"hex","le")}})),vr=yr.getNAF,br=yr.getJSF,wr=yr.assert;function _r(t,e){this.type=t,this.p=new(Y())(e.p,16),this.red=e.prime?Y().red(e.prime):Y().mont(this.p),this.zero=new(Y())(0).toRed(this.red),this.one=new(Y())(1).toRed(this.red),this.two=new(Y())(2).toRed(this.red),this.n=e.n&&new(Y())(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Er=_r;function Sr(t,e){this.curve=t,this.type=e,this.precomputed=null}_r.prototype.point=function(){throw new Error("Not implemented")},_r.prototype.validate=function(){throw new Error("Not implemented")},_r.prototype._fixedNafMul=function(t,e){wr(t.precomputed);var r=t._getDoubles(),n=vr(e,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var s,o,a=[];for(s=0;s<n.length;s+=r.step){o=0;for(var h=s+r.step-1;h>=s;h--)o=(o<<1)+n[h];a.push(o)}for(var u=this.jpoint(null,null,null),c=this.jpoint(null,null,null),l=i;l>0;l--){for(s=0;s<a.length;s++)(o=a[s])===l?c=c.mixedAdd(r.points[s]):o===-l&&(c=c.mixedAdd(r.points[s].neg()));u=u.add(c)}return u.toP()},_r.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,s=vr(e,r,this._bitLength),o=this.jpoint(null,null,null),a=s.length-1;a>=0;a--){for(var h=0;a>=0&&0===s[a];a--)h++;if(a>=0&&h++,o=o.dblp(h),a<0)break;var u=s[a];wr(0!==u),o="affine"===t.type?u>0?o.mixedAdd(i[u-1>>1]):o.mixedAdd(i[-u-1>>1].neg()):u>0?o.add(i[u-1>>1]):o.add(i[-u-1>>1].neg())}return"affine"===t.type?o.toP():o},_r.prototype._wnafMulAdd=function(t,e,r,n,i){var s,o,a,h=this._wnafT1,u=this._wnafT2,c=this._wnafT3,l=0;for(s=0;s<n;s++){var f=(a=e[s])._getNAFPoints(t);h[s]=f.wnd,u[s]=f.points}for(s=n-1;s>=1;s-=2){var d=s-1,p=s;if(1===h[d]&&1===h[p]){var m=[e[d],null,null,e[p]];0===e[d].y.cmp(e[p].y)?(m[1]=e[d].add(e[p]),m[2]=e[d].toJ().mixedAdd(e[p].neg())):0===e[d].y.cmp(e[p].y.redNeg())?(m[1]=e[d].toJ().mixedAdd(e[p]),m[2]=e[d].add(e[p].neg())):(m[1]=e[d].toJ().mixedAdd(e[p]),m[2]=e[d].toJ().mixedAdd(e[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],y=br(r[d],r[p]);for(l=Math.max(y[0].length,l),c[d]=new Array(l),c[p]=new Array(l),o=0;o<l;o++){var v=0|y[0][o],b=0|y[1][o];c[d][o]=g[3*(v+1)+(b+1)],c[p][o]=0,u[d]=m}}else c[d]=vr(r[d],h[d],this._bitLength),c[p]=vr(r[p],h[p],this._bitLength),l=Math.max(c[d].length,l),l=Math.max(c[p].length,l)}var w=this.jpoint(null,null,null),_=this._wnafT4;for(s=l;s>=0;s--){for(var E=0;s>=0;){var S=!0;for(o=0;o<n;o++)_[o]=0|c[o][s],0!==_[o]&&(S=!1);if(!S)break;E++,s--}if(s>=0&&E++,w=w.dblp(E),s<0)break;for(o=0;o<n;o++){var k=_[o];0!==k&&(k>0?a=u[o][k-1>>1]:k<0&&(a=u[o][-k-1>>1].neg()),w="affine"===a.type?w.mixedAdd(a):w.add(a))}}for(s=0;s<n;s++)u[s]=null;return i?w:w.toP()},_r.BasePoint=Sr,Sr.prototype.eq=function(){throw new Error("Not implemented")},Sr.prototype.validate=function(){return this.curve.validate(this)},_r.prototype.decodePoint=function(t,e){t=yr.toArray(t,e);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*r)return 6===t[0]?wr(t[t.length-1]%2==0):7===t[0]&&wr(t[t.length-1]%2==1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},Sr.prototype.encodeCompressed=function(t){return this.encode(t,!0)},Sr.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},Sr.prototype.encode=function(t,e){return yr.encode(this._encode(e),t)},Sr.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},Sr.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},Sr.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<e;i+=t){for(var s=0;s<t;s++)n=n.dbl();r.push(n)}return{step:t,points:r}},Sr.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)e[i]=e[i-1].add(n);return{wnd:t,points:e}},Sr.prototype._getBeta=function(){return null},Sr.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e};var kr=dr((function(t){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}})),xr=yr.assert;function Nr(t){Er.call(this,"short",t),this.a=new(Y())(t.a,16).toRed(this.red),this.b=new(Y())(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}kr(Nr,Er);var Ar=Nr;function Pr(t,e,r,n){Er.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new(Y())(e,16),this.y=new(Y())(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Mr(t,e,r,n){Er.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(Y())(0)):(this.x=new(Y())(e,16),this.y=new(Y())(r,16),this.z=new(Y())(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Nr.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r;if(t.beta)e=new(Y())(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);e=(e=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(t.lambda)r=new(Y())(t.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(e))?r=i[0]:(r=i[1],xr(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:r,basis:t.basis?t.basis.map((function(t){return{a:new(Y())(t.a,16),b:new(Y())(t.b,16)}})):this._getEndoBasis(r)}}},Nr.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:Y().mont(t),r=new(Y())(2).toRed(e).redInvm(),n=r.redNeg(),i=new(Y())(3).toRed(e).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},Nr.prototype._getEndoBasis=function(t){for(var e,r,n,i,s,o,a,h,u,c=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=t,f=this.n.clone(),d=new(Y())(1),p=new(Y())(0),m=new(Y())(0),g=new(Y())(1),y=0;0!==l.cmpn(0);){var v=f.div(l);h=f.sub(v.mul(l)),u=m.sub(v.mul(d));var b=g.sub(v.mul(p));if(!n&&h.cmp(c)<0)e=a.neg(),r=d,n=h.neg(),i=u;else if(n&&2==++y)break;a=h,f=l,l=h,m=d,d=u,g=p,p=b}s=h.neg(),o=u;var w=n.sqr().add(i.sqr());return s.sqr().add(o.sqr()).cmp(w)>=0&&(s=e,o=r),n.negative&&(n=n.neg(),i=i.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:n,b:i},{a:s,b:o}]},Nr.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),s=r.b.neg().mul(t).divRound(this.n),o=i.mul(r.a),a=s.mul(n.a),h=i.mul(r.b),u=s.mul(n.b);return{k1:t.sub(o).sub(a),k2:h.add(u).neg()}},Nr.prototype.pointFromX=function(t,e){(t=new(Y())(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(e&&!i||!e&&i)&&(n=n.redNeg()),this.point(t,n)},Nr.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},Nr.prototype._endoWnafMulAdd=function(t,e,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,s=0;s<t.length;s++){var o=this._endoSplit(e[s]),a=t[s],h=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),h=h.neg(!0)),n[2*s]=a,n[2*s+1]=h,i[2*s]=o.k1,i[2*s+1]=o.k2}for(var u=this._wnafMulAdd(1,n,i,2*s,r),c=0;c<2*s;c++)n[c]=null,i[c]=null;return u},kr(Pr,Er.BasePoint),Nr.prototype.point=function(t,e,r){return new Pr(this,t,e,r)},Nr.prototype.pointFromJSON=function(t,e){return Pr.fromJSON(this,t,e)},Pr.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,n=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return e}},Pr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Pr.fromJSON=function(t,e,r){"string"==typeof e&&(e=JSON.parse(e));var n=t.point(e[0],e[1],r);if(!e[2])return n;function i(e){return t.point(e[0],e[1],r)}var s=e[2];return n.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[n].concat(s.doubles.points.map(i))},naf:s.naf&&{wnd:s.naf.wnd,points:[n].concat(s.naf.points.map(i))}},n},Pr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Pr.prototype.isInfinity=function(){return this.inf},Pr.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},Pr.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),s=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},Pr.prototype.getX=function(){return this.x.fromRed()},Pr.prototype.getY=function(){return this.y.fromRed()},Pr.prototype.mul=function(t){return t=new(Y())(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},Pr.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},Pr.prototype.jmulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},Pr.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},Pr.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,n=function(t){return t.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return e},Pr.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},kr(Mr,Er.BasePoint),Nr.prototype.jpoint=function(t,e,r){return new Mr(this,t,e,r)},Mr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)},Mr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Mr.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),s=this.y.redMul(e.redMul(t.z)),o=t.y.redMul(r.redMul(this.z)),a=n.redSub(i),h=s.redSub(o);if(0===a.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),c=u.redMul(a),l=n.redMul(u),f=h.redSqr().redIAdd(c).redISub(l).redISub(l),d=h.redMul(l.redISub(f)).redISub(s.redMul(c)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(f,d,p)},Mr.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,s=t.y.redMul(e).redMul(this.z),o=r.redSub(n),a=i.redSub(s);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=o.redSqr(),u=h.redMul(o),c=r.redMul(h),l=a.redSqr().redIAdd(u).redISub(c).redISub(c),f=a.redMul(c.redISub(l)).redISub(i.redMul(u)),d=this.z.redMul(o);return this.curve.jpoint(l,f,d)},Mr.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,s=this.x,o=this.y,a=this.z,h=a.redSqr().redSqr(),u=o.redAdd(o);for(e=0;e<t;e++){var c=s.redSqr(),l=u.redSqr(),f=l.redSqr(),d=c.redAdd(c).redIAdd(c).redIAdd(n.redMul(h)),p=s.redMul(l),m=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),y=d.redMul(g);y=y.redIAdd(y).redISub(f);var v=u.redMul(a);e+1<t&&(h=h.redMul(f)),s=m,a=v,u=y}return this.curve.jpoint(s,u.redMul(i),a)},Mr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Mr.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n),h=a.redSqr().redISub(o).redISub(o),u=s.redIAdd(s);u=(u=u.redIAdd(u)).redIAdd(u),t=h,e=a.redMul(o.redISub(h)).redISub(u),r=this.y.redAdd(this.y)}else{var c=this.x.redSqr(),l=this.y.redSqr(),f=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(c).redISub(f);d=d.redIAdd(d);var p=c.redAdd(c).redIAdd(c),m=p.redSqr(),g=f.redIAdd(f);g=(g=g.redIAdd(g)).redIAdd(g),t=m.redISub(d).redISub(d),e=p.redMul(d.redISub(t)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(t,e,r)},Mr.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),h=a.redSqr().redISub(o).redISub(o);t=h;var u=s.redIAdd(s);u=(u=u.redIAdd(u)).redIAdd(u),e=a.redMul(o.redISub(h)).redISub(u),r=this.y.redAdd(this.y)}else{var c=this.z.redSqr(),l=this.y.redSqr(),f=this.x.redMul(l),d=this.x.redSub(c).redMul(this.x.redAdd(c));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),m=(p=p.redIAdd(p)).redAdd(p);t=d.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(l).redISub(c);var g=l.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),e=d.redMul(p.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,r)},Mr.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),s=e.redSqr(),o=r.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(t.redMul(i)),h=e.redAdd(e),u=(h=h.redIAdd(h)).redMul(o),c=a.redSqr().redISub(u.redAdd(u)),l=u.redISub(c),f=o.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=a.redMul(l).redISub(f),p=r.redAdd(r).redMul(n);return this.curve.jpoint(c,d,p)},Mr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),s=i.redSqr(),o=this.x.redAdd(e).redSqr().redISub(t).redISub(n),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),h=n.redIAdd(n);h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var u=i.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(h),c=e.redMul(u);c=(c=c.redIAdd(c)).redIAdd(c);var l=this.x.redMul(a).redISub(c);l=(l=l.redIAdd(l)).redIAdd(l);var f=this.y.redMul(u.redMul(h.redISub(u)).redISub(o.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(l,f,d)},Mr.prototype.mul=function(t,e){return t=new(Y())(t,e),this.curve._wnafMul(this,t)},Mr.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return!1;var n=e.redMul(this.z),i=r.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)},Mr.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(r))return!0;for(var n=t.clone(),i=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},Mr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Mr.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Tr=dr((function(t,e){var r=e;r.base=Er,r.short=Ar,r.mont=null,r.edwards=null})),Ir=dr((function(t,e){var r,n=e,i=yr.assert;function s(t){"short"===t.type?this.curve=new Tr.short(t):"edwards"===t.type?this.curve=new Tr.edwards(t):this.curve=new Tr.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function o(t,e){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){var r=new s(e);return Object.defineProperty(n,t,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=s,o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:fr().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:fr().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:fr().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:fr().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:fr().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:fr().sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:fr().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(t){r=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:fr().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function Or(t){if(!(this instanceof Or))return new Or(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=gr.toArray(t.entropy,t.entropyEnc||"hex"),r=gr.toArray(t.nonce,t.nonceEnc||"hex"),n=gr.toArray(t.pers,t.persEnc||"hex");pr(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var Br=Or;Or.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},Or.prototype._hmac=function(){return new(fr().hmac)(this.hash,this.K)},Or.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},Or.prototype.reseed=function(t,e,r,n){"string"!=typeof e&&(n=r,r=e,e=null),t=gr.toArray(t,e),r=gr.toArray(r,n),pr(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1},Or.prototype.generate=function(t,e,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(n=r,r=e,e=null),r&&(r=gr.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<t;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var s=i.slice(0,t);return this._update(r),this._reseed++,gr.encode(s,e)};var Rr=yr.assert;function Cr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Lr=Cr;Cr.fromPublic=function(t,e,r){return e instanceof Cr?e:new Cr(t,{pub:e,pubEnc:r})},Cr.fromPrivate=function(t,e,r){return e instanceof Cr?e:new Cr(t,{priv:e,privEnc:r})},Cr.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Cr.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},Cr.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},Cr.prototype._importPrivate=function(t,e){this.priv=new(Y())(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},Cr.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?Rr(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||Rr(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},Cr.prototype.derive=function(t){return t.validate()||Rr(t.validate(),"public point not validated"),t.mul(this.priv).getX()},Cr.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},Cr.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},Cr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Dr=yr.assert;function Ur(t,e){if(t instanceof Ur)return t;this._importDER(t,e)||(Dr(t.r&&t.s,"Signature without r or s"),this.r=new(Y())(t.r,16),this.s=new(Y())(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var Fr=Ur;function qr(){this.place=0}function jr(t,e){var r=t[e.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return!(i<=127)&&(e.place=o,i)}function zr(t){for(var e=0,r=t.length-1;!t[e]&&!(128&t[e+1])&&e<r;)e++;return 0===e?t:t.slice(e)}function Gr(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|r);--r;)t.push(e>>>(r<<3)&255);t.push(e)}}Ur.prototype._importDER=function(t,e){t=yr.toArray(t,e);var r=new qr;if(48!==t[r.place++])return!1;var n=jr(t,r);if(!1===n)return!1;if(n+r.place!==t.length)return!1;if(2!==t[r.place++])return!1;var i=jr(t,r);if(!1===i)return!1;var s=t.slice(r.place,i+r.place);if(r.place+=i,2!==t[r.place++])return!1;var o=jr(t,r);if(!1===o)return!1;if(t.length!==o+r.place)return!1;var a=t.slice(r.place,o+r.place);if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new(Y())(s),this.s=new(Y())(a),this.recoveryParam=null,!0},Ur.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=zr(e),r=zr(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];Gr(n,e.length),(n=n.concat(e)).push(2),Gr(n,r.length);var i=n.concat(r),s=[48];return Gr(s,i.length),s=s.concat(i),yr.encode(s,t)};var $r=function(){throw new Error("unsupported")},Vr=yr.assert;function Hr(t){if(!(this instanceof Hr))return new Hr(t);"string"==typeof t&&(Vr(Object.prototype.hasOwnProperty.call(Ir,t),"Unknown curve "+t),t=Ir[t]),t instanceof Ir.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var Wr=Hr;Hr.prototype.keyPair=function(t){return new Lr(this,t)},Hr.prototype.keyFromPrivate=function(t,e){return Lr.fromPrivate(this,t,e)},Hr.prototype.keyFromPublic=function(t,e){return Lr.fromPublic(this,t,e)},Hr.prototype.genKeyPair=function(t){t||(t={});for(var e=new Br({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||$r(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new(Y())(2));;){var i=new(Y())(e.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},Hr.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},Hr.prototype.sign=function(t,e,r,n){"object"==typeof r&&(n=r,r=null),n||(n={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new(Y())(t,16));for(var i=this.n.byteLength(),s=e.getPrivate().toArray("be",i),o=t.toArray("be",i),a=new Br({hash:this.hash,entropy:s,nonce:o,pers:n.pers,persEnc:n.persEnc||"utf8"}),h=this.n.sub(new(Y())(1)),u=0;;u++){var c=n.k?n.k(u):new(Y())(a.generate(this.n.byteLength()));if(!((c=this._truncateToN(c,!0)).cmpn(1)<=0||c.cmp(h)>=0)){var l=this.g.mul(c);if(!l.isInfinity()){var f=l.getX(),d=f.umod(this.n);if(0!==d.cmpn(0)){var p=c.invm(this.n).mul(d.mul(e.getPrivate()).iadd(t));if(0!==(p=p.umod(this.n)).cmpn(0)){var m=(l.getY().isOdd()?1:0)|(0!==f.cmp(d)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),m^=1),new Fr({r:d,s:p,recoveryParam:m})}}}}}},Hr.prototype.verify=function(t,e,r,n){t=this._truncateToN(new(Y())(t,16)),r=this.keyFromPublic(r,n);var i=(e=new Fr(e,"hex")).r,s=e.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o,a=s.invm(this.n),h=a.mul(t).umod(this.n),u=a.mul(i).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(h,r.getPublic(),u)).isInfinity()&&o.eqXToP(i):!(o=this.g.mulAdd(h,r.getPublic(),u)).isInfinity()&&0===o.getX().umod(this.n).cmp(i)},Hr.prototype.recoverPubKey=function(t,e,r,n){Vr((3&r)===r,"The recovery param is more than two bits"),e=new Fr(e,n);var i=this.n,s=new(Y())(t),o=e.r,a=e.s,h=1&r,u=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");o=u?this.curve.pointFromX(o.add(this.curve.n),h):this.curve.pointFromX(o,h);var c=e.r.invm(i),l=i.sub(s).mul(c).umod(i),f=a.mul(c).umod(i);return this.g.mulAdd(l,o,f)},Hr.prototype.getKeyRecoveryParam=function(t,e,r,n){if(null!==(e=new Fr(e,n)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch(t){continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Kr=dr((function(t,e){var r=e;r.version="6.5.4",r.utils=yr,r.rand=function(){throw new Error("unsupported")},r.curve=Tr,r.curves=Ir,r.ec=Wr,r.eddsa=null})).ec;const Jr=new B("signing-key/5.4.0");let Zr=null;function Xr(){return Zr||(Zr=new Kr("secp256k1")),Zr}class Yr{constructor(t){lt(this,"curve","secp256k1"),lt(this,"privateKey",$(t));const e=Xr().keyFromPrivate(F(this.privateKey));lt(this,"publicKey","0x"+e.getPublic(!1,"hex")),lt(this,"compressedPublicKey","0x"+e.getPublic(!0,"hex")),lt(this,"_isSigningKey",!0)}_addPoint(t){const e=Xr().keyFromPublic(F(this.publicKey)),r=Xr().keyFromPublic(F(t));return"0x"+e.pub.add(r.pub).encodeCompressed("hex")}signDigest(t){const e=Xr().keyFromPrivate(F(this.privateKey)),r=F(t);32!==r.length&&Jr.throwArgumentError("bad digest length","digest",t);const n=e.sign(r,{canonical:!0});return Z({recoveryParam:n.recoveryParam,r:J("0x"+n.r.toString(16),32),s:J("0x"+n.s.toString(16),32)})}computeSharedSecret(t){const e=Xr().keyFromPrivate(F(this.privateKey)),r=Xr().keyFromPublic(F(Qr(t)));return J("0x"+e.derive(r.getPublic()).toString(16),32)}static isSigningKey(t){return!(!t||!t._isSigningKey)}}function Qr(t,e){const r=F(t);if(32===r.length){const t=new Yr(r);return e?"0x"+Xr().keyFromPrivate(r).getPublic(!0,"hex"):t.publicKey}return 33===r.length?e?$(r):"0x"+Xr().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?e?"0x"+Xr().keyFromPublic(r).getPublic(!0,"hex"):$(r):Jr.throwArgumentError("invalid public or private key","key","[REDACTED]")}const tn=new B("transactions/5.4.0");var en;function rn(t){return"0x"===t?null:zt(t)}function nn(t){return"0x"===t?de:it.from(t)}!function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"}(en||(en={}));function sn(t,e){return function(t){return zt(H(At(H(Qr(t),1)),12))}(function(t,e){const r=Z(e),n={r:F(r.r),s:F(r.s)};return"0x"+Xr().recoverPubKey(F(t),n,r.recoveryParam).encode("hex",!1)}(F(t),e))}function on(t,e){const r=j(it.from(t).toHexString());return r.length>32&&tn.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function an(t,e){return{address:zt(t),storageKeys:(e||[]).map(((e,r)=>(32!==V(e)&&tn.throwArgumentError("invalid access list storageKey",`accessList[${t}:${r}]`,e),e.toLowerCase())))}}function hn(t){if(Array.isArray(t))return t.map(((t,e)=>Array.isArray(t)?(t.length>2&&tn.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${e}]`,t),an(t[0],t[1])):an(t.address,t.storageKeys)));const e=Object.keys(t).map((e=>{const r=t[e].reduce(((t,e)=>(t[e]=!0,t)),{});return an(e,Object.keys(r).sort())}));return e.sort(((t,e)=>t.address.localeCompare(e.address))),e}function un(t){return hn(t).map((t=>[t.address,t.storageKeys]))}function cn(t,e){if(null!=t.gasPrice){const e=it.from(t.gasPrice),r=it.from(t.maxFeePerGas||0);e.eq(r)||tn.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:e,maxFeePerGas:r})}const r=[on(t.chainId||0,"chainId"),on(t.nonce||0,"nonce"),on(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),on(t.maxFeePerGas||0,"maxFeePerGas"),on(t.gasLimit||0,"gasLimit"),null!=t.to?zt(t.to):"0x",on(t.value||0,"value"),t.data||"0x",un(t.accessList||[])];if(e){const t=Z(e);r.push(on(t.recoveryParam,"recoveryParam")),r.push(j(t.r)),r.push(j(t.s))}return W(["0x02",Ot(r)])}function ln(t,e){const r=[on(t.chainId||0,"chainId"),on(t.nonce||0,"nonce"),on(t.gasPrice||0,"gasPrice"),on(t.gasLimit||0,"gasLimit"),null!=t.to?zt(t.to):"0x",on(t.value||0,"value"),t.data||"0x",un(t.accessList||[])];if(e){const t=Z(e);r.push(on(t.recoveryParam,"recoveryParam")),r.push(j(t.r)),r.push(j(t.s))}return W(["0x01",Ot(r)])}function fn(t,e,r){try{const r=nn(e[0]).toNumber();if(0!==r&&1!==r)throw new Error("bad recid");t.v=r}catch(t){tn.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=J(e[1],32),t.s=J(e[2],32);try{const e=At(r(t));t.from=sn(e,{r:t.r,s:t.s,recoveryParam:t.v})}catch(t){console.log(t)}}function dn(t){const e=F(t);if(e[0]>127)return function(t){const e=Ct(t);9!==e.length&&6!==e.length&&tn.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:nn(e[0]).toNumber(),gasPrice:nn(e[1]),gasLimit:nn(e[2]),to:rn(e[3]),value:nn(e[4]),data:e[5],chainId:0};if(6===e.length)return r;try{r.v=it.from(e[6]).toNumber()}catch(t){return console.log(t),r}if(r.r=J(e[7],32),r.s=J(e[8],32),it.from(r.r).isZero()&&it.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=e.slice(0,6);0!==r.chainId&&(i.push($(r.chainId)),i.push("0x"),i.push("0x"),n-=2*r.chainId+8);const s=At(Ot(i));try{r.from=sn(s,{r:$(r.r),s:$(r.s),recoveryParam:n})}catch(t){console.log(t)}r.hash=At(t)}return r.type=null,r}(e);switch(e[0]){case 1:return function(t){const e=Ct(t.slice(1));8!==e.length&&11!==e.length&&tn.throwArgumentError("invalid component count for transaction type: 1","payload",$(t));const r={type:1,chainId:nn(e[0]).toNumber(),nonce:nn(e[1]).toNumber(),gasPrice:nn(e[2]),gasLimit:nn(e[3]),to:rn(e[4]),value:nn(e[5]),data:e[6],accessList:hn(e[7])};return 8===e.length||(r.hash=At(t),fn(r,e.slice(8),ln)),r}(e);case 2:return function(t){const e=Ct(t.slice(1));9!==e.length&&12!==e.length&&tn.throwArgumentError("invalid component count for transaction type: 2","payload",$(t));const r=nn(e[2]),n=nn(e[3]),i={type:2,chainId:nn(e[0]).toNumber(),nonce:nn(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:nn(e[4]),to:rn(e[5]),value:nn(e[6]),data:e[7],accessList:hn(e[8])};return 9===e.length||(i.hash=At(t),fn(i,e.slice(9),cn)),i}(e)}return tn.throwError(`unsupported transaction type: ${e[0]}`,B.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}var pn=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))};const mn=new B("contracts/5.4.0");function gn(t,e){return pn(this,void 0,void 0,(function*(){const r=yield e;try{return zt(r)}catch(t){}t||mn.throwError("a provider or signer is needed to resolve ENS names",B.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield t.resolveName(r);return null==n&&mn.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n}))}function yn(t,e,r){return pn(this,void 0,void 0,(function*(){return Array.isArray(r)?yield Promise.all(r.map(((r,n)=>yn(t,Array.isArray(e)?e[n]:e[r.name],r)))):"address"===r.type?yield gn(t,e):"tuple"===r.type?yield yn(t,e,r.components):"array"===r.baseType?Array.isArray(e)?yield Promise.all(e.map((e=>yn(t,e,r.arrayChildren)))):Promise.reject(new Error("invalid value for array")):e}))}function vn(t,e,r){return pn(this,void 0,void 0,(function*(){let n={};r.length===e.inputs.length+1&&"object"==typeof r[r.length-1]&&(n=pt(r.pop())),mn.checkArgumentCount(r.length,e.inputs.length,"passed to contract"),t.signer?n.from?n.from=dt({override:gn(t.signer,n.from),signer:t.signer.getAddress()}).then((t=>pn(this,void 0,void 0,(function*(){return zt(t.signer)!==t.override&&mn.throwError("Contract with a Signer cannot override from",B.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),t.override})))):n.from=t.signer.getAddress():n.from&&(n.from=gn(t.provider,n.from));const i=yield dt({args:yn(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:dt(n)||{}}),s=t.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},a=i.overrides;if(null!=a.nonce&&(o.nonce=it.from(a.nonce).toNumber()),null!=a.gasLimit&&(o.gasLimit=it.from(a.gasLimit)),null!=a.gasPrice&&(o.gasPrice=it.from(a.gasPrice)),null!=a.maxFeePerGas&&(o.maxFeePerGas=it.from(a.maxFeePerGas)),null!=a.maxPriorityFeePerGas&&(o.maxPriorityFeePerGas=it.from(a.maxPriorityFeePerGas)),null!=a.from&&(o.from=a.from),null!=a.type&&(o.type=a.type),null!=a.accessList&&(o.accessList=hn(a.accessList)),null==o.gasLimit&&null!=e.gas){let t=21e3;const r=F(s);for(let e=0;e<r.length;e++)t+=4,r[e]&&(t+=64);o.gasLimit=it.from(e.gas).add(t)}if(a.value){const t=it.from(a.value);t.isZero()||e.payable||mn.throwError("non-payable method cannot override value",B.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),o.value=t}delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas;const h=Object.keys(n).filter((t=>null!=n[t]));return h.length&&mn.throwError(`cannot override ${h.map((t=>JSON.stringify(t))).join(",")}`,B.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:h}),o}))}function bn(t,e,r){const n=t.signer||t.provider;return function(...i){return pn(this,void 0,void 0,(function*(){let s;if(i.length===e.inputs.length+1&&"object"==typeof i[i.length-1]){const t=pt(i.pop());null!=t.blockTag&&(s=yield t.blockTag),delete t.blockTag,i.push(t)}null!=t.deployTransaction&&(yield t._deployed(s));const o=yield vn(t,e,i),a=yield n.call(o,s);try{let n=t.interface.decodeFunctionResult(e,a);return r&&1===e.outputs.length&&(n=n[0]),n}catch(e){throw e.code===B.errors.CALL_EXCEPTION&&(e.address=t.address,e.args=i,e.transaction=o),e}}))}}function wn(t,e,r){return e.constant?bn(t,e,r):function(t,e){return function(...r){return pn(this,void 0,void 0,(function*(){t.signer||mn.throwError("sending a transaction requires a signer",B.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null!=t.deployTransaction&&(yield t._deployed());const n=yield vn(t,e,r),i=yield t.signer.sendTransaction(n),s=i.wait.bind(i);return i.wait=e=>s(e).then((e=>(e.events=e.logs.map((r=>{let n=vt(r),i=null;try{i=t.interface.parseLog(r)}catch(t){}return i&&(n.args=i.args,n.decode=(e,r)=>t.interface.decodeEventLog(i.eventFragment,e,r),n.event=i.name,n.eventSignature=i.signature),n.removeListener=()=>t.provider,n.getBlock=()=>t.provider.getBlock(e.blockHash),n.getTransaction=()=>t.provider.getTransaction(e.transactionHash),n.getTransactionReceipt=()=>Promise.resolve(e),n})),e))),i}))}}(t,e)}function _n(t){return!t.address||null!=t.topics&&0!==t.topics.length?(t.address||"*")+"@"+(t.topics?t.topics.map((t=>Array.isArray(t)?t.join("|"):t)).join(":"):""):"*"}class En{constructor(t,e){lt(this,"tag",t),lt(this,"filter",e),this._listeners=[]}addListener(t,e){this._listeners.push({listener:t,once:e})}removeListener(t){let e=!1;this._listeners=this._listeners.filter((r=>!(!e&&r.listener===t)||(e=!0,!1)))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map((t=>t.listener))}listenerCount(){return this._listeners.length}run(t){const e=this.listenerCount();return this._listeners=this._listeners.filter((e=>{const r=t.slice();return setTimeout((()=>{e.listener.apply(this,r)}),0),!e.once})),e}prepareEvent(t){}getEmit(t){return[t]}}class Sn extends En{constructor(){super("error",null)}}class kn extends En{constructor(t,e,r,n){const i={address:t};let s=e.getEventTopic(r);n?(s!==n[0]&&mn.throwArgumentError("topic mismatch","topics",n),i.topics=n.slice()):i.topics=[s],super(_n(i),i),lt(this,"address",t),lt(this,"interface",e),lt(this,"fragment",r)}prepareEvent(t){super.prepareEvent(t),t.event=this.fragment.name,t.eventSignature=this.fragment.format(),t.decode=(t,e)=>this.interface.decodeEventLog(this.fragment,t,e);try{t.args=this.interface.decodeEventLog(this.fragment,t.data,t.topics)}catch(e){t.args=null,t.decodeError=e}}getEmit(t){const e=function(t){const e=[],r=function(t,n){if(Array.isArray(n))for(let i in n){const s=t.slice();s.push(i);try{r(s,n[i])}catch(t){e.push({path:s,error:t})}}};return r([],t),e}(t.args);if(e.length)throw e[0].error;const r=(t.args||[]).slice();return r.push(t),r}}class xn extends En{constructor(t,e){super("*",{address:t}),lt(this,"address",t),lt(this,"interface",e)}prepareEvent(t){super.prepareEvent(t);try{const e=this.interface.parseLog(t);t.event=e.name,t.eventSignature=e.signature,t.decode=(t,r)=>this.interface.decodeEventLog(e.eventFragment,t,r),t.args=e.args}catch(t){}}}class Nn extends class{constructor(t,e,r){mn.checkNew(new.target,Nn),lt(this,"interface",ft(new.target,"getInterface")(e)),null==r?(lt(this,"provider",null),lt(this,"signer",null)):ur.isSigner(r)?(lt(this,"provider",r.provider||null),lt(this,"signer",r)):ir.isProvider(r)?(lt(this,"provider",r),lt(this,"signer",null)):mn.throwArgumentError("invalid signer or provider","signerOrProvider",r),lt(this,"callStatic",{}),lt(this,"estimateGas",{}),lt(this,"functions",{}),lt(this,"populateTransaction",{}),lt(this,"filters",{});{const t={};Object.keys(this.interface.events).forEach((e=>{const r=this.interface.events[e];lt(this.filters,e,((...t)=>({address:this.address,topics:this.interface.encodeFilterTopics(r,t)}))),t[r.name]||(t[r.name]=[]),t[r.name].push(e)})),Object.keys(t).forEach((e=>{const r=t[e];1===r.length?lt(this.filters,e,this.filters[r[0]]):mn.warn(`Duplicate definition of ${e} (${r.join(", ")})`)}))}if(lt(this,"_runningEvents",{}),lt(this,"_wrappedEmits",{}),null==t&&mn.throwArgumentError("invalid contract address or ENS name","addressOrName",t),lt(this,"address",t),this.provider)lt(this,"resolvedAddress",gn(this.provider,t));else try{lt(this,"resolvedAddress",Promise.resolve(zt(t)))}catch(t){mn.throwError("provider is required to use ENS name as contract address",B.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}const n={},i={};Object.keys(this.interface.functions).forEach((t=>{const e=this.interface.functions[t];if(i[t])mn.warn(`Duplicate ABI entry for ${JSON.stringify(t)}`);else{i[t]=!0;{const r=e.name;n[r]||(n[r]=[]),n[r].push(t)}null==this[t]&&lt(this,t,wn(this,e,!0)),null==this.functions[t]&&lt(this.functions,t,wn(this,e,!1)),null==this.callStatic[t]&&lt(this.callStatic,t,bn(this,e,!0)),null==this.populateTransaction[t]&&lt(this.populateTransaction,t,function(t,e){return function(...r){return vn(t,e,r)}}(this,e)),null==this.estimateGas[t]&&lt(this.estimateGas,t,function(t,e){const r=t.signer||t.provider;return function(...n){return pn(this,void 0,void 0,(function*(){r||mn.throwError("estimate require a provider or signer",B.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield vn(t,e,n);return yield r.estimateGas(i)}))}}(this,e))}})),Object.keys(n).forEach((t=>{const e=n[t];if(e.length>1)return;const r=e[0];try{null==this[t]&&lt(this,t,this[r])}catch(t){}null==this.functions[t]&&lt(this.functions,t,this.functions[r]),null==this.callStatic[t]&&lt(this.callStatic,t,this.callStatic[r]),null==this.populateTransaction[t]&&lt(this.populateTransaction,t,this.populateTransaction[r]),null==this.estimateGas[t]&&lt(this.estimateGas,t,this.estimateGas[r])}))}static getContractAddress(t){return Gt(t)}static getInterface(t){return tr.isInterface(t)?t:new tr(t)}deployed(){return this._deployed()}_deployed(t){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then((()=>this)):this._deployedPromise=this.provider.getCode(this.address,t).then((t=>("0x"===t&&mn.throwError("contract not deployed",B.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this)))),this._deployedPromise}fallback(t){this.signer||mn.throwError("sending a transactions require a signer",B.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const e=pt(t||{});return["from","to"].forEach((function(t){null!=e[t]&&mn.throwError("cannot override "+t,B.errors.UNSUPPORTED_OPERATION,{operation:t})})),e.to=this.resolvedAddress,this.deployed().then((()=>this.signer.sendTransaction(e)))}connect(t){"string"==typeof t&&(t=new cr(t,this.provider));const e=new this.constructor(this.address,this.interface,t);return this.deployTransaction&&lt(e,"deployTransaction",this.deployTransaction),e}attach(t){return new this.constructor(t,this.interface,this.signer||this.provider)}static isIndexed(t){return Xe.isIndexed(t)}_normalizeRunningEvent(t){return this._runningEvents[t.tag]?this._runningEvents[t.tag]:t}_getRunningEvent(t){if("string"==typeof t){if("error"===t)return this._normalizeRunningEvent(new Sn);if("event"===t)return this._normalizeRunningEvent(new En("event",null));if("*"===t)return this._normalizeRunningEvent(new xn(this.address,this.interface));const e=this.interface.getEvent(t);return this._normalizeRunningEvent(new kn(this.address,this.interface,e))}if(t.topics&&t.topics.length>0){try{const e=t.topics[0];if("string"!=typeof e)throw new Error("invalid topic");const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new kn(this.address,this.interface,r,t.topics))}catch(t){}const e={address:this.address,topics:t.topics};return this._normalizeRunningEvent(new En(_n(e),e))}return this._normalizeRunningEvent(new xn(this.address,this.interface))}_checkRunningEvents(t){if(0===t.listenerCount()){delete this._runningEvents[t.tag];const e=this._wrappedEmits[t.tag];e&&t.filter&&(this.provider.off(t.filter,e),delete this._wrappedEmits[t.tag])}}_wrapEvent(t,e,r){const n=vt(e);return n.removeListener=()=>{r&&(t.removeListener(r),this._checkRunningEvents(t))},n.getBlock=()=>this.provider.getBlock(e.blockHash),n.getTransaction=()=>this.provider.getTransaction(e.transactionHash),n.getTransactionReceipt=()=>this.provider.getTransactionReceipt(e.transactionHash),t.prepareEvent(n),n}_addEventListener(t,e,r){if(this.provider||mn.throwError("events require a provider or a signer with a provider",B.errors.UNSUPPORTED_OPERATION,{operation:"once"}),t.addListener(e,r),this._runningEvents[t.tag]=t,!this._wrappedEmits[t.tag]){const r=r=>{let n=this._wrapEvent(t,r,e);if(null==n.decodeError)try{const e=t.getEmit(n);this.emit(t.filter,...e)}catch(t){n.decodeError=t.error}null!=t.filter&&this.emit("event",n),null!=n.decodeError&&this.emit("error",n.decodeError,n)};this._wrappedEmits[t.tag]=r,null!=t.filter&&this.provider.on(t.filter,r)}}queryFilter(t,e,r){const n=this._getRunningEvent(t),i=pt(n.filter);return"string"==typeof e&&z(e,32)?(null!=r&&mn.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),i.blockHash=e):(i.fromBlock=null!=e?e:0,i.toBlock=null!=r?r:"latest"),this.provider.getLogs(i).then((t=>t.map((t=>this._wrapEvent(n,t,null)))))}on(t,e){return this._addEventListener(this._getRunningEvent(t),e,!1),this}once(t,e){return this._addEventListener(this._getRunningEvent(t),e,!0),this}emit(t,...e){if(!this.provider)return!1;const r=this._getRunningEvent(t),n=r.run(e)>0;return this._checkRunningEvents(r),n}listenerCount(t){return this.provider?null==t?Object.keys(this._runningEvents).reduce(((t,e)=>t+this._runningEvents[e].listenerCount()),0):this._getRunningEvent(t).listenerCount():0}listeners(t){if(!this.provider)return[];if(null==t){const t=[];for(let e in this._runningEvents)this._runningEvents[e].listeners().forEach((e=>{t.push(e)}));return t}return this._getRunningEvent(t).listeners()}removeAllListeners(t){if(!this.provider)return this;if(null==t){for(const t in this._runningEvents){const e=this._runningEvents[t];e.removeAllListeners(),this._checkRunningEvents(e)}return this}const e=this._getRunningEvent(t);return e.removeAllListeners(),this._checkRunningEvents(e),this}off(t,e){if(!this.provider)return this;const r=this._getRunningEvent(t);return r.removeListener(e),this._checkRunningEvents(r),this}removeListener(t,e){return this.off(t,e)}}{}const An="hash/5.4.0";var Pn=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))};const Mn=new B(An),Tn=new Uint8Array(32);Tn.fill(0);const In=it.from(-1),On=it.from(0),Bn=it.from(1),Rn=it.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const Cn=J(Bn.toHexString(),32),Ln=J(On.toHexString(),32),Dn={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Un=["name","version","chainId","verifyingContract","salt"];function Fn(t){return function(e){return"string"!=typeof e&&Mn.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const qn={name:Fn("name"),version:Fn("version"),chainId:function(t){try{return it.from(t).toString()}catch(t){}return Mn.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return zt(t).toLowerCase()}catch(t){}return Mn.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=F(t);if(32!==e.length)throw new Error("bad length");return $(e)}catch(t){}return Mn.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function jn(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=""===e[1],n=parseInt(e[2]||"256");(n%8!=0||n>256||e[2]&&e[2]!==String(n))&&Mn.throwArgumentError("invalid numeric width","type",t);const i=Rn.mask(r?n-1:n),s=r?i.add(Bn).mul(In):On;return function(e){const r=it.from(e);return(r.lt(s)||r.gt(i))&&Mn.throwArgumentError(`value out-of-bounds for ${t}`,"value",e),J(r.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(0===r||r>32||e[1]!==String(r))&&Mn.throwArgumentError("invalid bytes width","type",t),function(e){return F(e).length!==r&&Mn.throwArgumentError(`invalid length for ${t}`,"value",e),function(t){const e=F(t),r=e.length%32;return r?W([e,Tn.slice(r)]):$(e)}(e)}}}switch(t){case"address":return function(t){return J(zt(t),32)};case"bool":return function(t){return t?Cn:Ln};case"bytes":return function(t){return At(t)};case"string":return function(t){return te(t)}}return null}function zn(t,e){return`${t}(${e.map((({name:t,type:e})=>e+" "+t)).join(",")})`}class Gn{constructor(t){lt(this,"types",Object.freeze(vt(t))),lt(this,"_encoderCache",{}),lt(this,"_types",{});const e={},r={},n={};Object.keys(t).forEach((t=>{e[t]={},r[t]=[],n[t]={}}));for(const n in t){const i={};t[n].forEach((s=>{i[s.name]&&Mn.throwArgumentError(`duplicate variable name ${JSON.stringify(s.name)} in ${JSON.stringify(n)}`,"types",t),i[s.name]=!0;const o=s.type.match(/^([^\x5b]*)(\x5b|$)/)[1];o===n&&Mn.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",t);jn(o)||(r[o]||Mn.throwArgumentError(`unknown type ${JSON.stringify(o)}`,"types",t),r[o].push(n),e[n][o]=!0)}))}const i=Object.keys(r).filter((t=>0===r[t].length));0===i.length?Mn.throwArgumentError("missing primary type","types",t):i.length>1&&Mn.throwArgumentError(`ambiguous primary types or unused types: ${i.map((t=>JSON.stringify(t))).join(", ")}`,"types",t),lt(this,"primaryType",i[0]),function i(s,o){o[s]&&Mn.throwArgumentError(`circular type reference to ${JSON.stringify(s)}`,"types",t),o[s]=!0,Object.keys(e[s]).forEach((t=>{r[t]&&(i(t,o),Object.keys(o).forEach((e=>{n[e][t]=!0})))})),delete o[s]}(this.primaryType,{});for(const e in n){const r=Object.keys(n[e]);r.sort(),this._types[e]=zn(e,t[e])+r.map((e=>zn(e,t[e]))).join("")}}getEncoder(t){let e=this._encoderCache[t];return e||(e=this._encoderCache[t]=this._getEncoder(t)),e}_getEncoder(t){{const e=jn(t);if(e)return e}const e=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(e){const t=e[1],r=this.getEncoder(t),n=parseInt(e[3]);return e=>{n>=0&&e.length!==n&&Mn.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e);let i=e.map(r);return this._types[t]&&(i=i.map(At)),At(W(i))}}const r=this.types[t];if(r){const e=te(this._types[t]);return t=>{const n=r.map((({name:e,type:r})=>{const n=this.getEncoder(r)(t[e]);return this._types[r]?At(n):n}));return n.unshift(e),W(n)}}return Mn.throwArgumentError(`unknown type: ${t}`,"type",t)}encodeType(t){const e=this._types[t];return e||Mn.throwArgumentError(`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return At(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,r){if(jn(t))return r(t,e);const n=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const t=n[1],i=parseInt(n[3]);return i>=0&&e.length!==i&&Mn.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e),e.map((e=>this._visit(t,e,r)))}const i=this.types[t];return i?i.reduce(((t,{name:n,type:i})=>(t[n]=this._visit(i,e[n],r),t)),{}):Mn.throwArgumentError(`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new Gn(t)}static getPrimaryType(t){return Gn.from(t).primaryType}static hashStruct(t,e,r){return Gn.from(e).hashStruct(t,r)}static hashDomain(t){const e=[];for(const r in t){const n=Dn[r];n||Mn.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",t),e.push({name:r,type:n})}return e.sort(((t,e)=>Un.indexOf(t.name)-Un.indexOf(e.name))),Gn.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,r){return W(["0x1901",Gn.hashDomain(t),Gn.from(e).hash(r)])}static hash(t,e,r){return At(Gn.encode(t,e,r))}static resolveNames(t,e,r,n){return Pn(this,void 0,void 0,(function*(){t=pt(t);const i={};t.verifyingContract&&!z(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const s=Gn.from(e);s.visit(r,((t,e)=>("address"!==t||z(e,20)||(i[e]="0x"),e)));for(const t in i)i[t]=yield n(t);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),r=s.visit(r,((t,e)=>"address"===t&&i[e]?i[e]:e)),{domain:t,value:r}}))}static getPayload(t,e,r){Gn.hashDomain(t);const n={},i=[];Un.forEach((e=>{const r=t[e];null!=r&&(n[e]=qn[e](r),i.push({name:e,type:Dn[e]}))}));const s=Gn.from(e),o=pt(e);return o.EIP712Domain?Mn.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",e):o.EIP712Domain=i,s.encode(r),{types:o,domain:n,primaryType:s.primaryType,message:s.visit(r,((t,e)=>{if(t.match(/^bytes(\d*)/))return $(F(e));if(t.match(/^u?int/))return it.from(e).toString();switch(t){case"address":return e.toLowerCase();case"bool":return!!e;case"string":return"string"!=typeof e&&Mn.throwArgumentError("invalid string","value",e),e}return Mn.throwArgumentError("unsupported type","type",t)}))}}}function $n(t){t=F(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}var Vn=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))};function Hn(t,e){return Vn(this,void 0,void 0,(function*(){null==e&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0,mode:"cors",cache:"no-cache",credentials:"same-origin",redirect:"follow",referrer:"client"},n=yield fetch(t,r),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach(((t,e)=>{s[e.toLowerCase()]=t})):n.headers.keys().forEach((t=>{s[t.toLowerCase()]=n.headers.get(t)})),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:F(new Uint8Array(i))}}))}var Wn=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))};const Kn=new B("web/5.4.0");function Jn(t){return new Promise((e=>{setTimeout(e,t)}))}function Zn(t,e){if(null==t)return null;if("string"==typeof t)return t;if(D(t)){if(e&&("text"===e.split("/")[0]||"application/json"===e.split(";")[0].trim()))try{return Yt(t)}catch(t){}return $(t)}return t}function Xn(t,e,r){let n=null;if(null!=e){n=Zt(e);const r="string"==typeof t?{url:t}:pt(t);if(r.headers){0!==Object.keys(r.headers).filter((t=>"content-type"===t.toLowerCase())).length||(r.headers=pt(r.headers),r.headers["content-type"]="application/json")}else r.headers={"content-type":"application/json"};t=r}return function(t,e,r){const n="object"==typeof t&&null!=t.throttleLimit?t.throttleLimit:12;Kn.assertArgument(n>0&&n%1==0,"invalid connection throttle limit","connection.throttleLimit",n);const i="object"==typeof t?t.throttleCallback:null,s="object"==typeof t&&"number"==typeof t.throttleSlotInterval?t.throttleSlotInterval:100;Kn.assertArgument(s>0&&s%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o={};let a=null;const h={method:"GET"};let u=!1,c=12e4;if("string"==typeof t)a=t;else if("object"==typeof t){if(null!=t&&null!=t.url||Kn.throwArgumentError("missing URL","connection.url",t),a=t.url,"number"==typeof t.timeout&&t.timeout>0&&(c=t.timeout),t.headers)for(const e in t.headers)o[e.toLowerCase()]={key:e,value:String(t.headers[e])},["if-none-match","if-modified-since"].indexOf(e.toLowerCase())>=0&&(u=!0);if(h.allowGzip=!!t.allowGzip,null!=t.user&&null!=t.password){"https:"!==a.substring(0,6)&&!0!==t.allowInsecureAuthentication&&Kn.throwError("basic authentication requires a secure https url",B.errors.INVALID_ARGUMENT,{argument:"url",url:a,user:t.user,password:"[REDACTED]"});const e=t.user+":"+t.password;o.authorization={key:"Authorization",value:"Basic "+$n(Zt(e))}}}e&&(h.method="POST",h.body=e,null==o["content-type"]&&(o["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==o["content-length"]&&(o["content-length"]={key:"Content-Length",value:String(e.length)}));const l={};Object.keys(o).forEach((t=>{const e=o[t];l[e.key]=e.value})),h.headers=l;const f=function(){let t=null;return{promise:new Promise((function(e,r){c&&(t=setTimeout((()=>{null!=t&&(t=null,r(Kn.makeError("timeout",B.errors.TIMEOUT,{requestBody:Zn(h.body,l["content-type"]),requestMethod:h.method,timeout:c,url:a})))}),c))})),cancel:function(){null!=t&&(clearTimeout(t),t=null)}}}(),d=function(){return Wn(this,void 0,void 0,(function*(){for(let t=0;t<n;t++){let e=null;try{if(e=yield Hn(a,h),429===e.statusCode&&t<n){let r=!0;if(i&&(r=yield i(t,a)),r){let r=0;const n=e.headers["retry-after"];r="string"==typeof n&&n.match(/^[1-9][0-9]*$/)?1e3*parseInt(n):s*parseInt(String(Math.random()*Math.pow(2,t))),yield Jn(r);continue}}}catch(t){e=t.response,null==e&&(f.cancel(),Kn.throwError("missing response",B.errors.SERVER_ERROR,{requestBody:Zn(h.body,l["content-type"]),requestMethod:h.method,serverError:t,url:a}))}let o=e.body;if(u&&304===e.statusCode?o=null:(e.statusCode<200||e.statusCode>=300)&&(f.cancel(),Kn.throwError("bad response",B.errors.SERVER_ERROR,{status:e.statusCode,headers:e.headers,body:Zn(o,e.headers?e.headers["content-type"]:null),requestBody:Zn(h.body,l["content-type"]),requestMethod:h.method,url:a})),r)try{const t=yield r(o,e);return f.cancel(),t}catch(r){if(r.throttleRetry&&t<n){let e=!0;if(i&&(e=yield i(t,a)),e){const e=s*parseInt(String(Math.random()*Math.pow(2,t)));yield Jn(e);continue}}f.cancel(),Kn.throwError("processing response error",B.errors.SERVER_ERROR,{body:Zn(o,e.headers?e.headers["content-type"]:null),error:r,requestBody:Zn(h.body,l["content-type"]),requestMethod:h.method,url:a})}return f.cancel(),o}return Kn.throwError("failed response",B.errors.SERVER_ERROR,{requestBody:Zn(h.body,l["content-type"]),requestMethod:h.method,url:a})}))}();return Promise.race([f.promise,d])}(t,n,((t,e)=>{let n=null;if(null!=t)try{n=JSON.parse(Yt(t))}catch(e){Kn.throwError("invalid JSON",B.errors.SERVER_ERROR,{body:t,error:e})}return r&&(n=r(n,e)),n}))}function Yn(t,e){return e||(e={}),null==(e=pt(e)).floor&&(e.floor=0),null==e.ceiling&&(e.ceiling=1e4),null==e.interval&&(e.interval=250),new Promise((function(r,n){let i=null,s=!1;const o=()=>!s&&(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout((()=>{o()&&n(new Error("timeout"))}),e.timeout));const a=e.retryLimit;let h=0;!function i(){return t().then((function(t){if(void 0!==t)o()&&r(t);else if(e.oncePoll)e.oncePoll.once("poll",i);else if(e.onceBlock)e.onceBlock.once("block",i);else if(!s){if(h++,h>a)return void(o()&&n(new Error("retry limit reached")));let t=e.interval*parseInt(String(Math.random()*Math.pow(2,h)));t<e.floor&&(t=e.floor),t>e.ceiling&&(t=e.ceiling),setTimeout(i,t)}return null}),(function(t){o()&&n(t)}))}()}))}const Qn="providers/5.4.1";class ti{constructor(t){lt(this,"alphabet",t),lt(this,"base",t.length),lt(this,"_alphabetMap",{}),lt(this,"_leader",t.charAt(0));for(let e=0;e<t.length;e++)this._alphabetMap[t.charAt(e)]=e}encode(t){let e=F(t);if(0===e.length)return"";let r=[0];for(let t=0;t<e.length;++t){let n=e[t];for(let t=0;t<r.length;++t)n+=r[t]<<8,r[t]=n%this.base,n=n/this.base|0;for(;n>0;)r.push(n%this.base),n=n/this.base|0}let n="";for(let t=0;0===e[t]&&t<e.length-1;++t)n+=this._leader;for(let t=r.length-1;t>=0;--t)n+=this.alphabet[r[t]];return n}decode(t){if("string"!=typeof t)throw new TypeError("Expected String");let e=[];if(0===t.length)return new Uint8Array(e);e.push(0);for(let r=0;r<t.length;r++){let n=this._alphabetMap[t[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");let i=n;for(let t=0;t<e.length;++t)i+=e[t]*this.base,e[t]=255&i,i>>=8;for(;i>0;)e.push(255&i),i>>=8}for(let r=0;t[r]===this._leader&&r<t.length-1;++r)e.push(0);return F(new Uint8Array(e.reverse()))}}new ti("abcdefghijklmnopqrstuvwxyz234567");const ei=new ti("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function ri(t,e){e||(e=function(t){return[parseInt(t,16)]});let r=0,n={};return t.split(",").forEach((t=>{let i=t.split(":");r+=parseInt(i[0],16),n[r]=e(i[1])})),n}function ni(t){let e=0;return t.split(",").map((t=>{let r=t.split("-");1===r.length?r[1]="0":""===r[1]&&(r[1]="1");let n=e+parseInt(r[0],16);return e=parseInt(r[1],16),{l:n,h:e}}))}function ii(t,e){let r=0;for(let n=0;n<e.length;n++){let i=e[n];if(r+=i.l,t>=r&&t<=r+i.h&&(t-r)%(i.d||1)==0){if(i.e&&-1!==i.e.indexOf(t-r))continue;return i}}return null}const si=ni("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),oi="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((t=>parseInt(t,16))),ai=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],hi=ri("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),ui=ri("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),ci=ri("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",(function(t){if(t.length%4!=0)throw new Error("bad data");let e=[];for(let r=0;r<t.length;r+=4)e.push(parseInt(t.substring(r,r+4),16));return e})),li=ni("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function fi(t){if(t.match(/^[a-z0-9-]*$/i)&&t.length<=59)return t.toLowerCase();let e=Qt(t);var r;r=e.map((t=>{if(oi.indexOf(t)>=0)return[];if(t>=65024&&t<=65039)return[];let e=function(t){let e=ii(t,ai);if(e)return[t+e.s];let r=hi[t];if(r)return r;let n=ui[t];return n?[t+n[0]]:ci[t]||null}(t);return e||[t]})),e=r.reduce(((t,e)=>(e.forEach((e=>{t.push(e)})),t)),[]),e=Qt(Xt(e),Vt.NFKC),e.forEach((t=>{if(ii(t,li))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")})),e.forEach((t=>{if(ii(t,si))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")}));let n=Xt(e);if("-"===n.substring(0,1)||"--"===n.substring(2,4)||"-"===n.substring(n.length-1))throw new Error("invalid hyphen");if(n.length>63)throw new Error("too long");return n}const di=new B(An),pi=new Uint8Array(32);pi.fill(0);const mi=new RegExp("^((.*)\\.)?([^.]+)$");function gi(t){"string"!=typeof t&&di.throwArgumentError("invalid ENS name; not a string","name",t);let e=t,r=pi;for(;e.length;){const n=e.match(mi);null!=n&&""!==n[2]||di.throwArgumentError("invalid ENS address; missing component","name",t);r=At(q([r,At(Zt(fi(n[3])))])),e=n[2]||""}return $(r)}const yi=new B("networks/5.4.1");function vi(t){const e=function(e,r){null==r&&(r={});const n=[];if(e.InfuraProvider)try{n.push(new e.InfuraProvider(t,r.infura))}catch(t){}if(e.EtherscanProvider){const r=["ropsten"];try{const i=new e.EtherscanProvider(t);i.network&&-1===r.indexOf(i.network.name)&&n.push(i)}catch(t){}}if(e.AlchemyProvider)try{n.push(new e.AlchemyProvider(t,r.alchemy))}catch(t){}if(e.PocketProvider){const r=["goerli","ropsten","rinkeby"];try{const i=new e.PocketProvider(t);i.network&&-1===r.indexOf(i.network.name)&&n.push(i)}catch(t){}}if(e.CloudflareProvider)try{n.push(new e.CloudflareProvider(t))}catch(t){}if(0===n.length)return null;if(e.FallbackProvider){let i=1;return null!=r.quorum?i=r.quorum:"homestead"===t&&(i=2),new e.FallbackProvider(n,i)}return n[0]};return e.renetwork=function(t){return vi(t)},e}function bi(t,e){const r=function(r,n){return r.JsonRpcProvider?new r.JsonRpcProvider(t,e):null};return r.renetwork=function(e){return bi(t,e)},r}const wi={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:vi("homestead")},_i={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:vi("ropsten")},Ei={chainId:63,name:"classicMordor",_defaultProvider:bi("https://www.ethercluster.com/mordor","classicMordor")},Si={unspecified:{chainId:0,name:"unspecified"},homestead:wi,mainnet:wi,morden:{chainId:2,name:"morden"},ropsten:_i,testnet:_i,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:vi("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:vi("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:vi("goerli")},classic:{chainId:61,name:"classic",_defaultProvider:bi("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:Ei,classicTestnet:Ei,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:bi("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic"},maticmum:{chainId:80001,name:"maticmum"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};new B("sha2/5.4.0");function ki(t){return"0x"+fr().sha256().update(F(t)).digest("hex")}var xi=r(2882),Ni=r.n(xi);const Ai=new B(Qn);class Pi{constructor(){Ai.checkNew(new.target,Pi),this.formats=this.getDefaultFormats()}getDefaultFormats(){const t={},e=this.address.bind(this),r=this.bigNumber.bind(this),n=this.blockTag.bind(this),i=this.data.bind(this),s=this.hash.bind(this),o=this.hex.bind(this),a=this.number.bind(this),h=this.type.bind(this);return t.transaction={hash:s,type:h,accessList:Pi.allowNull(this.accessList.bind(this),null),blockHash:Pi.allowNull(s,null),blockNumber:Pi.allowNull(a,null),transactionIndex:Pi.allowNull(a,null),confirmations:Pi.allowNull(a,null),from:e,gasPrice:Pi.allowNull(r),maxPriorityFeePerGas:Pi.allowNull(r),maxFeePerGas:Pi.allowNull(r),gasLimit:r,to:Pi.allowNull(e,null),value:r,nonce:a,data:i,r:Pi.allowNull(this.uint256),s:Pi.allowNull(this.uint256),v:Pi.allowNull(a),creates:Pi.allowNull(e,null),raw:Pi.allowNull(i)},t.transactionRequest={from:Pi.allowNull(e),nonce:Pi.allowNull(a),gasLimit:Pi.allowNull(r),gasPrice:Pi.allowNull(r),maxPriorityFeePerGas:Pi.allowNull(r),maxFeePerGas:Pi.allowNull(r),to:Pi.allowNull(e),value:Pi.allowNull(r),data:Pi.allowNull((t=>this.data(t,!0))),type:Pi.allowNull(a),accessList:Pi.allowNull(this.accessList.bind(this),null)},t.receiptLog={transactionIndex:a,blockNumber:a,transactionHash:s,address:e,topics:Pi.arrayOf(s),data:i,logIndex:a,blockHash:s},t.receipt={to:Pi.allowNull(this.address,null),from:Pi.allowNull(this.address,null),contractAddress:Pi.allowNull(e,null),transactionIndex:a,root:Pi.allowNull(o),gasUsed:r,logsBloom:Pi.allowNull(i),blockHash:s,transactionHash:s,logs:Pi.arrayOf(this.receiptLog.bind(this)),blockNumber:a,confirmations:Pi.allowNull(a,null),cumulativeGasUsed:r,effectiveGasPrice:Pi.allowNull(r),status:Pi.allowNull(a),type:h},t.block={hash:s,parentHash:s,number:a,timestamp:a,nonce:Pi.allowNull(o),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:e,extraData:i,transactions:Pi.allowNull(Pi.arrayOf(s)),baseFeePerGas:Pi.allowNull(r)},t.blockWithTransactions=pt(t.block),t.blockWithTransactions.transactions=Pi.allowNull(Pi.arrayOf(this.transactionResponse.bind(this))),t.filter={fromBlock:Pi.allowNull(n,void 0),toBlock:Pi.allowNull(n,void 0),blockHash:Pi.allowNull(s,void 0),address:Pi.allowNull(e,void 0),topics:Pi.allowNull(this.topics.bind(this),void 0)},t.filterLog={blockNumber:Pi.allowNull(a),blockHash:Pi.allowNull(s),transactionIndex:a,removed:Pi.allowNull(this.boolean.bind(this)),address:e,data:Pi.allowFalsish(i,"0x"),topics:Pi.arrayOf(s),transactionHash:s,logIndex:a},t}accessList(t){return hn(t||[])}number(t){return"0x"===t?0:it.from(t).toNumber()}type(t){return"0x"===t||null==t?0:it.from(t).toNumber()}bigNumber(t){return it.from(t)}boolean(t){if("boolean"==typeof t)return t;if("string"==typeof t){if("true"===(t=t.toLowerCase()))return!0;if("false"===t)return!1}throw new Error("invalid boolean - "+t)}hex(t,e){return"string"==typeof t&&(e||"0x"===t.substring(0,2)||(t="0x"+t),z(t))?t.toLowerCase():Ai.throwArgumentError("invalid hash","value",t)}data(t,e){const r=this.hex(t,e);if(r.length%2!=0)throw new Error("invalid data; odd-length - "+t);return r}address(t){return zt(t)}callAddress(t){if(!z(t,32))return null;const e=zt(H(t,12));return"0x0000000000000000000000000000000000000000"===e?null:e}contractAddress(t){return Gt(t)}blockTag(t){if(null==t)return"latest";if("earliest"===t)return"0x0";if("latest"===t||"pending"===t)return t;if("number"==typeof t||z(t))return K(t);throw new Error("invalid blockTag")}hash(t,e){const r=this.hex(t,e);return 32!==V(r)?Ai.throwArgumentError("invalid hash","value",t):r}difficulty(t){if(null==t)return null;const e=it.from(t);try{return e.toNumber()}catch(t){}return null}uint256(t){if(!z(t))throw new Error("invalid uint256");return J(t,32)}_block(t,e){return null!=t.author&&null==t.miner&&(t.miner=t.author),Pi.check(e,t)}block(t){return this._block(t,this.formats.block)}blockWithTransactions(t){return this._block(t,this.formats.blockWithTransactions)}transactionRequest(t){return Pi.check(this.formats.transactionRequest,t)}transactionResponse(t){null!=t.gas&&null==t.gasLimit&&(t.gasLimit=t.gas),t.to&&it.from(t.to).isZero()&&(t.to="0x0000000000000000000000000000000000000000"),null!=t.input&&null==t.data&&(t.data=t.input),null==t.to&&null==t.creates&&(t.creates=this.contractAddress(t)),1===t.type&&null==t.accessList&&(t.accessList=[]);const e=Pi.check(this.formats.transaction,t);if(null!=t.chainId){let r=t.chainId;z(r)&&(r=it.from(r).toNumber()),e.chainId=r}else{let r=t.networkId;null==r&&null==e.v&&(r=t.chainId),z(r)&&(r=it.from(r).toNumber()),"number"!=typeof r&&null!=e.v&&(r=(e.v-35)/2,r<0&&(r=0),r=parseInt(r)),"number"!=typeof r&&(r=0),e.chainId=r}return e.blockHash&&"x"===e.blockHash.replace(/0/g,"")&&(e.blockHash=null),e}transaction(t){return dn(t)}receiptLog(t){return Pi.check(this.formats.receiptLog,t)}receipt(t){const e=Pi.check(this.formats.receipt,t);if(null!=e.root)if(e.root.length<=4){const t=it.from(e.root).toNumber();0===t||1===t?(null!=e.status&&e.status!==t&&Ai.throwArgumentError("alt-root-status/status mismatch","value",{root:e.root,status:e.status}),e.status=t,delete e.root):Ai.throwArgumentError("invalid alt-root-status","value.root",e.root)}else 66!==e.root.length&&Ai.throwArgumentError("invalid root hash","value.root",e.root);return null!=e.status&&(e.byzantium=!0),e}topics(t){return Array.isArray(t)?t.map((t=>this.topics(t))):null!=t?this.hash(t,!0):null}filter(t){return Pi.check(this.formats.filter,t)}filterLog(t){return Pi.check(this.formats.filterLog,t)}static check(t,e){const r={};for(const n in t)try{const i=t[n](e[n]);void 0!==i&&(r[n]=i)}catch(t){throw t.checkKey=n,t.checkValue=e[n],t}return r}static allowNull(t,e){return function(r){return null==r?e:t(r)}}static allowFalsish(t,e){return function(r){return r?t(r):e}}static arrayOf(t){return function(e){if(!Array.isArray(e))throw new Error("not an array");const r=[];return e.forEach((function(e){r.push(t(e))})),r}}}var Mi=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))};const Ti=new B(Qn);function Ii(t){return null==t?"null":(32!==V(t)&&Ti.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function Oi(t){for(t=t.slice();t.length>0&&null==t[t.length-1];)t.pop();return t.map((t=>{if(Array.isArray(t)){const e={};t.forEach((t=>{e[Ii(t)]=!0}));const r=Object.keys(e);return r.sort(),r.join("|")}return Ii(t)})).join("&")}function Bi(t){if("string"==typeof t){if(32===V(t=t.toLowerCase()))return"tx:"+t;if(-1===t.indexOf(":"))return t}else{if(Array.isArray(t))return"filter:*:"+Oi(t);if(nr.isForkEvent(t))throw Ti.warn("not implemented"),new Error("not implemented");if(t&&"object"==typeof t)return"filter:"+(t.address||"*")+":"+Oi(t.topics||[])}throw new Error("invalid event - "+t)}function Ri(){return(new Date).getTime()}function Ci(t){return new Promise((e=>{setTimeout(e,t)}))}const Li=["block","network","pending","poll"];class Di{constructor(t,e,r){lt(this,"tag",t),lt(this,"listener",e),lt(this,"once",r)}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const t=this.tag.split(":");return"tx"!==t[0]?null:t[1]}get filter(){const t=this.tag.split(":");if("filter"!==t[0])return null;const e=t[1],r=""===(n=t[2])?[]:n.split(/&/g).map((t=>{if(""===t)return[];const e=t.split("|").map((t=>"null"===t?null:t));return 1===e.length?e[0]:e}));var n;const i={};return r.length>0&&(i.topics=r),e&&"*"!==e&&(i.address=e),i}pollable(){return this.tag.indexOf(":")>=0||Li.indexOf(this.tag)>=0}}const Ui={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Fi(t){return J(it.from(t).toHexString(),32)}function qi(t){return ei.encode(q([t,H(ki(ki(t)),0,4)]))}class ji{constructor(t,e,r){lt(this,"provider",t),lt(this,"name",r),lt(this,"address",t.formatter.address(e))}_fetchBytes(t,e){return Mi(this,void 0,void 0,(function*(){const r={to:this.address,data:W([t,gi(this.name),e||"0x"])};try{const t=yield this.provider.call(r);if("0x"===t)return null;const e=it.from(H(t,0,32)).toNumber(),n=it.from(H(t,e,e+32)).toNumber();return H(t,e+32,e+32+n)}catch(t){return t.code,B.errors.CALL_EXCEPTION,null}}))}_getAddress(t,e){const r=Ui[String(t)];if(null==r&&Ti.throwError(`unsupported coin type: ${t}`,B.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${t})`}),"eth"===r.ilk)return this.provider.formatter.address(e);const n=F(e);if(null!=r.p2pkh){const t=e.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(t){const e=parseInt(t[1],16);if(t[2].length===2*e&&e>=1&&e<=75)return qi(q([[r.p2pkh],"0x"+t[2]]))}}if(null!=r.p2sh){const t=e.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(t){const e=parseInt(t[1],16);if(t[2].length===2*e&&e>=1&&e<=75)return qi(q([[r.p2sh],"0x"+t[2]]))}}if(null!=r.prefix){const t=n[1];let e=n[0];if(0===e?20!==t&&32!==t&&(e=-1):e=-1,e>=0&&n.length===2+t&&t>=1&&t<=75){const t=Ni().toWords(n.slice(2));return t.unshift(e),Ni().encode(r.prefix,t)}}return null}getAddress(t){return Mi(this,void 0,void 0,(function*(){if(null==t&&(t=60),60===t)try{const t={to:this.address,data:"0x3b3b57de"+gi(this.name).substring(2)},e=yield this.provider.call(t);return"0x"===e||"0x0000000000000000000000000000000000000000000000000000000000000000"===e?null:this.provider.formatter.callAddress(e)}catch(t){if(t.code===B.errors.CALL_EXCEPTION)return null;throw t}const e=yield this._fetchBytes("0xf1cb7e06",Fi(t));if(null==e||"0x"===e)return null;const r=this._getAddress(t,e);return null==r&&Ti.throwError("invalid or unsupported coin data",B.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${t})`,coinType:t,data:e}),r}))}getContentHash(){return Mi(this,void 0,void 0,(function*(){const t=yield this._fetchBytes("0xbc1c58d1");if(null==t||"0x"===t)return null;const e=t.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const t=parseInt(e[3],16);if(e[4].length===2*t)return"ipfs://"+ei.encode("0x"+e[1])}const r=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);return r&&64===r[1].length?"bzz://"+r[1]:Ti.throwError("invalid or unsupported content hash data",B.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:t})}))}getText(t){return Mi(this,void 0,void 0,(function*(){let e=Zt(t);e=q([Fi(64),Fi(e.length),e]),e.length%32!=0&&(e=q([e,J("0x",32-t.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",$(e));return null==r||"0x"===r?null:Yt(r)}))}}let zi=null,Gi=1;class $i extends ir{constructor(t){if(Ti.checkNew(new.target,ir),super(),this._events=[],this._emitted={block:-2},this.formatter=new.target.getFormatter(),lt(this,"anyNetwork","any"===t),this.anyNetwork&&(t=this.detectNetwork()),t instanceof Promise)this._networkPromise=t,t.catch((t=>{})),this._ready().catch((t=>{}));else{const e=ft(new.target,"getNetwork")(t);e?(lt(this,"_network",e),this.emit("network",e,null)):Ti.throwArgumentError("invalid network","network",t)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Mi(this,void 0,void 0,(function*(){if(null==this._network){let t=null;if(this._networkPromise)try{t=yield this._networkPromise}catch(t){}null==t&&(t=yield this.detectNetwork()),t||Ti.throwError("no network detected",B.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=t:lt(this,"_network",t),this.emit("network",t,null))}return this._network}))}get ready(){return Yn((()=>this._ready().then((t=>t),(t=>{if(t.code!==B.errors.NETWORK_ERROR||"noNetwork"!==t.event)throw t}))))}static getFormatter(){return null==zi&&(zi=new Pi),zi}static getNetwork(t){return function(t){if(null==t)return null;if("number"==typeof t){for(const e in Si){const r=Si[e];if(r.chainId===t)return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}return{chainId:t,name:"unknown"}}if("string"==typeof t){const e=Si[t];return null==e?null:{name:e.name,chainId:e.chainId,ensAddress:e.ensAddress,_defaultProvider:e._defaultProvider||null}}const e=Si[t.name];if(!e)return"number"!=typeof t.chainId&&yi.throwArgumentError("invalid network chainId","network",t),t;0!==t.chainId&&t.chainId!==e.chainId&&yi.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;var n;return null==r&&e._defaultProvider&&(r=(n=e._defaultProvider)&&"function"==typeof n.renetwork?e._defaultProvider.renetwork(t):e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}(null==t?"homestead":t)}_getInternalBlockNumber(t){return Mi(this,void 0,void 0,(function*(){if(yield this._ready(),t>0)for(;this._internalBlockNumber;){const e=this._internalBlockNumber;try{const r=yield e;if(Ri()-r.respTime<=t)return r.blockNumber;break}catch(t){if(this._internalBlockNumber===e)break}}const e=Ri(),r=dt({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((t=>null),(t=>t))}).then((({blockNumber:t,networkError:n})=>{if(n)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),n;const i=Ri();return(t=it.from(t).toNumber())<this._maxInternalBlockNumber&&(t=this._maxInternalBlockNumber),this._maxInternalBlockNumber=t,this._setFastBlockNumber(t),{blockNumber:t,reqTime:e,respTime:i}}));return this._internalBlockNumber=r,r.catch((t=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)})),(yield r).blockNumber}))}poll(){return Mi(this,void 0,void 0,(function*(){const t=Gi++,e=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(t){return void this.emit("error",t)}if(this._setFastBlockNumber(r),this.emit("poll",t,r),r!==this._lastBlockNumber){if(-2===this._emitted.block&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)Ti.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",Ti.makeError("network block skew detected",B.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let t=this._emitted.block+1;t<=r;t++)this.emit("block",t);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach((t=>{if("block"===t)return;const e=this._emitted[t];"pending"!==e&&r-e>12&&delete this._emitted[t]}))),-2===this._lastBlockNumber&&(this._lastBlockNumber=r-1),this._events.forEach((t=>{switch(t.type){case"tx":{const r=t.hash;let n=this.getTransactionReceipt(r).then((t=>t&&null!=t.blockNumber?(this._emitted["t:"+r]=t.blockNumber,this.emit(r,t),null):null)).catch((t=>{this.emit("error",t)}));e.push(n);break}case"filter":{const n=t.filter;n.fromBlock=this._lastBlockNumber+1,n.toBlock=r;const i=this.getLogs(n).then((t=>{0!==t.length&&t.forEach((t=>{this._emitted["b:"+t.blockHash]=t.blockNumber,this._emitted["t:"+t.transactionHash]=t.blockNumber,this.emit(n,t)}))})).catch((t=>{this.emit("error",t)}));e.push(i);break}}})),this._lastBlockNumber=r,Promise.all(e).then((()=>{this.emit("didPoll",t)})).catch((t=>{this.emit("error",t)}))}else this.emit("didPoll",t)}))}resetEventsBlock(t){this._lastBlockNumber=t-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Mi(this,void 0,void 0,(function*(){return Ti.throwError("provider does not support network detection",B.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})}))}getNetwork(){return Mi(this,void 0,void 0,(function*(){const t=yield this._ready(),e=yield this.detectNetwork();if(t.chainId!==e.chainId){if(this.anyNetwork)return this._network=e,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",e,t),yield Ci(0),this._network;const r=Ti.makeError("underlying network changed",B.errors.NETWORK_ERROR,{event:"changed",network:t,detectedNetwork:e});throw this.emit("error",r),r}return t}))}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then((t=>{this._setFastBlockNumber(t)}),(t=>{})),null!=this._fastBlockNumber?this._fastBlockNumber:-1}get polling(){return null!=this._poller}set polling(t){t&&!this._poller?(this._poller=setInterval((()=>{this.poll()}),this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout((()=>{this.poll(),this._bootstrapPoll=setTimeout((()=>{this._poller||this.poll(),this._bootstrapPoll=null}),this.pollingInterval)}),0))):!t&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(t){if("number"!=typeof t||t<=0||parseInt(String(t))!=t)throw new Error("invalid polling interval");this._pollingInterval=t,this._poller&&(clearInterval(this._poller),this._poller=setInterval((()=>{this.poll()}),this._pollingInterval))}_getFastBlockNumber(){const t=Ri();return t-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=t,this._fastBlockNumberPromise=this.getBlockNumber().then((t=>((null==this._fastBlockNumber||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber)))),this._fastBlockNumberPromise}_setFastBlockNumber(t){null!=this._fastBlockNumber&&t<this._fastBlockNumber||(this._fastQueryDate=Ri(),(null==this._fastBlockNumber||t>this._fastBlockNumber)&&(this._fastBlockNumber=t,this._fastBlockNumberPromise=Promise.resolve(t)))}waitForTransaction(t,e,r){return Mi(this,void 0,void 0,(function*(){return this._waitForTransaction(t,null==e?1:e,r||0,null)}))}_waitForTransaction(t,e,r,n){return Mi(this,void 0,void 0,(function*(){const i=yield this.getTransactionReceipt(t);return(i?i.confirmations:0)>=e?i:new Promise(((i,s)=>{const o=[];let a=!1;const h=function(){return!!a||(a=!0,o.forEach((t=>{t()})),!1)},u=t=>{t.confirmations<e||h()||i(t)};if(this.on(t,u),o.push((()=>{this.removeListener(t,u)})),n){let r=n.startBlock,i=null;const u=o=>Mi(this,void 0,void 0,(function*(){a||(yield Ci(1e3),this.getTransactionCount(n.from).then((c=>Mi(this,void 0,void 0,(function*(){if(!a){if(c<=n.nonce)r=o;else{{const e=yield this.getTransaction(t);if(e&&null!=e.blockNumber)return}for(null==i&&(i=r-3,i<n.startBlock&&(i=n.startBlock));i<=o;){if(a)return;const r=yield this.getBlockWithTransactions(i);for(let i=0;i<r.transactions.length;i++){const o=r.transactions[i];if(o.hash===t)return;if(o.from===n.from&&o.nonce===n.nonce){if(a)return;const r=yield this.waitForTransaction(o.hash,e);if(h())return;let i="replaced";return o.data===n.data&&o.to===n.to&&o.value.eq(n.value)?i="repriced":"0x"===o.data&&o.from===o.to&&o.value.isZero()&&(i="cancelled"),void s(Ti.makeError("transaction was replaced",B.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===i||"cancelled"===i,reason:i,replacement:this._wrapTransaction(o),hash:t,receipt:r}))}}i++}}a||this.once("block",u)}}))),(t=>{a||this.once("block",u)})))}));if(a)return;this.once("block",u),o.push((()=>{this.removeListener("block",u)}))}if("number"==typeof r&&r>0){const t=setTimeout((()=>{h()||s(Ti.makeError("timeout exceeded",B.errors.TIMEOUT,{timeout:r}))}),r);t.unref&&t.unref(),o.push((()=>{clearTimeout(t)}))}}))}))}getBlockNumber(){return Mi(this,void 0,void 0,(function*(){return this._getInternalBlockNumber(0)}))}getGasPrice(){return Mi(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield this.perform("getGasPrice",{});try{return it.from(t)}catch(e){return Ti.throwError("bad result from backend",B.errors.SERVER_ERROR,{method:"getGasPrice",result:t,error:e})}}))}getBalance(t,e){return Mi(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield dt({address:this._getAddress(t),blockTag:this._getBlockTag(e)}),n=yield this.perform("getBalance",r);try{return it.from(n)}catch(t){return Ti.throwError("bad result from backend",B.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:t})}}))}getTransactionCount(t,e){return Mi(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield dt({address:this._getAddress(t),blockTag:this._getBlockTag(e)}),n=yield this.perform("getTransactionCount",r);try{return it.from(n).toNumber()}catch(t){return Ti.throwError("bad result from backend",B.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:t})}}))}getCode(t,e){return Mi(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield dt({address:this._getAddress(t),blockTag:this._getBlockTag(e)}),n=yield this.perform("getCode",r);try{return $(n)}catch(t){return Ti.throwError("bad result from backend",B.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:t})}}))}getStorageAt(t,e,r){return Mi(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield dt({address:this._getAddress(t),blockTag:this._getBlockTag(r),position:Promise.resolve(e).then((t=>K(t)))}),i=yield this.perform("getStorageAt",n);try{return $(i)}catch(t){return Ti.throwError("bad result from backend",B.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:i,error:t})}}))}_wrapTransaction(t,e,r){if(null!=e&&32!==V(e))throw new Error("invalid response - sendTransaction");const n=t;return null!=e&&t.hash!==e&&Ti.throwError("Transaction hash mismatch from Provider.sendTransaction.",B.errors.UNKNOWN_ERROR,{expectedHash:t.hash,returnedHash:e}),n.wait=(e,n)=>Mi(this,void 0,void 0,(function*(){let i;null==e&&(e=1),null==n&&(n=0),0!==e&&null!=r&&(i={data:t.data,from:t.from,nonce:t.nonce,to:t.to,value:t.value,startBlock:r});const s=yield this._waitForTransaction(t.hash,e,n,i);return null==s&&0===e?null:(this._emitted["t:"+t.hash]=s.blockNumber,0===s.status&&Ti.throwError("transaction failed",B.errors.CALL_EXCEPTION,{transactionHash:t.hash,transaction:t,receipt:s}),s)})),n}sendTransaction(t){return Mi(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield Promise.resolve(t).then((t=>$(t))),r=this.formatter.transaction(t),n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const t=yield this.perform("sendTransaction",{signedTransaction:e});return this._wrapTransaction(r,t,n)}catch(t){throw t.transaction=r,t.transactionHash=r.hash,t}}))}_getTransactionRequest(t){return Mi(this,void 0,void 0,(function*(){const e=yield t,r={};return["from","to"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>t?this._getAddress(t):null)))})),["gasLimit","gasPrice","value"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>t?it.from(t):null)))})),["type"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>null!=t?t:null)))})),e.accessList&&(r.accessList=this.formatter.accessList(e.accessList)),["data"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>t?$(t):null)))})),this.formatter.transactionRequest(yield dt(r))}))}_getFilter(t){return Mi(this,void 0,void 0,(function*(){t=yield t;const e={};return null!=t.address&&(e.address=this._getAddress(t.address)),["blockHash","topics"].forEach((r=>{null!=t[r]&&(e[r]=t[r])})),["fromBlock","toBlock"].forEach((r=>{null!=t[r]&&(e[r]=this._getBlockTag(t[r]))})),this.formatter.filter(yield dt(e))}))}call(t,e){return Mi(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield dt({transaction:this._getTransactionRequest(t),blockTag:this._getBlockTag(e)}),n=yield this.perform("call",r);try{return $(n)}catch(t){return Ti.throwError("bad result from backend",B.errors.SERVER_ERROR,{method:"call",params:r,result:n,error:t})}}))}estimateGas(t){return Mi(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield dt({transaction:this._getTransactionRequest(t)}),r=yield this.perform("estimateGas",e);try{return it.from(r)}catch(t){return Ti.throwError("bad result from backend",B.errors.SERVER_ERROR,{method:"estimateGas",params:e,result:r,error:t})}}))}_getAddress(t){return Mi(this,void 0,void 0,(function*(){const e=yield this.resolveName(t);return null==e&&Ti.throwError("ENS name not configured",B.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(t)})`}),e}))}_getBlock(t,e){return Mi(this,void 0,void 0,(function*(){yield this.getNetwork(),t=yield t;let r=-128;const n={includeTransactions:!!e};if(z(t,32))n.blockHash=t;else try{n.blockTag=this.formatter.blockTag(yield this._getBlockTag(t)),z(n.blockTag)&&(r=parseInt(n.blockTag.substring(2),16))}catch(e){Ti.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",t)}return Yn((()=>Mi(this,void 0,void 0,(function*(){const t=yield this.perform("getBlock",n);if(null==t)return null!=n.blockHash&&null==this._emitted["b:"+n.blockHash]||null!=n.blockTag&&r>this._emitted.block?null:void 0;if(e){let e=null;for(let r=0;r<t.transactions.length;r++){const n=t.transactions[r];if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){null==e&&(e=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let t=e-n.blockNumber+1;t<=0&&(t=1),n.confirmations=t}}return this.formatter.blockWithTransactions(t)}return this.formatter.block(t)}))),{oncePoll:this})}))}getBlock(t){return this._getBlock(t,!1)}getBlockWithTransactions(t){return this._getBlock(t,!0)}getTransaction(t){return Mi(this,void 0,void 0,(function*(){yield this.getNetwork(),t=yield t;const e={transactionHash:this.formatter.hash(t,!0)};return Yn((()=>Mi(this,void 0,void 0,(function*(){const r=yield this.perform("getTransaction",e);if(null==r)return null==this._emitted["t:"+t]?null:void 0;const n=this.formatter.transactionResponse(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let t=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;t<=0&&(t=1),n.confirmations=t}return this._wrapTransaction(n)}))),{oncePoll:this})}))}getTransactionReceipt(t){return Mi(this,void 0,void 0,(function*(){yield this.getNetwork(),t=yield t;const e={transactionHash:this.formatter.hash(t,!0)};return Yn((()=>Mi(this,void 0,void 0,(function*(){const r=yield this.perform("getTransactionReceipt",e);if(null==r)return null==this._emitted["t:"+t]?null:void 0;if(null==r.blockHash)return;const n=this.formatter.receipt(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let t=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;t<=0&&(t=1),n.confirmations=t}return n}))),{oncePoll:this})}))}getLogs(t){return Mi(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield dt({filter:this._getFilter(t)}),r=yield this.perform("getLogs",e);return r.forEach((t=>{null==t.removed&&(t.removed=!1)})),Pi.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)}))}getEtherPrice(){return Mi(this,void 0,void 0,(function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})}))}_getBlockTag(t){return Mi(this,void 0,void 0,(function*(){if("number"==typeof(t=yield t)&&t<0){t%1&&Ti.throwArgumentError("invalid BlockTag","blockTag",t);let e=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return e+=t,e<0&&(e=0),this.formatter.blockTag(e)}return this.formatter.blockTag(t)}))}getResolver(t){return Mi(this,void 0,void 0,(function*(){try{const e=yield this._getResolver(t);return null==e?null:new ji(this,e,t)}catch(t){return t.code,B.errors.CALL_EXCEPTION,null}}))}_getResolver(t){return Mi(this,void 0,void 0,(function*(){const e=yield this.getNetwork();e.ensAddress||Ti.throwError("network does not support ENS",B.errors.UNSUPPORTED_OPERATION,{operation:"ENS",network:e.name});const r={to:e.ensAddress,data:"0x0178b8bf"+gi(t).substring(2)};try{return this.formatter.callAddress(yield this.call(r))}catch(t){if(t.code===B.errors.CALL_EXCEPTION)return null;throw t}}))}resolveName(t){return Mi(this,void 0,void 0,(function*(){t=yield t;try{return Promise.resolve(this.formatter.address(t))}catch(e){if(z(t))throw e}"string"!=typeof t&&Ti.throwArgumentError("invalid ENS name","name",t);const e=yield this.getResolver(t);return e?yield e.getAddress():null}))}lookupAddress(t){return Mi(this,void 0,void 0,(function*(){t=yield t;const e=(t=this.formatter.address(t)).substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(e);if(!r)return null;let n=F(yield this.call({to:r,data:"0x691f3431"+gi(e).substring(2)}));if(n.length<32||!it.from(n.slice(0,32)).eq(32))return null;if(n=n.slice(32),n.length<32)return null;const i=it.from(n.slice(0,32)).toNumber();if(n=n.slice(32),i>n.length)return null;const s=Yt(n.slice(0,i));return(yield this.resolveName(s))!=t?null:s}))}perform(t,e){return Ti.throwError(t+" not implemented",B.errors.NOT_IMPLEMENTED,{operation:t})}_startEvent(t){this.polling=this._events.filter((t=>t.pollable())).length>0}_stopEvent(t){this.polling=this._events.filter((t=>t.pollable())).length>0}_addEventListener(t,e,r){const n=new Di(Bi(t),e,r);return this._events.push(n),this._startEvent(n),this}on(t,e){return this._addEventListener(t,e,!1)}once(t,e){return this._addEventListener(t,e,!0)}emit(t,...e){let r=!1,n=[],i=Bi(t);return this._events=this._events.filter((t=>t.tag!==i||(setTimeout((()=>{t.listener.apply(this,e)}),0),r=!0,!t.once||(n.push(t),!1)))),n.forEach((t=>{this._stopEvent(t)})),r}listenerCount(t){if(!t)return this._events.length;let e=Bi(t);return this._events.filter((t=>t.tag===e)).length}listeners(t){if(null==t)return this._events.map((t=>t.listener));let e=Bi(t);return this._events.filter((t=>t.tag===e)).map((t=>t.listener))}off(t,e){if(null==e)return this.removeAllListeners(t);const r=[];let n=!1,i=Bi(t);return this._events=this._events.filter((t=>t.tag!==i||t.listener!=e||(!!n||(n=!0,r.push(t),!1)))),r.forEach((t=>{this._stopEvent(t)})),this}removeAllListeners(t){let e=[];if(null==t)e=this._events,this._events=[];else{const r=Bi(t);this._events=this._events.filter((t=>t.tag!==r||(e.push(t),!1)))}return e.forEach((t=>{this._stopEvent(t)})),this}}var Vi=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))};const Hi=new B(Qn),Wi=["call","estimateGas"];function Ki(t,e,r){if("call"===t&&e.code===B.errors.SERVER_ERROR){const t=e.error;if(t&&t.message.match("reverted")&&z(t.data))return t.data;Hi.throwError("missing revert data in call exception",B.errors.CALL_EXCEPTION,{error:e,data:"0x"})}let n=e.message;e.code===B.errors.SERVER_ERROR&&e.error&&"string"==typeof e.error.message?n=e.error.message:"string"==typeof e.body?n=e.body:"string"==typeof e.responseText&&(n=e.responseText),n=(n||"").toLowerCase();const i=r.transaction||r.signedTransaction;throw n.match(/insufficient funds/)&&Hi.throwError("insufficient funds for intrinsic transaction cost",B.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:i}),n.match(/nonce too low/)&&Hi.throwError("nonce has already been used",B.errors.NONCE_EXPIRED,{error:e,method:t,transaction:i}),n.match(/replacement transaction underpriced/)&&Hi.throwError("replacement fee too low",B.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:i}),n.match(/only replay-protected/)&&Hi.throwError("legacy pre-eip-155 transactions not supported",B.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:i}),Wi.indexOf(t)>=0&&n.match(/gas required exceeds allowance|always failing transaction|execution reverted/)&&Hi.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",B.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:i}),e}function Ji(t){return new Promise((function(e){setTimeout(e,t)}))}function Zi(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function Xi(t){return t?t.toLowerCase():t}const Yi={};class Qi extends ur{constructor(t,e,r){if(Hi.checkNew(new.target,Qi),super(),t!==Yi)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");lt(this,"provider",e),null==r&&(r=0),"string"==typeof r?(lt(this,"_address",this.provider.formatter.address(r)),lt(this,"_index",null)):"number"==typeof r?(lt(this,"_index",r),lt(this,"_address",null)):Hi.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(t){return Hi.throwError("cannot alter JSON-RPC Signer connection",B.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new ts(Yi,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((t=>(t.length<=this._index&&Hi.throwError("unknown account #"+this._index,B.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(t[this._index]))))}sendUncheckedTransaction(t){t=pt(t);const e=this.getAddress().then((t=>(t&&(t=t.toLowerCase()),t)));if(null==t.gasLimit){const r=pt(t);r.from=e,t.gasLimit=this.provider.estimateGas(r)}return null!=t.to&&(t.to=Promise.resolve(t.to).then((t=>Vi(this,void 0,void 0,(function*(){if(null==t)return null;const e=yield this.provider.resolveName(t);return null==e&&Hi.throwArgumentError("provided ENS name resolves to null","tx.to",t),e}))))),dt({tx:dt(t),sender:e}).then((({tx:e,sender:r})=>{null!=e.from?e.from.toLowerCase()!==r&&Hi.throwArgumentError("from address mismatch","transaction",t):e.from=r;const n=this.provider.constructor.hexlifyTransaction(e,{from:!0});return this.provider.send("eth_sendTransaction",[n]).then((t=>t),(t=>Ki("sendTransaction",t,n)))}))}signTransaction(t){return Hi.throwError("signing transactions is unsupported",B.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(t){return Vi(this,void 0,void 0,(function*(){const e=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(t);try{return yield Yn((()=>Vi(this,void 0,void 0,(function*(){const t=yield this.provider.getTransaction(r);if(null!==t)return this.provider._wrapTransaction(t,r,e)}))),{oncePoll:this.provider})}catch(t){throw t.transactionHash=r,t}}))}signMessage(t){return Vi(this,void 0,void 0,(function*(){const e="string"==typeof t?Zt(t):t,r=yield this.getAddress();return yield this.provider.send("eth_sign",[r.toLowerCase(),$(e)])}))}_signTypedData(t,e,r){return Vi(this,void 0,void 0,(function*(){const n=yield Gn.resolveNames(t,e,r,(t=>this.provider.resolveName(t))),i=yield this.getAddress();return yield this.provider.send("eth_signTypedData_v4",[i.toLowerCase(),JSON.stringify(Gn.getPayload(n.domain,e,n.value))])}))}unlock(t){return Vi(this,void 0,void 0,(function*(){const e=this.provider,r=yield this.getAddress();return e.send("personal_unlockAccount",[r.toLowerCase(),t,null])}))}}class ts extends Qi{sendTransaction(t){return this.sendUncheckedTransaction(t).then((t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:e=>this.provider.waitForTransaction(t,e)})))}}const es={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class rs extends $i{constructor(t,e){Hi.checkNew(new.target,rs);let r=e;null==r&&(r=new Promise(((t,e)=>{setTimeout((()=>{this.detectNetwork().then((e=>{t(e)}),(t=>{e(t)}))}),0)}))),super(r),t||(t=ft(this.constructor,"defaultUrl")()),lt(this,"connection","string"==typeof t?Object.freeze({url:t}):Object.freeze(pt(t))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout((()=>{this._cache.detectNetwork=null}),0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Vi(this,void 0,void 0,(function*(){yield Ji(0);let t=null;try{t=yield this.send("eth_chainId",[])}catch(e){try{t=yield this.send("net_version",[])}catch(t){}}if(null!=t){const e=ft(this.constructor,"getNetwork");try{return e(it.from(t).toNumber())}catch(e){return Hi.throwError("could not detect network",B.errors.NETWORK_ERROR,{chainId:t,event:"invalidNetwork",serverError:e})}}return Hi.throwError("could not detect network",B.errors.NETWORK_ERROR,{event:"noNetwork"})}))}getSigner(t){return new Qi(Yi,this,t)}getUncheckedSigner(t){return this.getSigner(t).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then((t=>t.map((t=>this.formatter.address(t)))))}send(t,e){const r={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:vt(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(t)>=0;if(n&&this._cache[t])return this._cache[t];const i=Xn(this.connection,JSON.stringify(r),Zi).then((t=>(this.emit("debug",{action:"response",request:r,response:t,provider:this}),t)),(t=>{throw this.emit("debug",{action:"response",error:t,request:r,provider:this}),t}));return n&&(this._cache[t]=i,setTimeout((()=>{this._cache[t]=null}),0)),i}prepareRequest(t,e){switch(t){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Xi(e.address),e.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Xi(e.address),e.blockTag]];case"getCode":return["eth_getCode",[Xi(e.address),e.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Xi(e.address),e.position,e.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[e.signedTransaction]];case"getBlock":return e.blockTag?["eth_getBlockByNumber",[e.blockTag,!!e.includeTransactions]]:e.blockHash?["eth_getBlockByHash",[e.blockHash,!!e.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[e.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[e.transactionHash]];case"call":return["eth_call",[ft(this.constructor,"hexlifyTransaction")(e.transaction,{from:!0}),e.blockTag]];case"estimateGas":return["eth_estimateGas",[ft(this.constructor,"hexlifyTransaction")(e.transaction,{from:!0})]];case"getLogs":return e.filter&&null!=e.filter.address&&(e.filter.address=Xi(e.filter.address)),["eth_getLogs",[e.filter]]}return null}perform(t,e){return Vi(this,void 0,void 0,(function*(){const r=this.prepareRequest(t,e);null==r&&Hi.throwError(t+" not implemented",B.errors.NOT_IMPLEMENTED,{operation:t});try{return yield this.send(r[0],r[1])}catch(r){return Ki(t,r,e)}}))}_startEvent(t){"pending"===t.tag&&this._startPending(),super._startEvent(t)}_startPending(){if(null!=this._pendingFilter)return;const t=this,e=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=e,e.then((function(r){return function n(){t.send("eth_getFilterChanges",[r]).then((function(r){if(t._pendingFilter!=e)return null;let n=Promise.resolve();return r.forEach((function(e){t._emitted["t:"+e.toLowerCase()]="pending",n=n.then((function(){return t.getTransaction(e).then((function(e){return t.emit("pending",e),null}))}))})),n.then((function(){return Ji(1e3)}))})).then((function(){if(t._pendingFilter==e)return setTimeout((function(){n()}),0),null;t.send("eth_uninstallFilter",[r])})).catch((t=>{}))}(),r})).catch((t=>{}))}_stopEvent(t){"pending"===t.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(t)}static hexlifyTransaction(t,e){const r=pt(es);if(e)for(const t in e)e[t]&&(r[t]=!0);var n,i;i=r,(n=t)&&"object"==typeof n||ct.throwArgumentError("invalid object","object",n),Object.keys(n).forEach((t=>{i[t]||ct.throwArgumentError("invalid object key - "+t,"transaction:"+t,n)}));const s={};return["gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(e){if(null==t[e])return;const r=K(t[e]);"gasLimit"===e&&(e="gas"),s[e]=r})),["from","to","data"].forEach((function(e){null!=t[e]&&(s[e]=$(t[e]))})),t.accessList&&(s.accessList=hn(t.accessList)),s}}var ns=r(6807),is=r.n(ns);function ss(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,i,s=[],o=!0,a=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(s.push(n.value),!e||s.length!==e);o=!0);}catch(t){a=!0,i=t}finally{try{o||null==r.return||r.return()}finally{if(a)throw i}}return s}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return os(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return os(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function os(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function as(t,e,r,n,i,s,o){try{var a=t[s](o),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(n,i)}function hs(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var s=t.apply(e,r);function o(t){as(s,n,i,o,a,"next",t)}function a(t){as(s,n,i,o,a,"throw",t)}o(void 0)}))}}var us=new rs("http://blockchain.enface.io:59321"),cs=new Nn("0x2900ecb89089ff273c7ffE29C26A1158cEDF24a4",[{constant:!1,inputs:[{name:"_aliasHash",type:"bytes32"},{name:"_names",type:"bytes32[]"},{name:"_shifts",type:"uint256[]"},{name:"_mixedValues",type:"bytes"}],name:"addAlias",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_aliasHash",type:"bytes32"},{name:"_indexes",type:"uint256[]"},{name:"_shifts",type:"uint256[]"},{name:"_mixedValues",type:"bytes"}],name:"addRecord",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_aliasHash",type:"bytes32"},{name:"_names",type:"bytes32[]"},{name:"_values",type:"bytes32[]"},{name:"_shifts",type:"uint256[]"},{name:"_mixedValues",type:"bytes"}],name:"addRecordHashed",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_commissionAlias",type:"uint256"},{name:"_commissionRecordHashed",type:"uint256"},{name:"_commissionRecord",type:"uint256"}],name:"changeParams",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_receiver",type:"address"}],name:"withdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{constant:!0,inputs:[{name:"_aliasHash",type:"bytes32"},{name:"_names",type:"bytes32[]"}],name:"getHashes",outputs:[{name:"hashOwner",type:"address"},{name:"hashes",type:"bytes32[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getParams",outputs:[{name:"commAlias",type:"uint256"},{name:"commRecordHashed",type:"uint256"},{name:"commRecord",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_aliasHash",type:"bytes32"},{name:"_indexFrom",type:"uint256"},{name:"_indexTo",type:"uint256"}],name:"getRecord",outputs:[{name:"shifts",type:"uint256[]"},{name:"mixedResult",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_aliasHash",type:"bytes32"},{name:"_names",type:"bytes32[]"}],name:"getRecordHashed",outputs:[{name:"hashOwner",type:"address"},{name:"shifts",type:"uint256[]"},{name:"mixedResult",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_aliasHash",type:"bytes32"}],name:"getRecordsCounter",outputs:[{name:"counter",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],us),ls=function(){var t=hs(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return","0x".concat(s().createHash("sha256").update(e).digest("hex")));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),fs=function(){var t=hs(regeneratorRuntime.mark((function t(e,r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ls(e);case 2:return n=t.sent,t.next=5,Promise.all(r.map((function(t){return ls(t)})));case 5:return r=t.sent,t.abrupt("return",cs.getRecordHashed(n,r));case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),ds=function(){var t=hs(regeneratorRuntime.mark((function t(e){var r,n,i,s,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fs(e,["".concat(e).concat(":publicEnc"),"".concat(e).concat(":publicSign")]);case 2:return r=t.sent,k(r.mixedResult,"0x","user not found"),t.next=6,a=r.mixedResult,[(a=Buffer.from(a.substr(2),"hex")).slice(0,256),a.slice(256)].map((function(t){var e=new(is());return e.importKey({n:t,e:65537},"components-public"),e}));case 6:return n=t.sent,i=ss(n,2),s=i[0],o=i[1],t.abrupt("return",{publicKeySign:o,publicKeyEnc:s});case 11:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}(),ps=function(){var t=hs(regeneratorRuntime.mark((function t(e){var r,n,i,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ds(e);case 2:if(r=t.sent,n=r.publicKeyEnc,i=r.publicKeySign,n&&i){t.next=7;break}throw new Error("failed to get public keys for alias ".concat(e));case 7:return o=Buffer.from(s().randomBytes(128)),a=n.encrypt(o).toString("hex"),t.abrupt("return",{secret:o,challenge:a,publicKeySign:i});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ms=function(){var t=hs(regeneratorRuntime.mark((function t(e){var r,n,i,s,o,a,h,u,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.publicKeySign,n=e.secret,i=e.challengeSigned,s=i.split("|"),o=ss(s,2),a=o[0],h=o[1],u=Buffer.from(n,0).equals(Buffer.from(a,"hex")),c=r.verify(n,Buffer.from(h,"hex")),t.abrupt("return",u&&c);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function gs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ys(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?gs(Object(r),!0).forEach((function(e){vs(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gs(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function vs(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bs(t,e,r,n,i,s,o){try{var a=t[s](o),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(n,i)}function ws(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var s=t.apply(e,r);function o(t){bs(s,n,i,o,a,"next",t)}function a(t){bs(s,n,i,o,a,"throw",t)}o(void 0)}))}}function _s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Es=function(){function t(r){var n=this,i=r.debug,s=r.port,o=void 0===s?31313:s,a=r.projectId,h=r.secretCode,u=r.fields,c=void 0===u?"":u,l=r.ssl,f=r.onUserValidate,d=r.onActivate,p=r.onSuccess;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.log=i?console.log.bind(console):function(){},this.logError=i?console.error.bind(console):function(){},e(a)){this.projectId=a;try{this.secretCode=Buffer.from(h,"base64")}catch(t){return void console.error("[EnfaceAuth].constructor.error: bad secret code")}this.fields=c,this.onUserValidate=f,this.currentUserToken="",this.onActivate=d,this.onSuccess=p,this.sessions={};var m=l?b().createServer(l):null;this.log("[EnfaceAuth] starting ws".concat(m?"s":""," server at port: ").concat(o));var g=new(y().Server)({server:m});m.listen(o),g.on("connection",(function(t){n.newClient({client:t}),t.on("message",(function(e){n.request({client:t,data:e})})),t.on("close",(function(e){n.log("[EnfaceAuth].socket.on.close ".concat(t.clientId," closed with code: ").concat(e)),t.isAlive=!1,n.sessions[t.clientId]&&n.responseFailed({client:t,data:{_:"connection_failed"}}),delete n.sessions[t.clientId],n.log("[EnfaceAuth].socket.on.close active sessions ".concat(Object.keys(n.sessions).length))})),t.isAlive=!0,t.on("pong",(function(){t.isAlive=!0}))})),this.interval=setInterval((function(){g.clients.forEach((function(t){return!1===t.isAlive?t.terminate():(t.isAlive=!1,t.ping((function(){})))}))}),3e4),g.on("close",(function(){clearInterval(n.interval)}))}else console.error("[EnfaceAuth].constructor.error: bad projectId (should be uuid string)")}var r,n,i,o,a,h,u,c;return r=t,(n=[{key:"encode",value:function(t){return JSON.stringify(t)}},{key:"decode",value:function(t){return JSON.parse(t)}},{key:"request",value:(c=ws(regeneratorRuntime.mark((function t(e){var r,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.client,n=e.data,this.log("[EnfaceAuth].request, ".concat(n)),t.prev=2,t.next=5,this.readMessage({client:r,data:n});case 5:(i=t.sent)&&this.send({client:r,data:i}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(2),this.logError("[EnfaceAuth].request error', ".concat(t.t0.message)),this.errorResponse({client:r,error:"".concat(t.t0)}),this.finalizeSession(r);case 14:case"end":return t.stop()}}),t,this,[[2,9]])}))),function(t){return c.apply(this,arguments)})},{key:"send",value:function(t){var e=t.client,r=t.data;this.log("[EnfaceAuth].send",{data:r}),e.send(this.encode(r))}},{key:"readMessage",value:(u=ws(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.client,n=e.data,t.prev=1,this.log("[EnfaceAuth].readMessage, ".concat(this.encode(n),", clientId, ").concat(r.clientId)),t.prev=3,n=this.decode(n),t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(3),this.logError("[EnfaceAuth].readMessage, ".concat(t.t0.message)),t.abrupt("return",this.errorResponse({client:r,error:"wrong data received ".concat(n)}));case 11:t.t1=n._,t.next="hello"===t.t1?14:t.t1===w?15:"auth_init"===t.t1?16:"declined"===t.t1?17:t.t1===E?18:"current_user_token"===t.t1?19:21;break;case 14:return t.abrupt("return",this.responseHello({client:r,data:n}));case 15:return t.abrupt("return",this.responseActivate({client:r,sessionId:n.session_id,alias:n.alias}));case 16:return t.abrupt("return",this.responseInit({client:r,data:n}));case 17:return t.abrupt("return",this.responseFailed({client:r,data:n}));case 18:return t.abrupt("return",this.responseAuth({client:r,data:n}));case 19:return this.currentUserToken=n.payload,t.abrupt("return",!1);case 21:return t.abrupt("return",this.errorResponse({client:r,error:"unknown command ".concat(n._)}));case 22:t.next=28;break;case 24:return t.prev=24,t.t2=t.catch(1),this.logError("[EnfaceAuth].readMessage ERROR ".concat(t.t2.message)),t.abrupt("return",this.errorResponse({client:r,error:t.t2.message}));case 28:case"end":return t.stop()}}),t,this,[[1,24],[3,7]])}))),function(t){return u.apply(this,arguments)})},{key:"newClient",value:function(t){var e=this,r=t.client,n=m();this.log("[EnfaceAuth].newClient ".concat(n)),this.sessions[n]={client:r,sessionId:m(),alias:null,userId:null,clientSessionId:null,resolver:null},r.clientId=n,setTimeout((function(){e.sessions[n]&&e.finalizeSession({clientId:n})}),6e5)}},{key:"responseFailed",value:function(t){var e=t.client,r=t.data;if(this.log("[EnfaceAuth].responseFailed, ".concat(this.encode(r),", sessionId: ").concat(this.sessions[e.clientId].sessionId)),!e.browserSession)return this.errorResponse({client:e,error:"client not found"});this.log("[EnfaceAuth].responseFailed, found clientSessionId ".concat(r.session_id)),this.finalResponse({client:e.browserSession.client,data:{_:r._}}),this.finalResponse({client:e,data:{_:r._}})}},{key:"responseInit",value:function(t){var e=t.client,r=t.data;this.log("[EnfaceAuth].responseInit, ".concat(this.encode(r),", sessionId: ").concat(this.sessions[e.clientId].sessionId));var n=function(t,e){var r=s().randomBytes(16),n=s().createCipheriv("aes-256-cbc",e,r),i=n.update(t);return i=Buffer.concat([i,n.final()]),"".concat(r.toString("hex")).concat(i.toString("hex"))}(this.sessions[e.clientId].sessionId,this.secretCode);return this.resolve({client:e,data:{_:r._,payload:{id:this.projectId,token:n}}})}},{key:"responseHello",value:(h=ws(regeneratorRuntime.mark((function t(e){var r,n,i,s,o,a,h,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.client,n=e.data,this.log("[EnfaceAuth].responseHello sessionId: ".concat(this.sessions[r.clientId].sessionId)),i=this.findSession("clientSessionId",n.session_id)){t.next=5;break}return t.abrupt("return",this.errorResponse({client:r,error:"client not found"}));case 5:if(r.browserSession=i,r.challenge){t.next=16;break}return t.next=9,ps(n.alias);case 9:h=t.sent,s=h.secret,o=h.challenge,a=h.publicKeySign,r.secret=s,r.publicKeySign=a,r.alias=n.alias;case 16:return u=a?{_:"challenge",message:"continue",payload:{challenge:o,fields:this.fields}}:{_:"error",message:"user not found"},t.abrupt("return",this.resolve({client:r,data:u}));case 18:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"responseActivate",value:function(t){var e=t.client,r=t.sessionId,n=t.alias;this.log("[EnfaceAuth].responseActivate, sessionId, ".concat(r,', alias: "').concat(n,'"'));var i=this.findSession("sessionId",r);return i?i.alias?this.errorResponse({client:e,error:"session is already activated"}):(i.alias=n,i.clientSessionId=m(),this.finalResponse({client:e,data:{_,client_session_id:i.clientSessionId}}),void this.send({client:i.client,data:{_:"activated"}})):this.errorResponse({client:e,error:"client not found"})}},{key:"responseAuth",value:(a=ws(regeneratorRuntime.mark((function t(e){var r,n,i,s,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.client,n=e.data,this.log("[EnfaceAuth].responseAuth",{data:n}),r.browserSession){t.next=4;break}return t.abrupt("return",this.errorResponse({client:r,error:"client not found"}));case 4:if(r.browserSession.alias===n.alias){t.next=6;break}return t.abrupt("return",[r.browserSession.client,r].forEach((function(t){return o.errorResponse({client:t,error:"user alias do not match"})})));case 6:return t.next=8,ms({secret:r.secret,publicKeySign:r.publicKeySign,challengeSigned:n.challenge_signed});case 8:return i=t.sent,this.log("[EnfaceAuth].responseAuth challengeResult: ".concat(i)),S(i,"access denied"),t.next=13,this.onSuccess(ys(ys({},n.fields),{},{alias:n.alias,currentUserToken:this.currentUserToken}));case 13:return s=t.sent,this.log("[EnfaceAuth].responseAuth onSuccess",{result:s}),this.finalResponse({client:r,data:{_:s.error?"error":n._,message:s.error||"welcome"}}),this.finalResponse({client:r.browserSession.client,data:{_:s.error?"error":"auth_result",message:s.error||"welcome",payload:{token:s.token,linked_id:s.linkedId||""}}}),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"linkSessionToUser",value:(o=ws(regeneratorRuntime.mark((function t(e){var r,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.client,n=e.userData,this.log("[linkSessionToUser]",this),t.prev=2,t.next=5,this.onUserValidate(n);case 5:return i=t.sent,this.log("[linkSessionToUser] userId, ".concat(i)),this.sessions[r.clientId].userId=i,t.abrupt("return",!0);case 11:return t.prev=11,t.t0=t.catch(2),t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t,this,[[2,11]])}))),function(t){return o.apply(this,arguments)})},{key:"errorResponse",value:function(t){var e=t.client,r=t.error;return this.logError("[EnfaceAuth].errorResponse, ".concat(r)),this.finalResponse({client:e,data:{_:"error",message:r}}),!1}},{key:"finalResponse",value:function(t){var e=t.client,r=t.data;this.log("[EnfaceAuth].finalResponse to ".concat(e.clientId)),this.resolve({client:e,data:r,closeConnection:!0})}},{key:"resolve",value:function(t){var e=t.client,r=t.data,n=t.closeConnection;this.log("[EnfaceAuth].resolve clientId [".concat(e.clientId,"], data: ").concat(this.encode(r)));var i=this.sessions[e.clientId];i&&(this.send({client:i.client,data:r}),n&&this.closeClient({client:i.client}))}},{key:"finalizeSession",value:function(t){var e=t.clientId;this.log("[EnfaceAuth].finalizeSession clientId ".concat(e)),this.sessions[e]&&this.closeClient({client:this.sessions[e].client})}},{key:"closeClient",value:function(t){var e=t.client;this.log("[EnfaceAuth].closeClient ".concat(e.clientId)),delete this.sessions[e.clientId],e&&e.terminate()}},{key:"findSession",value:function(t,e){for(var r=0,n=Object.keys(this.sessions);r<n.length;r++){var i=n[r];if(this.sessions[i][t]===e)return this.sessions[i]}return null}}])&&_s(r.prototype,n),i&&_s(r,i),t}();Es.COMMAND_AUTH=E,Es.COMMAND_CHECK=w,Es.COMMAND_READY=_})(),n})()}));